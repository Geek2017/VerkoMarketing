/*! permutive-javascript-sdk v9.16.0 (web) (built 2020-06-18 01:35:01 GMT+0000) */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=30)}([function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return a})),n.d(t,"none",(function(){return o})),n.d(t,"some",(function(){return s})),n.d(t,"isSome",(function(){return u})),n.d(t,"isNone",(function(){return c})),n.d(t,"fold",(function(){return f})),n.d(t,"fromNullable",(function(){return d})),n.d(t,"toNullable",(function(){return l})),n.d(t,"toUndefined",(function(){return p})),n.d(t,"getOrElse",(function(){return h})),n.d(t,"getOrElseW",(function(){return g})),n.d(t,"elem",(function(){return m})),n.d(t,"exists",(function(){return v})),n.d(t,"fromPredicate",(function(){return _})),n.d(t,"tryCatch",(function(){return y})),n.d(t,"getLeft",(function(){return b})),n.d(t,"getRight",(function(){return w})),n.d(t,"getRefinement",(function(){return k})),n.d(t,"mapNullable",(function(){return S})),n.d(t,"getShow",(function(){return P})),n.d(t,"getEq",(function(){return E})),n.d(t,"getOrd",(function(){return I})),n.d(t,"getApplySemigroup",(function(){return O})),n.d(t,"getApplyMonoid",(function(){return q})),n.d(t,"getFirstMonoid",(function(){return C})),n.d(t,"getLastMonoid",(function(){return M})),n.d(t,"getMonoid",(function(){return T})),n.d(t,"option",(function(){return A})),n.d(t,"alt",(function(){return B})),n.d(t,"ap",(function(){return D})),n.d(t,"apFirst",(function(){return R})),n.d(t,"apSecond",(function(){return L})),n.d(t,"chain",(function(){return W})),n.d(t,"chainFirst",(function(){return U})),n.d(t,"duplicate",(function(){return z})),n.d(t,"extend",(function(){return F})),n.d(t,"filter",(function(){return G})),n.d(t,"filterMap",(function(){return K})),n.d(t,"flatten",(function(){return Q})),n.d(t,"foldMap",(function(){return H})),n.d(t,"map",(function(){return J})),n.d(t,"partition",(function(){return V})),n.d(t,"partitionMap",(function(){return Y})),n.d(t,"reduce",(function(){return $})),n.d(t,"reduceRight",(function(){return Z})),n.d(t,"compact",(function(){return X})),n.d(t,"separate",(function(){return ee})),n.d(t,"fromEither",(function(){return te}));var r=n(2),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a="Option",o={_tag:"None"};function s(e){return{_tag:"Some",value:e}}function u(e){return"Some"===e._tag}function c(e){return"None"===e._tag}function f(e,t){return function(n){return c(n)?e():t(n.value)}}function d(e){return null==e?o:s(e)}function l(e){return c(e)?null:e.value}function p(e){return c(e)?void 0:e.value}function h(e){return function(t){return c(t)?e():t.value}}var g=h;function m(e){return function(t,n){return!c(n)&&e.equals(t,n.value)}}function v(e){return function(t){return!c(t)&&e(t.value)}}function _(e){return function(t){return e(t)?s(t):o}}function y(e){try{return s(e())}catch(e){return o}}function b(e){return"Right"===e._tag?o:s(e.left)}function w(e){return"Left"===e._tag?o:s(e.right)}function k(e){return function(t){return u(e(t))}}function S(e){return function(t){return c(t)?o:d(e(t.value))}}function P(e){return{show:function(t){return c(t)?"none":"some("+e.show(t.value)+")"}}}function E(e){return{equals:function(t,n){return t===n||(c(t)?c(n):!c(n)&&e.equals(t.value,n.value))}}}function I(e){return{equals:E(e).equals,compare:function(t,n){return t===n?0:u(t)?u(n)?e.compare(t.value,n.value):1:-1}}}function O(e){return{concat:function(t,n){return u(t)&&u(n)?s(e.concat(t.value,n.value)):o}}}function q(e){return i(i({},O(e)),{empty:s(e.empty)})}function C(){return{concat:function(e,t){return c(e)?t:e},empty:o}}function M(){return{concat:function(e,t){return c(t)?e:t},empty:o}}function T(e){return{concat:function(t,n){return c(t)?n:c(n)?t:s(e.concat(t.value,n.value))},empty:o}}var x={left:o,right:o},j=function(e){return e},A={URI:a,map:function(e,t){return c(e)?o:s(t(e.value))},of:s,ap:function(e,t){return c(e)||c(t)?o:s(e.value(t.value))},chain:function(e,t){return c(e)?o:t(e.value)},reduce:function(e,t,n){return c(e)?t:n(t,e.value)},foldMap:function(e){return function(t,n){return c(t)?e.empty:n(t.value)}},reduceRight:function(e,t,n){return c(e)?t:n(e.value,t)},traverse:function(e){return function(t,n){return c(t)?e.of(o):e.map(n(t.value),s)}},sequence:function(e){return function(t){return c(t)?e.of(o):e.map(t.value,s)}},zero:function(){return o},alt:function(e,t){return c(e)?t():e},extend:function(e,t){return c(e)?o:s(t(e))},compact:function(e){return A.chain(e,j)},separate:function(e){var t=A.map(e,(function(e){return{left:b(e),right:w(e)}}));return c(t)?x:t.value},filter:function(e,t){return c(e)?o:t(e.value)?e:o},filterMap:function(e,t){return c(e)?o:t(e.value)},partition:function(e,t){return{left:A.filter(e,(function(e){return!t(e)})),right:A.filter(e,t)}},partitionMap:function(e,t){return A.separate(A.map(e,t))},wither:function(e){return function(t,n){return c(t)?e.of(o):n(t.value)}},wilt:function(e){return function(t,n){var r=A.map(t,(function(t){return e.map(n(t),(function(e){return{left:b(e),right:w(e)}}))}));return c(r)?e.of({left:o,right:o}):r.value}},throwError:function(){return o}},N=Object(r.pipeable)(A),B=N.alt,D=N.ap,R=N.apFirst,L=N.apSecond,W=N.chain,U=N.chainFirst,z=N.duplicate,F=N.extend,G=N.filter,K=N.filterMap,Q=N.flatten,H=N.foldMap,J=N.map,V=N.partition,Y=N.partitionMap,$=N.reduce,Z=N.reduceRight,X=N.compact,ee=N.separate,te=N.fromEither},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return a})),n.d(t,"left",(function(){return o})),n.d(t,"right",(function(){return s})),n.d(t,"fromNullable",(function(){return u})),n.d(t,"toError",(function(){return c})),n.d(t,"tryCatch",(function(){return f})),n.d(t,"fold",(function(){return d})),n.d(t,"getShow",(function(){return l})),n.d(t,"getEq",(function(){return p})),n.d(t,"getSemigroup",(function(){return h})),n.d(t,"getApplySemigroup",(function(){return g})),n.d(t,"getApplyMonoid",(function(){return m})),n.d(t,"isLeft",(function(){return v})),n.d(t,"isRight",(function(){return _})),n.d(t,"swap",(function(){return y})),n.d(t,"orElse",(function(){return b})),n.d(t,"getOrElse",(function(){return w})),n.d(t,"getOrElseW",(function(){return k})),n.d(t,"elem",(function(){return S})),n.d(t,"exists",(function(){return P})),n.d(t,"parseJSON",(function(){return E})),n.d(t,"stringifyJSON",(function(){return I})),n.d(t,"getWitherable",(function(){return O})),n.d(t,"getValidation",(function(){return q})),n.d(t,"getValidationSemigroup",(function(){return C})),n.d(t,"getValidationMonoid",(function(){return M})),n.d(t,"either",(function(){return T})),n.d(t,"chainW",(function(){return $})),n.d(t,"alt",(function(){return j})),n.d(t,"ap",(function(){return A})),n.d(t,"apFirst",(function(){return N})),n.d(t,"apSecond",(function(){return B})),n.d(t,"bimap",(function(){return D})),n.d(t,"chain",(function(){return R})),n.d(t,"chainFirst",(function(){return L})),n.d(t,"duplicate",(function(){return W})),n.d(t,"extend",(function(){return U})),n.d(t,"flatten",(function(){return z})),n.d(t,"foldMap",(function(){return F})),n.d(t,"map",(function(){return G})),n.d(t,"mapLeft",(function(){return K})),n.d(t,"reduce",(function(){return Q})),n.d(t,"reduceRight",(function(){return H})),n.d(t,"fromOption",(function(){return J})),n.d(t,"fromPredicate",(function(){return V})),n.d(t,"filterOrElse",(function(){return Y}));var r=n(2),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a="Either";function o(e){return{_tag:"Left",left:e}}function s(e){return{_tag:"Right",right:e}}function u(e){return function(t){return null==t?o(e):s(t)}}function c(e){return e instanceof Error?e:new Error(String(e))}function f(e,t){try{return s(e())}catch(e){return o(t(e))}}function d(e,t){return function(n){return v(n)?e(n.left):t(n.right)}}function l(e,t){return{show:function(n){return v(n)?"left("+e.show(n.left)+")":"right("+t.show(n.right)+")"}}}function p(e,t){return{equals:function(n,r){return n===r||(v(n)?v(r)&&e.equals(n.left,r.left):_(r)&&t.equals(n.right,r.right))}}}function h(e){return{concat:function(t,n){return v(n)?t:v(t)?n:s(e.concat(t.right,n.right))}}}function g(e){return{concat:function(t,n){return v(t)?t:v(n)?n:s(e.concat(t.right,n.right))}}}function m(e){return i(i({},g(e)),{empty:s(e.empty)})}function v(e){switch(e._tag){case"Left":return!0;case"Right":return!1}}function _(e){return!v(e)}function y(e){return v(e)?s(e.left):o(e.right)}function b(e){return function(t){return v(t)?e(t.left):t}}function w(e){return function(t){return v(t)?e(t.left):t.right}}var k=w;function S(e){return function(t,n){return!v(n)&&e.equals(t,n.right)}}function P(e){return function(t){return!v(t)&&e(t.right)}}function E(e,t){return f((function(){return JSON.parse(e)}),t)}function I(e,t){return f((function(){return JSON.stringify(e)}),t)}function O(e){var t=o(e.empty),n=function(t){return v(t)?t:"None"===t.right._tag?o(e.empty):s(t.right.value)},r=function(e){return v(e)?{left:e,right:e}:v(e.right)?{left:s(e.right.left),right:t}:{left:t,right:s(e.right.right)}};return{URI:a,_E:void 0,map:T.map,compact:n,separate:r,filter:function(t,n){return v(t)||n(t.right)?t:o(e.empty)},filterMap:function(t,n){if(v(t))return t;var r=n(t.right);return"None"===r._tag?o(e.empty):s(r.value)},partition:function(e,n){return v(e)?{left:e,right:e}:n(e.right)?{left:t,right:s(e.right)}:{left:s(e.right),right:t}},partitionMap:function(e,n){if(v(e))return{left:e,right:e};var r=n(e.right);return v(r)?{left:s(r.left),right:t}:{left:t,right:s(r.right)}},traverse:T.traverse,sequence:T.sequence,reduce:T.reduce,foldMap:T.foldMap,reduceRight:T.reduceRight,wither:function(e){var t=T.traverse(e);return function(r,i){return e.map(t(r,i),n)}},wilt:function(e){var t=T.traverse(e);return function(n,i){return e.map(t(n,i),r)}}}}function q(e){return i(i({},T),{_E:void 0,ap:function(t,n){return v(t)?v(n)?o(e.concat(t.left,n.left)):t:v(n)?n:s(t.right(n.right))},alt:function(t,n){if(_(t))return t;var r=n();return v(r)?o(e.concat(t.left,r.left)):r}})}function C(e,t){return{concat:function(n,r){return v(n)?v(r)?o(e.concat(n.left,r.left)):n:v(r)?r:s(t.concat(n.right,r.right))}}}function M(e,t){return{concat:C(e,t).concat,empty:s(t.empty)}}var T={URI:a,map:function(e,t){return v(e)?e:s(t(e.right))},of:s,ap:function(e,t){return v(e)?e:v(t)?t:s(e.right(t.right))},chain:function(e,t){return v(e)?e:t(e.right)},reduce:function(e,t,n){return v(e)?t:n(t,e.right)},foldMap:function(e){return function(t,n){return v(t)?e.empty:n(t.right)}},reduceRight:function(e,t,n){return v(e)?t:n(e.right,t)},traverse:function(e){return function(t,n){return v(t)?e.of(o(t.left)):e.map(n(t.right),s)}},sequence:function(e){return function(t){return v(t)?e.of(o(t.left)):e.map(t.right,s)}},bimap:function(e,t,n){return v(e)?o(t(e.left)):s(n(e.right))},mapLeft:function(e,t){return v(e)?o(t(e.left)):e},alt:function(e,t){return v(e)?t():e},extend:function(e,t){return v(e)?e:s(t(e))},chainRec:function(e,t){return function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}(t(e),(function(e){return v(e)?s(o(e.left)):v(e.right)?o(t(e.right.left)):s(s(e.right.right))}))},throwError:o},x=Object(r.pipeable)(T),j=x.alt,A=x.ap,N=x.apFirst,B=x.apSecond,D=x.bimap,R=x.chain,L=x.chainFirst,W=x.duplicate,U=x.extend,z=x.flatten,F=x.foldMap,G=x.map,K=x.mapLeft,Q=x.reduce,H=x.reduceRight,J=x.fromOption,V=x.fromPredicate,Y=x.filterOrElse,$=R},function(e,t,n){"use strict";n.r(t),n.d(t,"pipe",(function(){return i})),n.d(t,"pipeable",(function(){return a}));var r=n(6);function i(e,t,n,r,i,a,o,s,u,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return i(r(n(t(e))));case 6:return a(i(r(n(t(e)))));case 7:return o(a(i(r(n(t(e))))));case 8:return s(o(a(i(r(n(t(e)))))));case 9:return u(s(o(a(i(r(n(t(e))))))));case 10:return c(u(s(o(a(i(r(n(t(e)))))))))}}function a(e){var t={};if(function(e){return"function"==typeof e.map}(e)){t.map=function(t){return function(n){return e.map(n,t)}}}if(function(e){return"function"==typeof e.contramap}(e)){t.contramap=function(t){return function(n){return e.contramap(n,t)}}}if(function(e){return"function"==typeof e.mapWithIndex}(e)){t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.ap}(e)){t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}}if(function(e){return"function"==typeof e.chain}(e)){t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,r.identity)}}if(function(e){return"function"==typeof e.bimap}(e)){t.bimap=function(t,n){return function(r){return e.bimap(r,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}}if(function(e){return"function"==typeof e.extend}(e)){t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,r.identity)}}if(function(e){return"function"==typeof e.reduce}(e)){t.reduce=function(t,n){return function(r){return e.reduce(r,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(r){return e.reduceRight(r,t,n)}}}if(function(e){return"function"==typeof e.reduceWithIndex}(e)){t.reduceWithIndex=function(t,n){return function(r){return e.reduceWithIndex(r,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(r){return e.reduceRightWithIndex(r,t,n)}}}if(function(e){return"function"==typeof e.alt}(e)){t.alt=function(t){return function(n){return e.alt(n,t)}}}if(function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)){t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}}if(function(e){return"function"==typeof e.filterWithIndex}(e)){t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}}if(function(e){return"function"==typeof e.promap}(e)){t.promap=function(t,n){return function(r){return e.promap(r,t,n)}}}if(function(e){return"function"==typeof e.compose}(e)){t.compose=function(t){return function(n){return e.compose(n,t)}}}if(function(e){return"function"==typeof e.throwError}(e)){t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(r){return t(r)?e.of(r):e.throwError(n(r))}},t.filterOrElse=function(t,n){return function(r){return e.chain(r,(function(r){return t(r)?e.of(r):e.throwError(n(r))}))}}}return t}},function(e,t,n){"use strict";var r=n(15).Promise,i=n(38).polyfill;t.Promise=r,t.polyfill=i},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.objectEntries=t.uuidv4=t.onPageUnload=t.numericStringToNumber=t.eqObject=t.forP=t.findIndex=t.poller=t.deferredPromise=t.hash=t.lens=t.filterByKey=t.swap=t.mergeObjects=void 0;var o=n(8),s=n(9);function u(e){return Object.keys(e).reduce((function(t,n){return a(t,[[n,e[n]]])}),[])}t.mergeObjects=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return r(r({},e),t)}),{})},t.swap=function(e){var t={};for(var n in e)t[e[n]]=n;return t},t.filterByKey=function(e,t){return Object.keys(e).filter(t).reduce((function(t,n){return t[n]=e[n],t}),{})},t.lens=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(e,t){return e?e[t]:void 0}),e)},t.hash=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t},t.deferredPromise=function(){var t,n;return{promise:new e((function(e,r){t=e,n=r})),reject:n,resolve:t}},t.poller=function(e,t,n){void 0===n&&(n=30);var r=0,i=!1;return function e(t,a,o){if(i||r>=n)return;var s=null;try{s=t()}catch(e){return}s?a():setTimeout((function(){r++,e(t,a,2*o)}),o)}(e,t,50),{cancel:function(){i=!0}}},t.findIndex=function(e,t){for(var n=-1,r=0;r<e.length;r++){var i=e[r];if(t(i)){n=e.indexOf(i);break}}return n},t.forP=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce((function(t,n){return e.resolve(t).then(n)}),n)}},t.eqObject=function(e){var t={equals:function(t,n){return t[0]===n[0]&&e.equals(t[1],n[1])}},n=s.getEq(t);return o.contramap((function(e){return u(e)}))(n)},t.numericStringToNumber=function(e){if("string"==typeof e){var t=+e;if(!isNaN(t))return t}return e},t.onPageUnload=function(e){var t=function(t){if(!n&&t)return n=!0,e()},n=!1;["blur","visibilitychange"].forEach((function(e){window.addEventListener(e,(function(){return t(document.hidden&&/Mobi|Android/i.test(navigator.userAgent))}))})),["beforeunload","pagehide"].forEach((function(e){window.addEventListener(e,(function(){return t(!0)}))}))},t.uuidv4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},t.objectEntries=u}).call(this,n(3).Promise)},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"URI",(function(){return a})),n.d(t,"never",(function(){return o})),n.d(t,"getSemigroup",(function(){return s})),n.d(t,"getMonoid",(function(){return u})),n.d(t,"getRaceMonoid",(function(){return c})),n.d(t,"delay",(function(){return f})),n.d(t,"fromIO",(function(){return d})),n.d(t,"of",(function(){return l})),n.d(t,"fromIOK",(function(){return p})),n.d(t,"chainIOK",(function(){return h})),n.d(t,"task",(function(){return g})),n.d(t,"taskSeq",(function(){return m})),n.d(t,"ap",(function(){return _})),n.d(t,"apFirst",(function(){return y})),n.d(t,"apSecond",(function(){return b})),n.d(t,"chain",(function(){return w})),n.d(t,"chainFirst",(function(){return k})),n.d(t,"flatten",(function(){return S})),n.d(t,"map",(function(){return P}));var r=n(2),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a="Task",o=function(){return new e((function(e){}))};function s(e){return{concat:function(t,n){return function(){return t().then((function(t){return n().then((function(n){return e.concat(t,n)}))}))}}}}function u(e){return{concat:s(e).concat,empty:g.of(e.empty)}}function c(){return{concat:function(t,n){return function(){return e.race([t(),n()])}},empty:o}}function f(t){return function(n){return function(){return new e((function(e){setTimeout((function(){n().then(e)}),t)}))}}}function d(t){return function(){return e.resolve(t())}}function l(t){return function(){return e.resolve(t)}}function p(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return d(e.apply(void 0,t))}}function h(e){return w(p(e))}var g={URI:a,map:function(e,t){return function(){return e().then(t)}},of:l,ap:function(t,n){return function(){return e.all([t(),n()]).then((function(e){return(0,e[0])(e[1])}))}},chain:function(e,t){return function(){return e().then((function(e){return t(e)()}))}},fromIO:d,fromTask:function(e){return e}},m=i(i({},g),{ap:function(e,t){return function(){return e().then((function(e){return t().then((function(t){return e(t)}))}))}}}),v=Object(r.pipeable)(g),_=v.ap,y=v.apFirst,b=v.apSecond,w=v.chain,k=v.chainFirst,S=v.flatten,P=v.map}.call(this,n(3).Promise)},function(e,t,n){"use strict";function r(e){return e}n.r(t),n.d(t,"identity",(function(){return r})),n.d(t,"unsafeCoerce",(function(){return i})),n.d(t,"not",(function(){return a})),n.d(t,"constant",(function(){return o})),n.d(t,"constTrue",(function(){return s})),n.d(t,"constFalse",(function(){return u})),n.d(t,"constNull",(function(){return c})),n.d(t,"constUndefined",(function(){return f})),n.d(t,"constVoid",(function(){return d})),n.d(t,"flip",(function(){return l})),n.d(t,"flow",(function(){return p})),n.d(t,"tuple",(function(){return h})),n.d(t,"increment",(function(){return g})),n.d(t,"decrement",(function(){return m})),n.d(t,"absurd",(function(){return v})),n.d(t,"tupled",(function(){return _})),n.d(t,"untupled",(function(){return y}));var i=r;function a(e){return function(t){return!e(t)}}function o(e){return function(){return e}}var s=function(){return!0},u=function(){return!1},c=function(){return null},f=function(){},d=function(){};function l(e){return function(t,n){return e(n,t)}}function p(e,t,n,r,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return i(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(o(a(i(r(n(t(e.apply(this,arguments)))))))))}}}function h(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function g(e){return e+1}function m(e){return e-1}function v(e){throw new Error("Called `absurd` function which should be uncallable")}function _(e){return function(t){return e.apply(void 0,t)}}function y(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}}},function(e,t,n){"use strict";function r(e){return"function"==typeof e}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=function(e){return r(e)||"object"==typeof e&&null!==e},t.isFunction=r,t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.now=i},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return i})),n.d(t,"fromEquals",(function(){return a})),n.d(t,"eqStrict",(function(){return o})),n.d(t,"strictEqual",(function(){return s})),n.d(t,"eqString",(function(){return u})),n.d(t,"eqNumber",(function(){return c})),n.d(t,"eqBoolean",(function(){return f})),n.d(t,"getStructEq",(function(){return d})),n.d(t,"getTupleEq",(function(){return l})),n.d(t,"eq",(function(){return p})),n.d(t,"contramap",(function(){return h})),n.d(t,"eqDate",(function(){return g})),n.d(t,"getMonoid",(function(){return v}));var r=n(2),i="Eq";function a(e){return{equals:function(t,n){return t===n||e(t,n)}}}var o={equals:s};function s(e,t){return e===t}var u=o,c=o,f=o;function d(e){return a((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))}function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a((function(t,n){return e.every((function(e,r){return e.equals(t[r],n[r])}))}))}var p={URI:i,contramap:function(e,t){return a((function(n,r){return e.equals(t(n),t(r))}))}},h=Object(r.pipeable)(p).contramap,g=p.contramap(c,(function(e){return e.valueOf()})),m={equals:function(){return!0}};function v(){return{concat:function(e,t){return a((function(n,r){return e.equals(n,r)&&t.equals(n,r)}))},empty:m}}},function(e,t,n){"use strict";n.r(t),n.d(t,"URI",(function(){return N})),n.d(t,"getShow",(function(){return B})),n.d(t,"getMonoid",(function(){return D})),n.d(t,"getEq",(function(){return R})),n.d(t,"getOrd",(function(){return L})),n.d(t,"empty",(function(){return W})),n.d(t,"makeBy",(function(){return U})),n.d(t,"range",(function(){return z})),n.d(t,"replicate",(function(){return F})),n.d(t,"flatten",(function(){return G})),n.d(t,"foldLeft",(function(){return K})),n.d(t,"foldRight",(function(){return Q})),n.d(t,"scanLeft",(function(){return H})),n.d(t,"scanRight",(function(){return J})),n.d(t,"isEmpty",(function(){return V})),n.d(t,"isNonEmpty",(function(){return Y})),n.d(t,"isOutOfBound",(function(){return $})),n.d(t,"lookup",(function(){return Z})),n.d(t,"cons",(function(){return X})),n.d(t,"snoc",(function(){return ee})),n.d(t,"head",(function(){return te})),n.d(t,"last",(function(){return ne})),n.d(t,"tail",(function(){return re})),n.d(t,"init",(function(){return ie})),n.d(t,"takeLeft",(function(){return ae})),n.d(t,"takeRight",(function(){return oe})),n.d(t,"takeLeftWhile",(function(){return se})),n.d(t,"spanLeft",(function(){return ue})),n.d(t,"dropLeft",(function(){return ce})),n.d(t,"dropRight",(function(){return fe})),n.d(t,"dropLeftWhile",(function(){return de})),n.d(t,"findIndex",(function(){return le})),n.d(t,"findFirst",(function(){return pe})),n.d(t,"findFirstMap",(function(){return he})),n.d(t,"findLast",(function(){return ge})),n.d(t,"findLastMap",(function(){return me})),n.d(t,"findLastIndex",(function(){return ve})),n.d(t,"copy",(function(){return _e})),n.d(t,"unsafeInsertAt",(function(){return ye})),n.d(t,"insertAt",(function(){return be})),n.d(t,"unsafeUpdateAt",(function(){return we})),n.d(t,"updateAt",(function(){return ke})),n.d(t,"unsafeDeleteAt",(function(){return Se})),n.d(t,"deleteAt",(function(){return Pe})),n.d(t,"modifyAt",(function(){return Ee})),n.d(t,"reverse",(function(){return Ie})),n.d(t,"rights",(function(){return Oe})),n.d(t,"lefts",(function(){return qe})),n.d(t,"sort",(function(){return Ce})),n.d(t,"zipWith",(function(){return Me})),n.d(t,"zip",(function(){return Te})),n.d(t,"unzip",(function(){return xe})),n.d(t,"rotate",(function(){return je})),n.d(t,"elem",(function(){return Ae})),n.d(t,"uniq",(function(){return Ne})),n.d(t,"sortBy",(function(){return Be})),n.d(t,"chop",(function(){return De})),n.d(t,"splitAt",(function(){return Re})),n.d(t,"chunksOf",(function(){return Le})),n.d(t,"comprehension",(function(){return We})),n.d(t,"union",(function(){return Ue})),n.d(t,"intersection",(function(){return ze})),n.d(t,"difference",(function(){return Fe})),n.d(t,"of",(function(){return Ge})),n.d(t,"array",(function(){return Ke})),n.d(t,"alt",(function(){return He})),n.d(t,"ap",(function(){return Je})),n.d(t,"apFirst",(function(){return Ve})),n.d(t,"apSecond",(function(){return Ye})),n.d(t,"chain",(function(){return $e})),n.d(t,"chainFirst",(function(){return Ze})),n.d(t,"duplicate",(function(){return Xe})),n.d(t,"extend",(function(){return et})),n.d(t,"filter",(function(){return tt})),n.d(t,"filterMap",(function(){return nt})),n.d(t,"filterMapWithIndex",(function(){return rt})),n.d(t,"filterWithIndex",(function(){return it})),n.d(t,"foldMap",(function(){return at})),n.d(t,"foldMapWithIndex",(function(){return ot})),n.d(t,"map",(function(){return st})),n.d(t,"mapWithIndex",(function(){return ut})),n.d(t,"partition",(function(){return ct})),n.d(t,"partitionMap",(function(){return ft})),n.d(t,"partitionMapWithIndex",(function(){return dt})),n.d(t,"partitionWithIndex",(function(){return lt})),n.d(t,"reduce",(function(){return pt})),n.d(t,"reduceRight",(function(){return ht})),n.d(t,"reduceRightWithIndex",(function(){return gt})),n.d(t,"reduceWithIndex",(function(){return mt})),n.d(t,"compact",(function(){return vt})),n.d(t,"separate",(function(){return _t}));var r=n(2),i=n(6),a=n(0);var o={concat:function(e,t){return 0!==e?e:t},empty:0};var s=function(e,t){return e<t?-1:e>t?1:0};function u(e,t){return e===t}var c={equals:u,compare:s};function f(e){var t=function(t,n){return t===n?0:e(t,n)};return{equals:function(e,n){return 0===t(e,n)},compare:t}}var d={concat:{concat:function(e,t){return f((function(n,r){return o.concat(e.compare(n,r),t.compare(n,r))}))}}.concat,empty:f((function(){return 0}))};var l={URI:"Ord",contramap:function(e,t){return f((function(n,r){return e.compare(t(n),t(r))}))}},p=(Object(r.pipeable)(l).contramap,l.contramap(c,(function(e){return e.valueOf()})),function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,i++)r[i]=a[o];return r});var h=function(e,t){var n=e.length;if(0===n)return t;var r=t.length;if(0===r)return e;for(var i=Array(n+r),a=0;a<n;a++)i[a]=e[a];for(a=0;a<r;a++)i[a+n]=t[a];return i};var g=[];function m(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n}function v(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r].length;var i=Array(t),a=0;for(r=0;r<n;r++){for(var o=e[r],s=o.length,u=0;u<s;u++)i[u+a]=o[u];a+=s}return i}function _(e){return 0===e.length}function y(e){return e.length>0}function b(e,t){return e<0||e>=t.length}function w(e,t){return b(e,t)?a.none:Object(a.some)(t[e])}function k(e,t){for(var n=e.length,r=Array(n+1),i=0;i<n;i++)r[i]=e[i];return r[n]=t,r}var S=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function P(e,t,n){var r=p(n);return r.splice(e,0,t),r}function E(e,t,n){if(n[e]===t)return n;var r=p(n);return r[e]=t,r}function I(e,t){var n=p(t);return n.splice(e,1),n}function O(e){return function(t){return p(t).sort(e.compare)}}function q(e,t,n){for(var r=[],i=Math.min(e.length,t.length),a=0;a<i;a++)r[a]=n(e[a],t[a]);return r}function C(e){return function(t,n){for(var r,i=0,a=n.length;i<a;i++)if(r=n[i],e.equals(r,t))return!0;return!1}}function M(e){return function(t){for(var n=[],r=t;y(r);){var i=e(r),a=i[0],o=i[1];n.push(a),r=o}return n}}function T(e){return function(t){return[t.slice(0,e),t.slice(e)]}}var x=function(e){return[e]},j={URI:"ReadonlyArray",map:function(e,t){return e.map((function(e){return t(e)}))},mapWithIndex:function(e,t){return e.map((function(e,n){return t(n,e)}))},compact:function(e){return j.filterMap(e,i.identity)},separate:function(e){for(var t=[],n=[],r=0,i=e;r<i.length;r++){var a=i[r];"Left"===a._tag?t.push(a.left):n.push(a.right)}return{left:t,right:n}},filter:function(e,t){return e.filter(t)},filterMap:function(e,t){return j.filterMapWithIndex(e,(function(e,n){return t(n)}))},partition:function(e,t){return j.partitionWithIndex(e,(function(e,n){return t(n)}))},partitionMap:function(e,t){return j.partitionMapWithIndex(e,(function(e,n){return t(n)}))},of:x,ap:function(e,t){return v(j.map(e,(function(e){return j.map(t,e)})))},chain:function(e,t){for(var n=0,r=e.length,i=new Array(r),a=0;a<r;a++){n+=(u=t(e[a])).length,i[a]=u}var o=Array(n),s=0;for(a=0;a<r;a++){for(var u,c=(u=i[a]).length,f=0;f<c;f++)o[f+s]=u[f];s+=c}return o},reduce:function(e,t,n){return j.reduceWithIndex(e,t,(function(e,t,r){return n(t,r)}))},foldMap:function(e){var t=j.foldMapWithIndex(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},reduceRight:function(e,t,n){return j.reduceRightWithIndex(e,t,(function(e,t,r){return n(t,r)}))},unfold:function(e,t){for(var n=[],r=e;;){var i=t(r);if(!Object(a.isSome)(i))break;var o=i.value,s=o[0],u=o[1];n.push(s),r=u}return n},traverse:function(e){var t=j.traverseWithIndex(e);return function(e,n){return t(e,(function(e,t){return n(t)}))}},sequence:function(e){return function(t){return j.reduce(t,e.of(j.zero()),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return k(e,t)}})),n)}))}},zero:function(){return g},alt:function(e,t){return h(e,t())},extend:function(e,t){return e.map((function(e,n,r){return t(r.slice(n))}))},wither:function(e){var t=j.traverse(e);return function(n,r){return e.map(t(n,r),j.compact)}},wilt:function(e){var t=j.traverse(e);return function(n,r){return e.map(t(n,r),j.separate)}},reduceWithIndex:function(e,t,n){for(var r=e.length,i=t,a=0;a<r;a++)i=n(a,i,e[a]);return i},foldMapWithIndex:function(e){return function(t,n){return t.reduce((function(t,r,i){return e.concat(t,n(i,r))}),e.empty)}},reduceRightWithIndex:function(e,t,n){return e.reduceRight((function(e,t,r){return n(r,t,e)}),t)},traverseWithIndex:function(e){return function(t,n){return j.reduceWithIndex(t,e.of(j.zero()),(function(t,r,i){return e.ap(e.map(r,(function(e){return function(t){return k(e,t)}})),n(t,i))}))}},partitionMapWithIndex:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var a=t(i,e[i]);"Left"===a._tag?n.push(a.left):r.push(a.right)}return{left:n,right:r}},partitionWithIndex:function(e,t){for(var n=[],r=[],i=0;i<e.length;i++){var a=e[i];t(i,a)?r.push(a):n.push(a)}return{left:n,right:r}},filterMapWithIndex:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=t(r,e[r]);Object(a.isSome)(i)&&n.push(i.value)}return n},filterWithIndex:function(e,t){return e.filter((function(e,n){return t(n,e)}))}},A=Object(r.pipeable)(j),N=(A.alt,A.ap,A.apFirst,A.apSecond,A.chain,A.chainFirst,A.duplicate,A.extend,A.filter,A.filterMap,A.filterMapWithIndex,A.filterWithIndex,A.foldMap,A.foldMapWithIndex,A.map,A.mapWithIndex,A.partition,A.partitionMap,A.partitionMapWithIndex,A.partitionWithIndex,A.reduce,A.reduceRight,A.reduceRightWithIndex,A.reduceWithIndex,A.compact,A.separate,"Array"),B=function(e){return{show:function(t){return"["+t.map(e.show).join(", ")+"]"}}},D=function(){return{concat:h,empty:g}},R=function(e){return{equals:function(t,n){return t===n||t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}}},L=function(e){return f((function(t,n){for(var r=t.length,i=n.length,a=Math.min(r,i),o=0;o<a;o++){var s=e.compare(t[o],n[o]);if(0!==s)return s}return c.compare(r,i)}))},W=[],U=m,z=function(e,t){return m(t-e+1,(function(t){return e+t}))},F=function(e,t){return m(e,(function(){return t}))},G=v,K=function(e,t){return function(n){return _(n)?e():t(n[0],n.slice(1))}},Q=function(e,t){return function(n){return _(n)?e():t(n.slice(0,n.length-1),n[n.length-1])}},H=function(e,t){return function(n){var r=n.length,i=new Array(r+1);i[0]=e;for(var a=0;a<r;a++)i[a+1]=t(i[a],n[a]);return i}},J=function(e,t){return function(n){var r=n.length,i=new Array(r+1);i[r]=e;for(var a=r-1;a>=0;a--)i[a]=t(n[a],i[a+1]);return i}},V=_,Y=y,$=b,Z=w,X=function(e,t){for(var n=t.length,r=Array(n+1),i=0;i<n;i++)r[i+1]=t[i];return r[0]=e,r},ee=k,te=function(e){return _(e)?a.none:Object(a.some)(e[0])},ne=function(e){return w(e.length-1,e)},re=function(e){return _(e)?a.none:Object(a.some)(e.slice(1))},ie=function(e){var t=e.length;return 0===t?a.none:Object(a.some)(e.slice(0,t-1))},ae=function(e){return function(t){return t.slice(0,e)}},oe=function(e){return function(t){return 0===e?g:t.slice(-e)}};function se(e){return function(e){return function(t){for(var n=S(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];return r}}(e)}function ue(e){return function(e){return function(t){for(var n=S(t,e),r=Array(n),i=0;i<n;i++)r[i]=t[i];var a=t.length,o=Array(a-n);for(i=n;i<a;i++)o[i-n]=t[i];return{init:r,rest:o}}}(e)}var ce=function(e){return function(t){return t.slice(e,t.length)}},fe=function(e){return function(t){return t.slice(0,t.length-e)}},de=function(e){return function(t){for(var n=S(t,e),r=t.length,i=Array(r-n),a=n;a<r;a++)i[a-n]=t[a];return i}},le=function(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(a.some)(r);return a.none}};function pe(e){return function(e){return function(t){for(var n=t.length,r=0;r<n;r++)if(e(t[r]))return Object(a.some)(t[r]);return a.none}}(e)}var he=function(e){return function(t){for(var n=t.length,r=0;r<n;r++){var i=e(t[r]);if(Object(a.isSome)(i))return i}return a.none}};function ge(e){return function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(a.some)(t[n]);return a.none}}(e)}var me=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(Object(a.isSome)(r))return r}return a.none}},ve=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return Object(a.some)(n);return a.none}},_e=function(e){for(var t=e.length,n=Array(t),r=0;r<t;r++)n[r]=e[r];return n},ye=P,be=function(e,t){return function(n){return e<0||e>n.length?a.none:Object(a.some)(P(e,t,n))}},we=E,ke=function(e,t){return function(n){return b(e,n)?a.none:Object(a.some)(E(e,t,n))}},Se=I,Pe=function(e){return function(t){return b(e,t)?a.none:Object(a.some)(I(e,t))}},Ee=function(e,t){return function(n){return b(e,n)?a.none:Object(a.some)(E(e,t(n[e]),n))}},Ie=function(e){return p(e).reverse()},Oe=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Right"===i._tag&&t.push(i.right)}return t},qe=function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];"Left"===i._tag&&t.push(i.left)}return t},Ce=O,Me=q,Te=function(e,t){return q(e,t,(function(e,t){return[e,t]}))},xe=function(e){for(var t=[],n=[],r=0;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]},je=function e(t){return function(n){var r=n.length;return 0===t||r<=1||r===Math.abs(t)?n:t<0?e(r+t)(n):n.slice(-t).concat(n.slice(0,r-t))}},Ae=C,Ne=function(e){var t=C(e);return function(e){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i];t(a,n)||n.push(a)}return r===n.length?e:n}},Be=function(e){var t=d;return O(e.reduce(t.concat,t.empty))},De=M,Re=T,Le=function(e){var t=M(T(e));return function(n){return 0===n.length?g:b(e-1,n)?[n]:t(n)}};function We(e,t,n){return void 0===n&&(n=function(){return!0}),function(e,t,n){void 0===n&&(n=function(){return!0});var r=function(e,i){return 0===i.length?n.apply(void 0,e)?[t.apply(void 0,e)]:g:j.chain(i[0],(function(t){return r(k(e,t),i.slice(1))}))};return r(g,e)}(e,t,n)}var Ue=function(e){var t=C(e);return function(e,n){return h(e,n.filter((function(n){return!t(n,e)})))}},ze=function(e){var t=C(e);return function(e,n){return e.filter((function(e){return t(e,n)}))}},Fe=function(e){var t=C(e);return function(e,n){return e.filter((function(e){return!t(e,n)}))}},Ge=x,Ke={URI:N,map:j.map,mapWithIndex:j.mapWithIndex,compact:j.compact,separate:j.separate,filter:j.filter,filterMap:j.filterMap,partition:j.partition,partitionMap:j.partitionMap,of:Ge,ap:j.ap,chain:j.chain,reduce:j.reduce,foldMap:j.foldMap,reduceRight:j.reduceRight,unfold:j.unfold,traverse:j.traverse,sequence:j.sequence,zero:j.zero,alt:j.alt,extend:j.extend,wither:j.wither,wilt:j.wilt,reduceWithIndex:j.reduceWithIndex,foldMapWithIndex:j.foldMapWithIndex,reduceRightWithIndex:j.reduceRightWithIndex,traverseWithIndex:j.traverseWithIndex,partitionMapWithIndex:j.partitionMapWithIndex,partitionWithIndex:j.partitionWithIndex,filterMapWithIndex:j.filterMapWithIndex,filterWithIndex:j.filterWithIndex},Qe=Object(r.pipeable)(Ke),He=Qe.alt,Je=Qe.ap,Ve=Qe.apFirst,Ye=Qe.apSecond,$e=Qe.chain,Ze=Qe.chainFirst,Xe=Qe.duplicate,et=Qe.extend,tt=Qe.filter,nt=Qe.filterMap,rt=Qe.filterMapWithIndex,it=Qe.filterWithIndex,at=Qe.foldMap,ot=Qe.foldMapWithIndex,st=Qe.map,ut=Qe.mapWithIndex,ct=Qe.partition,ft=Qe.partitionMap,dt=Qe.partitionMapWithIndex,lt=Qe.partitionWithIndex,pt=Qe.reduce,ht=Qe.reduceRight,gt=Qe.reduceRightWithIndex,mt=Qe.reduceWithIndex,vt=Qe.compact,_t=Qe.separate},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isFullPermutiveEventJson=t.isEventTrackError=t.deserializeMinimalEvent=t.serializeEvent=t.deserializeEvent=void 0,t.deserializeEvent=function(e){return r({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{}},i(e))},t.serializeEvent=function(e){return r({id:e.id||null,name:e.name,time:(a(e.time)?e.time:new Date).toISOString(),properties:e.properties||{}},i(e))},t.deserializeMinimalEvent=function(e,t){return r({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties},i(t))},t.isEventTrackError=function(e){return void 0!==e.request_id},t.isFullPermutiveEventJson=function(e){return void 0!==e.properties};var i=function(e){return r(r({},e.session_id?{session_id:e.session_id}:{}),e.view_id?{view_id:e.view_id}:{})},a=function(e){return isFinite(e)&&e instanceof Date}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){return i(i({},Object(r.a)(e,t)),{of:function(n){return e.of(t.of(n))},ap:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.ap(e,n)}})),r)}})}},function(e,t,n){"use strict";function r(e,t){return{map:function(n,r){return e.map(n,(function(e){return t.map(e,r)}))}}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"URI",(function(){return d})),n.d(t,"left",(function(){return l})),n.d(t,"right",(function(){return p})),n.d(t,"rightIO",(function(){return h})),n.d(t,"leftIO",(function(){return g})),n.d(t,"rightTask",(function(){return m})),n.d(t,"leftTask",(function(){return v})),n.d(t,"fromIOEither",(function(){return _})),n.d(t,"fold",(function(){return y})),n.d(t,"getOrElse",(function(){return b})),n.d(t,"getOrElseW",(function(){return w})),n.d(t,"orElse",(function(){return k})),n.d(t,"swap",(function(){return S})),n.d(t,"getSemigroup",(function(){return P})),n.d(t,"getApplySemigroup",(function(){return E})),n.d(t,"getApplyMonoid",(function(){return I})),n.d(t,"tryCatch",(function(){return O})),n.d(t,"bracket",(function(){return q})),n.d(t,"taskify",(function(){return C})),n.d(t,"getTaskValidation",(function(){return M})),n.d(t,"getFilterable",(function(){return T})),n.d(t,"fromEitherK",(function(){return x})),n.d(t,"chainEitherK",(function(){return j})),n.d(t,"fromIOEitherK",(function(){return A})),n.d(t,"chainIOEitherK",(function(){return N})),n.d(t,"tryCatchK",(function(){return B})),n.d(t,"taskEither",(function(){return D})),n.d(t,"taskEitherSeq",(function(){return R})),n.d(t,"chainW",(function(){return ee})),n.d(t,"alt",(function(){return W})),n.d(t,"ap",(function(){return U})),n.d(t,"apFirst",(function(){return z})),n.d(t,"apSecond",(function(){return F})),n.d(t,"bimap",(function(){return G})),n.d(t,"chain",(function(){return K})),n.d(t,"chainFirst",(function(){return Q})),n.d(t,"flatten",(function(){return H})),n.d(t,"map",(function(){return J})),n.d(t,"mapLeft",(function(){return V})),n.d(t,"fromEither",(function(){return Y})),n.d(t,"fromOption",(function(){return $})),n.d(t,"fromPredicate",(function(){return Z})),n.d(t,"filterOrElse",(function(){return X}));var r=n(1),i=n(27),a=n(29),o=n(2),s=n(5),u=n(28),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=Object(i.a)(s.task),d="TaskEither",l=f.left,p=f.of;function h(e){return m(s.task.fromIO(e))}function g(e){return v(s.task.fromIO(e))}var m=f.rightM,v=f.leftM,_=s.task.fromIO;function y(e,t){return function(n){return f.fold(n,e,t)}}function b(e){return function(t){return f.getOrElse(t,e)}}var w=b;function k(e){return function(t){return f.orElse(t,e)}}var S=f.swap;function P(e){return Object(s.getSemigroup)(r.getSemigroup(e))}function E(e){return Object(s.getSemigroup)(r.getApplySemigroup(e))}function I(e){return{concat:E(e).concat,empty:p(e.empty)}}function O(e,t){return function(){return e().then(r.right,(function(e){return r.left(t(e))}))}}function q(e,t,n){return f.chain(e,(function(e){return f.chain(s.task.map(t(e),r.right),(function(t){return f.chain(n(e,t),(function(){return r.isLeft(t)?f.left(t.left):f.of(t.right)}))}))}))}function C(t){return function(){var n=Array.prototype.slice.call(arguments);return function(){return new e((function(e){t.apply(null,n.concat((function(t,n){return e(null!=t?r.left(t):r.right(n))})))}))}}}function M(e){var t=Object(u.a)(e,s.task);return c(c({_E:void 0},D),t)}function T(e){var t=r.getWitherable(e);return c({URI:d,_E:void 0},Object(a.a)(s.task,t))}function x(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Y(e.apply(void 0,t))}}function j(e){return K(x(e))}function A(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return _(e.apply(void 0,t))}}function N(e){return K(A(e))}function B(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return O((function(){return e.apply(void 0,n)}),t)}}var D={URI:d,bimap:f.bimap,mapLeft:f.mapLeft,map:f.map,of:f.of,ap:f.ap,chain:f.chain,alt:f.alt,fromIO:h,fromTask:m,throwError:l},R=c(c({},D),{ap:function(e,t){return f.chain(e,(function(e){return f.map(t,e)}))}}),L=Object(o.pipeable)(D),W=L.alt,U=L.ap,z=L.apFirst,F=L.apSecond,G=L.bimap,K=L.chain,Q=L.chainFirst,H=L.flatten,J=L.map,V=L.mapLeft,Y=L.fromEither,$=L.fromOption,Z=L.fromPredicate,X=L.filterOrElse,ee=K}.call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.hasBrokenIdentity=t.PermutiveIdentities=void 0;var r=n(9),i=n(8),a=function(){function t(e,t){this._internals=e,this.network=t,this.identities=this._internals.state.getPermutiveData("identities")||{},this.currentAliases=this._internals.state.getPermutiveData("aliases")||{},this.providers={}}return t.getAliasesFromIdentifyArg=function(e){if("string"!=typeof e&&"object"!=typeof e||null===e||""===e)throw new Error("Identify must be passed a non-empty string or list of aliases, value passed was '"+e+"'");return"string"==typeof e?[{id:e,tag:"default"}]:e},t.prototype.setIdentity=function(e,t,n){void 0===n&&(n=86400),this.identities[e]={value:t,expiry:Date.now()+Math.floor(1e3*n)},this._internals.state.setPermutiveData("identities",this.identities)},t.prototype.getIdentity=function(e){return{defined:e in this.identities,value:e in this.identities?this.identities[e].value:void 0}},t.prototype.getIdentities=function(e){var t=this;return void 0===e&&(e=!1),Object.keys(this.identities).reduce((function(n,r){var i=t.getIdentity(r).value;return void 0!==i&&(e&&!t.getProvider(r).usedForThirdPartyData()||(n[r]=i)),n}),{})},t.prototype.hasExpired=function(e){return!(e in this.identities)||Date.now()>=this.identities[e].expiry},t.prototype.registerProvider=function(e){this.providers[e.getTag()]=e},t.prototype.getProvider=function(e){return e in this.providers?this.providers[e]:(this.network.error("Identity provider "+e+" is not registered.",this._internals.state.userId),null)},t.prototype.retrieveIdentity=function(t){var n=this,r=this.getProvider(t);return null===r?e.resolve(void 0):r.getId().then((function(e){var t=void 0===e?"sdk_third_party_identity_missing_count":"sdk_third_party_identity_present_count";return n._internals.metrics.track({name:t,value:1,labels:{identity_tag:r.getTag()}}),n.setIdentity(r.getTag(),e,r.getTtlInSeconds()),e}))},t.prototype.retrieveAllIdentities=function(){var t=this,n=this._internals.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),r=[],i=function(n){if(!a.providers.hasOwnProperty(n))return"continue";var i=a.getIdentity(n),o=!i.defined||a.hasExpired(n)?a.retrieveIdentity(n):e.resolve(i.value);o.then((function(e){return void 0!==e?t._internals.api.identify([{id:e,tag:n}]):null})),r.push(o)},a=this;for(var o in this.providers)i(o);return e.all(r).then((function(e){return t._internals.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",n),e}))},t.prototype.addAlias=function(e,t){this.currentAliases[t]=e},t.prototype.removeAliasByTag=function(e){delete this.currentAliases[e]},t.prototype.storeAliases=function(e){this._internals.state.setPermutiveData("aliases",e)},t.prototype.convertAliases=function(e){var t=this,n={default:0},r=function(e){return t._internals.identities.getIdentity(e).defined?e in n?n[e]+1:1:0};return Object.keys(e).map((function(t){return{id:e[t],tag:t,priority:r(t)}}))},t}();t.PermutiveIdentities=a,t.hasBrokenIdentity=function(e,t,n,a){var s={"e43c8a90-d17b-4790-bfda-81b069b3b8c2":function(e,t,n){return["thestudentroom.co.uk"].some((function(e){return n.indexOf(e)>-1}))&&r.intersection(i.eqString)(t,["tsr-"]).length>0},"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":function(e,t){return!!o[e]||r.intersection(i.eqString)(t,["(null)"]).length>0}}[e];return!!s&&s(a,t,n)};var o={}}).call(this,n(3).Promise)},function(e,t,n){"use strict";var r=n(16).config,i=(n(16).configure,n(7).objectOrFunction),a=n(7).isFunction,o=(n(7).now,n(31).cast),s=n(32).all,u=n(33).race,c=n(34).resolve,f=n(35).reject,d=n(36).asap;function l(e){if(!a(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],function(e,t){function n(e){w(t,e)}try{e((function(e){y(t,e)}),n)}catch(e){n(e)}}(e,this)}function p(e,t,n,r){var i,o,s,u,c=a(n);if(c)try{i=n(r),s=!0}catch(e){u=!0,o=e}else i=r,s=!0;_(t,i)||(c&&s?y(t,i):u?w(t,o):e===h?y(t,i):e===g&&w(t,i))}r.async=d;var h=1,g=2;function m(e,t,n,r){var i=e._subscribers,a=i.length;i[a]=t,i[a+h]=n,i[a+g]=r}function v(e,t){for(var n=e._subscribers,r=e._detail,i=0;i<n.length;i+=3)p(t,n[i],n[i+t],r);e._subscribers=null}function _(e,t){var n,r=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(i(t)&&(r=t.then,a(r)))return r.call(t,(function(r){if(n)return!0;n=!0,t!==r?y(e,r):b(e,r)}),(function(t){if(n)return!0;n=!0,w(e,t)})),!0}catch(t){return n||w(e,t),!0}return!1}function y(e,t){e===t?b(e,t):_(e,t)||b(e,t)}function b(e,t){void 0===e._state&&(e._state=0,e._detail=t,r.async(k,e))}function w(e,t){void 0===e._state&&(e._state=0,e._detail=t,r.async(S,e))}function k(e){v(e,e._state=h)}function S(e){v(e,e._state=g)}l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var n=this,i=new this.constructor((function(){}));if(this._state){var a=arguments;r.async((function(){p(n._state,i,a[n._state-1],n._detail)}))}else m(this,i,e,t);return i},catch:function(e){return this.then(null,e)}},l.all=s,l.cast=o,l.race=u,l.resolve=c,l.reject=f,t.Promise=l},function(e,t,n){"use strict";var r={instrument:!1};t.config=r,t.configure=function(e,t){if(2!==arguments.length)return r[e];r[e]=t}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveEventsCache=t.EVENTS_CACHE_KEY=void 0;var r=n(10),i=n(1),a=n(0),o=n(9),s=n(8),u=n(43),c=n(2),f=n(48),d=n(6);t.EVENTS_CACHE_KEY="permutive-events-cache";var l=function(){function n(t,n){this.state=t,this._internals=n,this.EVENTS_CACHE_OBJECT_STORE="events",this.CRYPTO_KEY_OBJECT_STORE="keys",this.CRYPTO_KEY_OBJECT_KEY="events",this.eventPutQueue=e.resolve(),this.eventsCache=[],this.eventCacheSizeInBytes=0,this.lastRefreshed=new Date(this.state.getPermutiveData("last_refresh_time")||0),this.eventStore=new u.EventsCacheStore(this._internals,new f.AESCrypto,"f234822c-0aae-41ce-8843-23538710f825",this.EVENTS_CACHE_OBJECT_STORE+"_"+this.state.userId,this.CRYPTO_KEY_OBJECT_STORE+"_"+this.state.userId,this.CRYPTO_KEY_OBJECT_KEY,2)}return n.prototype.all=function(){return this.eventsCache},n.prototype.addEventIfUnseen=function(e,t,n){var r=this;void 0===t&&(t=!1),void 0===n&&(n=!0);var i=s.contramap((function(e){return e.id}))(s.eqString),u=function(e,t){return o.foldRight((function(){return!1}),(function(e,n){switch(!0){case i.equals(t,n):return!0;case n.time.getTime()<t.time.getTime():return!1;default:return u(e,t)}}))(e)};return!t||!u(this.eventsCache,e)?c.pipe(e,(function(e){return r.eventsCache.push(e)}),(function(e){return n?r.flush():d.constVoid()}),(function(t){return a.some(e)})):a.none},n.prototype.loadFromDisk=function(){var n=this,s=[];return this.eventStore.migrateIfRequired()().then(i.fold((function(e){return n._internals.network.error("Failed to migrate events cache. Got "+JSON.stringify(e)),n.reset().then((function(e){return s}))}),(function(){var u=n._internals.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{});return n.eventStore.get(t.EVENTS_CACHE_KEY)().then((function(t){n._internals.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",u);var f=a.fold((function(){return e.resolve(s)}),(function(t){return c.pipe(n.eventCacheSizeInBytes=2*JSON.stringify(t).length,(function(e){n._internals.metrics.track({name:"sdk_events_cache_byte_total",value:n.eventCacheSizeInBytes,labels:{}}),n._internals.metrics.track({name:"sdk_events_cache_size_total",value:t.length,labels:{}})}),(function(e){return t.map(r.deserializeEvent)}),(function(t){return e.resolve(o.compact(t.map((function(e){return n.addEventIfUnseen(e,!1,!1)}))))}))}));return i.fold((function(e){return n._internals.network.error("Error fetching data from store. Got "+e),n.reset().then((function(e){return s}))}),f)(t)}))})))},n.prototype.getUnseenEvents=function(e){var t=e||this.lastRefreshed;return this._internals.log("Refreshing events cache from: ",t),this._internals.api.events(this._internals.state.userId,{from:t})},n.prototype.processUnseenEvents=function(e){var t=this;this._internals.log("Got events from API",e);var n=a.fold((function(){return new Date}),(function(e){return new Date(e.time)}))(o.last(e));n.setMilliseconds(n.getMilliseconds()+1),this.storeRefreshTime(n);var i=d.flow(r.deserializeEvent,(function(e){return t.addEventIfUnseen(e,!0,!0)}));return c.pipe(e,o.map(i),o.compact)},n.prototype.reset=function(){var e=this;return this._internals.log("Resetting Events Cache"),this.eventsCache=[],this.eventCacheSizeInBytes=0,this.lastRefreshed=new Date(0),this.eventStore.deleteStore()().then((function(){e.eventStore=new u.EventsCacheStore(e._internals,new f.AESCrypto,"f234822c-0aae-41ce-8843-23538710f825",e.EVENTS_CACHE_OBJECT_STORE+"_"+e.state.userId,e.CRYPTO_KEY_OBJECT_STORE+"_"+e.state.userId,e.CRYPTO_KEY_OBJECT_KEY,2)}))},n.prototype.flush=function(){for(var e=this,n=JSON.stringify(this.eventsCache),i=1;n.length>this._internals.config.eventsCacheLimitBytes/2;)this.eventsCache.splice(0,i),i*=2,n=JSON.stringify(this.eventsCache);this._internals.log("Writing cache (#e)",this.eventsCache.length),this.eventCacheSizeInBytes=2*n.length,this.eventPutQueue=this.eventPutQueue.then((function(n){return e.eventStore.put(e.eventsCache.map(r.serializeEvent),t.EVENTS_CACHE_KEY)().then(d.constVoid)}))},n.prototype.storeRefreshTime=function(e){this.lastRefreshed=e,this.state.setPermutiveData("last_refresh_time",e.toISOString())},n.prototype.getStateSizeInBytes=function(){return this.eventCacheSizeInBytes},n}();t.PermutiveEventsCache=l}).call(this,n(3).Promise)},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalEnricher=t.SingleEnricher=void 0;var a=function(){};t.SingleEnricher=a;var o=function(){function e(){this.replacementMap={}}return e.prototype.register=function(e){this.replacementMap=r(r({},this.replacementMap),e.replacementMap)},e.prototype.enrich=function(e){for(var t=[{},!0],n=0;n<Object.keys(e[0]).length;n++){var r=Object.keys(e[0])[n],a=e[0][r];switch(!0){case"string"==typeof a&&"$"===a[0]:var o=i(this.isPropertyReplaceable(a),2),s=o[0],u=o[1];t[0][r]=s?u:a,t[1]=!!s&&t[1];break;case null!==a&&"object"==typeof a&&a.constructor===Object:var c=this.enrich([a,t[1]]);t[0][r]=c[0],t[1]=t[1]&&c[1];break;default:t[0][r]=a}}return t},e.prototype.isPropertyReplaceable=function(e){var t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]},e}();t.GlobalEnricher=o},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.WebAddon=t.load=void 0;var i=n(4),a=n(0),o=["mousemove","click","scroll"],s=["email","tel","submit","reset","button","file","password","radio","checkbox"];t.load=function(e,t,n){0};var u=function(){function e(e){var t=this;this.dirtyState=!1,this.initialised=!1,this.totalCompletion=0,this.totalEngagedTime=0,this.engagementEdgeOnly="boolean"==typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.engagement_edge_only&&{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.engagement_edge_only,this.trackPageviewEngagement="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_engagement||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_engagement,this.trackPageviewComplete="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_complete||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_pageview_complete,this.trackFormSubmission="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_form_submission||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_form_submission,this.trackLinkClick="boolean"!=typeof{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_link_click||{add_alchemy_entities:!1,add_alchemy_taxonomy:!1,auto_init:!1}.track_link_click,this.pageviewCompleteTimeoutDuration=3e5,this.hasPageviewCompleteFired=!1,this.permutive=e.permutive,this._internals=e._internals,this.context=e.context,this.eventInterval=e.eventInterval||5,this.page=e.page||{},this.sendPageviewEvent(),(e.dirtyEvents||o).map((function(e){window.addEventListener(e,(function(){t.dirtyState=!0,t.trackPageviewComplete&&t.resetTimeout()}))})),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners,!1),this.trackPageviewEngagement&&(this.timerHandle=this.registerEngagementInterval(this.eventInterval)),this.trackPageviewComplete&&(this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration),i.onPageUnload((function(){return t.hasPageviewCompleteFired?null:t.sendPageviewCompleteEvent(t.totalEngagedTime,t.totalCompletion)}))),this.initialised=!0}return e.prototype.sendPageviewEvent=function(){var e=this,t=r(r(r(r({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),{}),this.enrichmentProperties(this.context.isArticle)),this.page?this.page:{}),n={success:function(){e.initialised||e._internals.metrics.trackTimeSinceInit("sdk_first_event_tracked_task_duration_seconds",{})}};this.permutive.track("Pageview",t,n)},e.prototype.sendLinkClickEvent=function(e,t){if(window.location.href&&e.href){var n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}},e.prototype.sendFormSubmissionEvent=function(e){var t=e.currentTarget,n={form:r(r(r({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)},e.prototype.sendEngagementEvent=function(e){var t=this.updateState(e),n=t.engaged_time,i=t.total_engaged_time,a=t.completion,o=t.total_completion,s=r(r(r({engaged_time:n,total_engaged_time:i},this.page),{completion:a,total_completion:o}),{});this.permutive.track("PageviewEngagement",s,{isMemoryOnly:this.engagementEdgeOnly})},e.prototype.sendPageviewCompleteEvent=function(e,t,n){void 0===n&&(n=!0);var i={aggregations:{PageviewEngagement:r({engaged_time:e},{completion:t})}};this.permutive.track("PageviewComplete",i,{useBeacon:n}),this.hasPageviewCompleteFired=!0},e.prototype.reset=function(e){this._internals.state.viewId=i.uuidv4(),this.page=e.page||null,this.totalCompletion=0,this.totalEngagedTime=0,this.sendPageviewEvent(),this.trackPageviewEngagement&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.eventInterval))},e.prototype.serializeForm=function(e){return[].slice.call(e.getElementsByTagName("input"),0).filter((function(e){return!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==s.indexOf(e.type.toLowerCase()))})).map((function(e){return{name:e.name||e.id,value:e.value}})).filter((function(e){return e.value.length<120}))},e.prototype.enrichmentProperties=function(e){return r(r(r({},{}),{}),{})},e.prototype.registerEngagementInterval=function(e){var t=this;return setInterval((function(){t.dirtyState&&t.sendEngagementEvent(e)}),1e3*e)},e.prototype.attachListeners=function(){var e=this,t=function(e){return"a"===e.tagName.toLowerCase()},n=function(e){return t(e)?a.some(e):e.parentElement?t(e.parentElement)?a.some(e.parentElement):n(e.parentElement):a.none};this.trackFormSubmission&&[].slice.call(document.getElementsByTagName("form"),0).forEach((function(t){t.addEventListener("submit",e._internals.makeSafe(e.sendFormSubmissionEvent.bind(e)))})),this.trackLinkClick&&document.body.addEventListener("click",(function(t){if(t.target instanceof Element){var r=n(t.target);return a.fold((function(){}),(function(n){return e.sendLinkClickEvent(n,function(e,t){return!("_blank"===t.target||e.metaKey||e.ctrlKey||e.shiftKey||2===e.which||3===e.which)}(t,n))}))(r)}}))},e.prototype.updateState=function(e){var t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}},e.prototype.getCurrentCompletion=function(){var e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e},e.prototype.setPageviewCompleteTimeout=function(e){var t=this;return window.setTimeout((function(){return t.sendPageviewCompleteEvent(t.totalEngagedTime,t.totalCompletion,!1)}),e)},e.prototype.resetTimeout=function(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(this.pageviewCompleteTimeoutDuration)},e}();t.WebAddon=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlaysAddon=t.load=void 0,t.load=function(e,t,n){e.unshift({functionName:"addon",arguments:["overlays",{}]})};var r=function(){function e(e){var t=this,n=this;this.permutive=e.permutive,this._internals=e._internals,this.reactions=this._internals.state.reactionManager.getReactions("show_overlay"),this.loadedImageCounts={};for(var r=function(e){var r=i.reactions[e],a=r.config,o=i.buildOverlayCss(a,e);document.head.insertAdjacentHTML("beforeend",o);var s=i.buildOverlayBody(a,e);document.body.insertAdjacentHTML("beforeend",s);var u="permutive-overlay-"+e,c=document.getElementById(u),f=c.getElementsByClassName("close")[0],d=c.getElementsByClassName("content")[0],l=function(){c.style.visibility="hidden",c.style.opacity="0"},p=function(e){d.contains(e.target)||(l(),c.removeEventListener("click",p))};f.addEventListener("click",l),c.addEventListener("click",p),[].slice.call(c.getElementsByTagName("a")).slice(1).forEach((function(e){e.addEventListener("click",(function(){r.trackConversion({useBeacon:!0})}))}));var h=c.getElementsByTagName("form")[0];h&&h.addEventListener("submit",(function(e){e.preventDefault(),r.trackConversion({success:function(){h.submit()}})}));var g=function(e,t){n.showOverlay(e),t.trackImpression()};r.reactEveryTime()?i.permutive.query(r.segmentCode,i._internals.makeSafe((function(e){e.result?g(u,r):t.permutive.trigger(r.segmentCode,"result",(function(e){e.result&&g(u,r)}))}))):r.reactOnEntry()?i.permutive.trigger(r.segmentCode,"result",i._internals.makeSafe((function(e){e.result&&g(u,r)}))):r.reactOnExit()&&i.permutive.trigger(r.segmentCode,"result",i._internals.makeSafe((function(e){e.result||g(u,r)})))},i=this,a=0;a<this.reactions.length;a++)r(a)}return e.prototype.buildOverlayCss=function(e,t){return'<style type="text/css">.${overlay_class}{position:fixed;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background:rgba(0,0,0,0.${opacity_percentage});transition:opacity ${opacity_transition_ms}ms;visibility:hidden;opacity:0;z-index:1000000;}.${modal_class}{position:fixed;padding:10px;background:#fff;border-radius:5px;z-index:1000001}.${modal_class} .content{overflow:auto;z-index:1000002;}.${modal_class} .close{position:absolute;top:20px;right:30px;transition:all 200ms;font-size:30px;font-weight:bold;text-decoration:none;color:#333;z-index:1000003}.${modal_class} .close:hover{color:orange;}</style>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${opacity_percentage}",e.opacity_percentage.toString()).replace("${opacity_transition_ms}",e.opacity_transition_ms.toString())},e.prototype.buildOverlayBody=function(e,t){var n="";return!function(e){return void 0!==e.html}(e)?function(e){return void 0!==e.image_url&&void 0!==e.image_link}(e)&&(n='<a href="'+e.image_link+'"><img src="'+e.image_url+'"/></a>'):n=e.html,'<div id="${overlay_class}" class="${overlay_class}"><div id="${modal_class}" class="${modal_class}"><a class="close" href="javascript:;">&times;</a><div class="content">${content}</div></div></div>'.replace(/\${overlay_class}/g,"permutive-overlay-"+t).replace(/\${modal_class}/g,"permutive-modal-"+t).replace("${content}",n).replace(/<img /g,"<img onload='window.permutive.addons.overlays.loadedImage(\"permutive-overlay-"+t+"\")' ")},e.prototype.showOverlay=function(e){var t=this,n=document.getElementById(""+e),r=function(){var e=n.getElementsByTagName("div")[0],t=e.getBoundingClientRect().height,r=e.getBoundingClientRect().width;e.style.left=window.innerWidth/2-r/2+"px",e.style.top=window.innerHeight/2-t/2+"px",n.style.visibility="visible",n.style.opacity="1"},i=n.getElementsByTagName("img");if(i.length>0){var a=0,o=function(){a<10&&(!(e in t.loadedImageCounts)||t.loadedImageCounts[e]<i.length)?(a+=1,setTimeout(o,500)):r()};o()}else r()},e.prototype.loadedImage=function(e){e in this.loadedImageCounts?this.loadedImageCounts[e]=this.loadedImageCounts[e]+1:this.loadedImageCounts[e]=1},e}();t.OverlaysAddon=r},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScriptRunnerAddon=exports.load=void 0,exports.load=function(e,t,n){e.unshift({functionName:"addon",arguments:["scriptrunner",{}]})};var ScriptRunnerAddon=function(){function ScriptRunnerAddon(options){var _this=this;this.permutive=options.permutive,this._internals=options._internals,this.network=options.network,this.reactions=this._internals.state.reactionManager.getReactions("run_script");for(var _loop_1=function(i){var reaction=this_1.reactions[i],run_1=function(reaction){var script=reaction.config.script.replace(/impression\(\)/g,"reaction.trackImpression();").replace(/conversion\(\)/g,"reaction.trackConversion();");try{eval(script)}catch(e){e.message="Error running custom script: "+e.message,_this.network.error(e,_this._internals.state.userId)}};reaction.reactEveryTime()?this_1.permutive.query(reaction.segmentCode,(function(e){e.result?run_1(reaction):_this.permutive.trigger(reaction.segmentCode,"result",(function(e){e.result&&run_1(reaction)}))})):reaction.reactOnEntry()?this_1.permutive.trigger(reaction.segmentCode,"result",(function(e){e.result&&run_1(reaction)})):reaction.reactOnExit()&&this_1.permutive.trigger(reaction.segmentCode,"result",(function(e){e.result||run_1(reaction)}))},this_1=this,i=0;i<this.reactions.length;i++)_loop_1(i)}return ScriptRunnerAddon}();exports.ScriptRunnerAddon=ScriptRunnerAddon},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.DFPAddon=t.load=void 0;var i=n(4),a={};t.load=function(e,t,n){e.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){t.ready(n.makeSafe((function(){var e=0;googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().length>0&&googletag.pubads().getSlots().forEach((function(t){t.getResponseInformation()&&e++}));var t=0===e?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";n.metrics.track({name:t,value:1,labels:{target:"dfp"}})})),"realtime");var e,o=(e=n.getExternalData("_pdfps"))?JSON.parse(e):[];googletag.cmd.push((function(){googletag.pubads().setTargeting("permutive",o.map(String))})),googletag.pubads().setTargeting("puid",n.state.userId),googletag.pubads().setTargeting("ptime",Date.now().toString());var s=function(e){for(var t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId(),targeting_keys:[]},n={},r=e.getTargetingKeys(),i=0;i<r.length;i++){for(var a=r[i],o=[],s=e.getTargeting(a),u=0;u<s.length;u++)o.push(s[u].toString());o.length>0&&(n[a]=1,t.targeting_keys.push({key:a,value:o}))}var c=googletag.pubads().getTargetingKeys();for(i=0;i<c.length;i++){o=[];if(void 0===n[a=c[i]]){for(s=googletag.pubads().getTargeting(c[i]),u=0;u<s.length;u++)o.push(s[u].toString());o.length>0&&t.targeting_keys.push({key:a,value:o})}}return t},u=function(e){try{var n=!1;window.addEventListener("blur",(function(){if(n){var r=a[e];r&&t.track("SlotClicked",r)}})),document.getElementById(e).addEventListener("mouseover",(function(){n=!0})),document.getElementById(e).addEventListener("mouseout",(function(){n=!1}))}catch(e){}};googletag.pubads&&googletag.pubads().getSlots&&googletag.pubads().getSlots().forEach((function(e){var t=e.getResponseInformation();if(t){var n=e.getSlotElementId(),r={advertiser_id:i.numericStringToNumber(t.advertiserId),campaign_id:i.numericStringToNumber(t.campaignId),line_item_id:i.numericStringToNumber(t.lineItemId),creative_id:i.numericStringToNumber(t.creativeId),is_empty:!1,service_name:"publisher_ads",slot:s(e)};a[n]=r,u(n)}})),googletag.cmd.push((function(){googletag.pubads().addEventListener("slotRenderEnded",(function(e){var t=e,n=t.slot.getSlotElementId(),o={advertiser_id:i.numericStringToNumber(t.advertiserId),campaign_id:i.numericStringToNumber(t.campaignId),line_item_id:i.numericStringToNumber(t.lineItemId),creative_id:i.numericStringToNumber(t.creativeId),is_empty:t.isEmpty,service_name:t.serviceName,slot:s(e.slot)};if(t.size){var c=r(t.size),f=c[0],d=c[1];c.slice(2);"number"==typeof f&&"number"==typeof d&&(o.width=f,o.height=d)}a[n]=o,u(n)})),googletag.pubads().addEventListener("impressionViewable",(function(e){var n=e.slot.getResponseInformation();n&&t.track("SlotViewable",{advertiser_id:i.numericStringToNumber(n.advertiserId),campaign_id:i.numericStringToNumber(n.campaignId),line_item_id:i.numericStringToNumber(n.lineItemId),creative_id:i.numericStringToNumber(n.creativeId),service_name:e.serviceName,slot:s(e.slot)})}))})),window.addEventListener("message",(function(e){try{var n=JSON.parse(e.data);if(n.permutive_type&&"google_ad_click"===n.permutive_type){var r=n.data.ad_unit_path,o=i.numericStringToNumber(n.data.creative_id),s=void 0;Object.keys(a).forEach((function(e){void 0!==a[e].slot&&a[e].slot.ad_unit_path===r&&a[e].creative_id===o&&(s=a[e])})),s=s||{line_item_id:i.numericStringToNumber(n.data.line_item_id),advertiser_id:i.numericStringToNumber(n.data.advertiser_id),campaign_id:i.numericStringToNumber(n.data.order_id),creative_id:i.numericStringToNumber(o),is_empty:!1},t.track("SlotClicked",s)}}catch(e){}}),!1)}))};var o=function(){function e(e){var t=this;this.trackedTargetingLimitMetric=!1,this._internals=e._internals;var n=this._internals.getExternalData("_pdfps");this.liveSegments=n?JSON.parse(n):[],this.eligibleSegments={};for(var r=this._internals.state.reactionManager.getSpecializedReactions("target_dfp"),i=0;i<r.dfp.length;i++){var a=r.dfp[i];this.eligibleSegments[a]=a}for(var a in r.dfp_legacy)if(r.dfp_legacy.hasOwnProperty(a)){var o=r.dfp_legacy[a];this.eligibleSegments[a]=o}var s=this._internals.queryManager.userSegments;this.updateSegments(this.filterSegments(s)),this._internals.messages.emit("permutive:dfp:ready"),this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe((function(){var e=t._internals.queryManager.userSegments;t.updateIfNecessary(e)}))),this._internals.messages.on("permutive:reset",this._internals.makeSafe((function(){t._internals.removeExternalData("_pdfps"),t._internals.deleteCookie("_pdfps"),t.liveSegments=[]})))}return e.prototype.updateIfNecessary=function(e){var t=this.filterSegments(e);this._internals.arraysEqual(t,this.liveSegments)||this.updateSegments(t)},e.prototype.updateSegments=function(e){var t=this.processActivations(this._internals.thirdParty.getActivationMetadata()),n=e.concat(t);encodeURIComponent(JSON.stringify(n)).length>1500&&(n=e,this.trackedTargetingLimitMetric||(this._internals.metrics.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),this.trackedTargetingLimitMetric=!0)),window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){return googletag.pubads().setTargeting("permutive",n.map(String).concat(["rts"]))}));var r=JSON.stringify(n.map(String));this._internals.setExternalData("_pdfps",r),"boolean"==typeof{auto_init:!0,networks:[{name:"Default",network_code:"1028834"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0}.sync_segments_cookie&&{auto_init:!0,networks:[{name:"Default",network_code:"1028834"}],track_slot_clicked:!0,track_slot_rendered:!1,track_slot_viewable:!0}.sync_segments_cookie&&this._internals.api.segmentSync("_pdfps",r),this.liveSegments=e},e.prototype.filterSegments=function(e){var t=this;return e.filter((function(e){return e in t.eligibleSegments})).map((function(e){return t.eligibleSegments[e]}))},e.prototype.processActivations=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)&&n in this.eligibleSegments)for(var r=0;r<e[n].length;r++)t.push(e[n][r]);return t},e}();t.DFPAddon=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RubiconSspAddon=t.load=void 0;t.load=function(e,t,n){e.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};var r=function(){function e(e){var t=this;this._internals=e._internals;var n=this._internals.getExternalData("_prubicons");this.liveSegments=n?JSON.parse(n):[],this.eligibleSegments={},this.reactions=this._internals.state.reactionManager.getReactions("rubicon_ssp");for(var r=0;r<this.reactions.length;r++){var i=this.reactions[r].segmentCode;this.eligibleSegments[i]=!0}var a=this._internals.queryManager.userSegments;this.updateIfNecessary(a),this._internals.messages.on("permutive:segments:updated",(function(){var e=t._internals.queryManager.userSegments;t.updateIfNecessary(e)})),this._internals.messages.on("permutive:reset",this._internals.makeSafe((function(){localStorage.removeItem("_prubicons"),t.liveSegments=[]})))}return e.prototype.updateIfNecessary=function(e){var t=this.filterSegments(e);this._internals.arraysEqual(t,this.liveSegments)||this._internals.setExternalData("_prubicons",JSON.stringify(t)),this.liveSegments=t},e.prototype.filterSegments=function(e){var t=this;return e.filter((function(e){return e in t.eligibleSegments}))},e}();t.RubiconSspAddon=r},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.AppNexusAdServerAddon=t.load=void 0;var a=function(){try{return window.apntag.getTag()}catch(e){return{}}},o=function(e){try{return window.apntag.getTag(e)}catch(e){return}};t.load=function(e,t,n){if(e.push({functionName:"addon",arguments:["appnexus_adserver",{}]}),void 0!==window.apntag&&window.apntag.anq&&window.apntag.anq.push){t.ready(n.makeSafe((function(){var e=!1,t=a();Object.keys(t).forEach((function(n){t[n].displayed&&(e=!0)}));var r=e?"sdk_targeting_realtime_fail_count":"sdk_targeting_realtime_success_count";n.metrics.track({name:r,value:1,labels:{target:"appnexus"}})})),"realtime");var r=function(e,t){var n=[];return(null==t?void 0:t.keywords)&&Object.keys(t.keywords).forEach((function(e){var r;n.push({key:e,value:(r=t.keywords[e],(Array.isArray(r)?r:[r]).map((function(e){return e.toString()})))})})),{slot:{target_id:e.targetId,tag_id:e.tagId,height:e.height,width:e.width,targeting:n},ad:{type:e.adType,source:e.source,creative_id:e.creativeId,auction_id:e.auctionId,buyer_member_id:e.buyerMemberId,brand_category_id:e.brandCategoryId,media_type_id:e.mediaTypeId,media_sub_type_id:e.mediaSubType}}},i=function(e,r){n.makeSafe((function(){if(null==e?void 0:e.utiframeId){var n=!1;window.addEventListener("blur",(function(){n&&t.track("AppNexusAdClick",r)})),document.getElementById(e.utiframeId).addEventListener("mouseover",(function(){n=!0})),document.getElementById(e.utiframeId).addEventListener("mouseout",(function(){n=!1}))}}))()};window.__permutive=window.__permutive||{},window.__permutive.appnexusEvents=window.__permutive.appnexusEvents||[],window.__permutive.appnexusEvents.forEach((function(e){if("adLoaded"==e.eventType){var n=e.arg,a=o(n.targetId),s=r(n,a);t.track("AppNexusAdImpression",s),i(a,s)}})),window.apntag.anq.push((function(){window.apntag.onEvent("adLoaded",(function(e){var n=o(e.targetId),a=r(e,n);t.track("AppNexusAdImpression",a),i(n,a)}))}))}};var s=function(){function e(e){var t=this;this.permutive=e.permutive,this._internals=e._internals;var n=this._internals.getExternalData("_papns");this.liveSegments=n?JSON.parse(n):[],this.eligibleSegments={};for(var r=this._internals.state.reactionManager.getSpecializedReactions("appnexus_adserver"),i=0;i<r.length;i++){var a=r[i];this.eligibleSegments[a]=1}var o=this._internals.queryManager.userSegments;if(this.updateSegments(this.filterSegments(o)),window.apntag&&window.apntag.anq&&window.apntag.anq.push){var s=this;window.apntag.anq.push((function(){var e=window.apntag.defineTag;window.apntag.defineTag=function(t){e(t),s._internals.makeSafe((function(){if(t.targetId){var e=s._internals.queryManager.userSegments;s.updateSegments(s.filterSegments(e),t.targetId)}}))()}}))}this._internals.messages.on("permutive:segments:updated",this._internals.makeSafe((function(){var e=t._internals.queryManager.userSegments;t.updateIfNecessary(e)}))),this._internals.messages.on("permutive:reset",this._internals.makeSafe((function(){t._internals.removeExternalData("_papns"),t._internals.deleteCookie("_papns"),t.liveSegments=[]})))}return e.prototype.updateIfNecessary=function(e){var t=this.filterSegments(e);this._internals.arraysEqual(t,this.liveSegments)||this.updateSegments(t)},e.prototype.updateSegments=function(e,t){window.apntag&&window.apntag.anq&&window.apntag.anq.push&&window.apntag.anq.push((function(){var n={permutive:i(e,["rts"])};t?window.apntag.setKeywords(t,n,{overrideKeyValue:!0}):Object.keys(a()).forEach((function(e){return window.apntag.setKeywords(e,n,{overrideKeyValue:!0})}))}));var n=JSON.stringify(e);this._internals.setExternalData("_papns",n),this.liveSegments=e},e.prototype.filterSegments=function(e){var t=this;return e.filter((function(e){return e in t.eligibleSegments}))},e}();t.AppNexusAdServerAddon=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PrebidAddon=t.load=void 0;var r=n(4);t.load=function(e,t,n){n.makeSafe((function(){e.push({functionName:"addon",arguments:["prebid",{}]})}))()};var i=function(e){var t=this;this.winners={},this.tracked=[],this.run=function(){var e=t;function n(){window.pbjs.getAllWinningBids().forEach((function(t){e.winners[t.adUnitCode]=t.adId})),window.googletag.pubads().getSlots().map((function(e){return e.getSlotElementId()})).forEach((function(e){r(e)})),window.pbjs.onEvent("bidWon",(function(t){e.winners[t.adUnitCode]=t.adId,r(t.adUnitCode)})),window.googletag.pubads().addEventListener("slotOnload",(function(e){r(e.slot.getSlotElementId())}))}function r(t){try{!function(t){var n=e.winners[t];n&&delete e.winners[t];var r=window.pbjs.getConfig("bidderTimeout"),s=window.pbjs.getBidResponsesForAdUnitCode(t).bids.filter((function(t){return!e.tracked.some((function(e){return e.adUnitCode===t.adUnitCode&&e.auctionId===t.auctionId&&e.adId===t.adId}))}));s.length<1||(s.map((function(e){return function(e,t,n){return{ad_id:e.adId&&""+e.adId,ad_unit_code:e.adUnitCode&&""+e.adUnitCode,bidder:e.bidder,bidder_timeout:n,deal_id:e.dealId&&""+e.dealId,cpm:e.cpm,hb_pb:e.adserverTargeting&&e.adserverTargeting.hb_pb,height:e.height&&parseInt(e.height),width:e.width&&parseInt(e.width),time_to_respond:e.timeToRespond,bid_available:e.statusMessage&&e.statusMessage.indexOf("empty")<0,winning_bid:t===e.adId,advertiser_id:a(e),advertiser_name:i(e),dsp_id:o(e),auction_id:e.auctionId}}(e,n,r)})).forEach((function(e){e.winning_bid&&e.cpm>0&&window.permutive.track("PrebidBid",e)})),s.forEach((function(t){e.tracked.push({adUnitCode:t.adUnitCode,auctionId:t.auctionId,adId:t.adId})})))}(t)}catch(e){window.console&&window.console.error&&window.console.error(e)}}function i(e){var t,n,r,i=(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.clickUrl)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.brandName)||(null===(r=null==e?void 0:e.adomain)||void 0===r?void 0:r[0]);return i&&""+i||null}function a(e){var t,n,r,i,a=(null===(t=null==e?void 0:e.rubicon)||void 0===t?void 0:t.advertiserId)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.buyerId)||(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.brandId)||(null===(i=null==e?void 0:e.meta)||void 0===i?void 0:i.advertiserId);return a&&""+a||null}function o(e){var t,n,r,i=(null===(t=null==e?void 0:e.appnexus)||void 0===t?void 0:t.buyerMemberId)||(null===(n=null==e?void 0:e.rubicon)||void 0===n?void 0:n.networkId)||(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.networkId);return i&&""+i||null}window.pbjs.que.push((function(){window.googletag.cmd.push(n)}))},this.permutive=e.permutive,this._internals=e._internals,r.poller((function(){return void 0!==window.pbjs&&void 0!==window.pbjs.que&&void 0!==window.googletag&&void 0!==window.googletag.pubads}),this.run)};t.PrebidAddon=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),i=n(1),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e){var t=Object(r.a)(e,i.either);return a(a({},t),{chain:function(t,n){return e.chain(t,(function(t){return Object(i.isLeft)(t)?e.of(Object(i.left)(t.left)):n(t.right)}))},alt:function(n,r){return e.chain(n,(function(e){return Object(i.isLeft)(e)?r():t.of(e.right)}))},bimap:function(t,n,r){return e.map(t,(function(e){return i.either.bimap(e,n,r)}))},mapLeft:function(t,n){return e.map(t,(function(e){return i.either.mapLeft(e,n)}))},fold:function(t,n,r){return e.chain(t,Object(i.fold)(n,r))},getOrElse:function(t,n){return e.chain(t,Object(i.fold)(n,e.of))},orElse:function(n,r){return e.chain(n,Object(i.fold)(r,(function(e){return t.of(e)})))},swap:function(t){return e.map(t,i.swap)},rightM:function(t){return e.map(t,i.right)},leftM:function(t){return e.map(t,i.left)},left:function(t){return e.of(Object(i.left)(t))}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(11),i=n(1),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var n=Object(r.a)(t,Object(i.getValidation)(e));return a(a({},n),{chain:function(e,n){return t.chain(e,(function(e){return Object(i.isLeft)(e)?t.of(Object(i.left)(e.left)):n(e.right)}))},alt:function(r,a){return t.chain(r,(function(r){return Object(i.isRight)(r)?n.of(r.right):t.map(a(),(function(t){return Object(i.isLeft)(t)?Object(i.left)(e.concat(r.left,t.left)):t}))}))}})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(12),i=n(0),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function s(e,t){var n=o(o({},function(e,t){var n=Object(r.a)(e,t),o=a(a({},n),{compact:function(n){return e.map(n,t.compact)},separate:function(e){return{left:o.compact(n.map(e,i.getLeft)),right:o.compact(n.map(e,i.getRight))}}});return o}(e,t)),{partitionMap:function(e,t){return{left:n.filterMap(e,(function(e){return Object(i.getLeft)(t(e))})),right:n.filterMap(e,(function(e){return Object(i.getRight)(t(e))}))}},partition:function(e,t){return{left:n.filter(e,(function(e){return!t(e)})),right:n.filter(e,t)}},filterMap:function(n,r){return e.map(n,(function(e){return t.filterMap(e,r)}))},filter:function(n,r){return e.map(n,(function(e){return t.filter(e,r)}))}});return n}},function(module,exports,__webpack_require__){"use strict";(function(Promise){var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},__read=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},__spread=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasConsent=exports.makeConfig=exports.getTag=exports.canRun=void 0;var PermutiveNetwork_1=__webpack_require__(39),PermutiveState_1=__webpack_require__(40),PermutiveUtils_1=__webpack_require__(4),PermutiveIdentities_1=__webpack_require__(14),PermutiveInternals_1=__webpack_require__(50),PermutiveMetrics_1=__webpack_require__(58),PermutiveThirdParty_1=__webpack_require__(59),PermutiveMethods_1=__webpack_require__(61),GraphQLIdentify_1=__webpack_require__(63),GraphQLEvents_1=__webpack_require__(64),Config_1=__webpack_require__(65),QueryManager_1=__webpack_require__(66),Option_1=__webpack_require__(0),Either_1=__webpack_require__(1),Apply_1=__webpack_require__(68),pipeable_1=__webpack_require__(2),Array_1=__webpack_require__(9),Eq_1=__webpack_require__(8),TaskEither_1=__webpack_require__(13),Task_1=__webpack_require__(5),function_1=__webpack_require__(6),sdkInitTimestamp=window.performance.now();exports.canRun=function(e){var t=e.Worker&&e.Blob?Either_1.right(null):Either_1.left("WebWorkers not supported"),n=["QuotaExceededError","QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED"],r=Either_1.tryCatch((function(){e.localStorage.setItem("_permutive_ls_test","_permutive_ls_test"),e.localStorage.removeItem("_permutive_ls_test")}),(function(t){return e.localStorage&&0===e.localStorage.remainingSpace||n.some((function(e){return-1!==String(t).indexOf(e)}))?"localStorage quota exceeded":"localStorage not supported"}));return pipeable_1.pipe(Apply_1.sequenceT(Either_1.either)(r,t),(function(t){return TaskEither_1.map((function(t){return e}))(TaskEither_1.fromEither(t))}))},exports.getTag=function(e){return pipeable_1.pipe(Either_1.fromNullable("Can't find permutive tag on the page")(e.permutive),TaskEither_1.fromEither)},exports.makeConfig=function(e){return TaskEither_1.right(__assign(__assign({},e),{config:Config_1.make(e.config)}))};var makeNetwork=function(e){return TaskEither_1.right([e,new PermutiveNetwork_1.PermutiveNetwork(e.config)])};exports.hasConsent=function(e){var t,n=__read(e,2),r=n[0],i=n[1];if(r.config.consentRequired){var a=function(e){return"object"==typeof e&&pipeable_1.pipe(window.localStorage.setItem("permutive-consent",JSON.stringify(e)),(function(t){var n;return e.opt_in&&(null===(n=e.token)||void 0===n?void 0:n.length)>0}))},o=TaskEither_1.getOrElse((function(e){return TaskEither_1.getOrElse((function(e){return TaskEither_1.getOrElse((function(e){return Task_1.of(!1)}))(Array_1.elem(Eq_1.eqString)(r.config.projectId,["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"])?TaskEither_1.tryCatch((function(){return i.req({url:i.getEndpointUrl("/geoip"),method:"GET"},!1).then((function(e){return"Israel"===PermutiveUtils_1.lens(e,"geo_info","country")&&a({opt_in:!0,token:"whitelisted-geo"})}))}),(function(e){return i.error("Failed to retrieve geo location information required for consent. Got "+e)})):TaskEither_1.right(!1))}))(TaskEither_1.fromOption(function_1.constVoid)((t=JSON.parse(window.localStorage.getItem("permutive-consent")))?Option_1.some(a(t)):Option_1.none));var t}))(TaskEither_1.fromOption(function_1.constVoid)((t=Array_1.findFirst((function(e){return"consent"===e.functionName}))(r.q),Option_1.map((function(e){return a(e.arguments[0])}))(t))));return Task_1.map((function(t){return t?Either_1.right(function_1.tuple(r,i)):pipeable_1.pipe(window.permutive.consent=function(t){return a(t)?init(e)():null},(function(e){return Either_1.left("No consent to run on the page")}))}))(o)}return TaskEither_1.right(e)};var init=function(tagAndNetwork){return TaskEither_1.tryCatch((function(){var _a=__read(tagAndNetwork,2),tag=_a[0],network=_a[1],context=PermutiveUtils_1.mergeObjects(tag.context||{},{path:window.location.pathname,url:window.location.href,referrer:document.referrer}),_internals=new PermutiveInternals_1.PermutiveInternals(tag.config,network),permutiveMethods=new PermutiveMethods_1.PermutiveMethods(_internals,network,context);_internals.state=new PermutiveState_1.PermutiveState(_internals,permutiveMethods,context),_internals.queryManager=new QueryManager_1.QueryManager(_internals,permutiveMethods,network),_internals.thirdParty=new PermutiveThirdParty_1.PermutiveThirdParty(_internals,permutiveMethods,network),_internals.identities=new PermutiveIdentities_1.PermutiveIdentities(_internals,network);var isMetricsUser=_internals.state.getPermutiveData("metricsEnabled");_internals.metrics=!0===isMetricsUser?new PermutiveMetrics_1.PermutiveMetrics(sdkInitTimestamp,_internals,permutiveMethods):!1===isMetricsUser?new PermutiveMetrics_1.PermutiveMetricsNoOp:pipeable_1.pipe(Math.random()<=_internals.config.metricsSamplingPercentage/100,(function(e){return[_internals.state.setPermutiveData("metricsEnabled",e),e]}),(function(e){var t=__read(e,2);t[0];return t[1]?new PermutiveMetrics_1.PermutiveMetrics(sdkInitTimestamp,_internals,permutiveMethods):new PermutiveMetrics_1.PermutiveMetricsNoOp}));var permutiveShell=PermutiveUtils_1.mergeObjects(tag,{consent:function(){}},{q:window.permutive.q},{context:context},{addons:_internals.addons});[].forEach((function(s){try{eval(s)}catch(e){network.error(__assign(__assign({},e),{message:"Error running custom script "+s}),_internals.state.userId)}})),_internals.addBlocker("permutive:queries:initialised"),_internals.messages.on("permutive:blockers:empty",(function(){var e=PermutiveUtils_1.mergeObjects(permutiveShell,{identify:permutiveMethods.identify.bind(permutiveMethods),on:permutiveMethods.on.bind(permutiveMethods),once:permutiveMethods.once.bind(permutiveMethods),track:permutiveMethods.track.bind(permutiveMethods),trigger:permutiveMethods.trigger.bind(permutiveMethods),query:permutiveMethods.query.bind(permutiveMethods),segment:permutiveMethods.segment.bind(permutiveMethods),segments:permutiveMethods.segments.bind(permutiveMethods),reset:permutiveMethods.reset.bind(permutiveMethods),ready:permutiveMethods.ready.bind(permutiveMethods),addon:permutiveMethods.addon.bind(permutiveMethods)},Array_1.elem(Eq_1.eqString)("f234822c-0aae-41ce-8843-23538710f825",["c8c3489e-f329-40e8-bcfc-1f852e512b01","be668577-07f5-444d-98e0-222b990951b1"])?{_internals:_internals}:{});_internals.setAsReady();var t=["identify","trigger","addon","track"];permutiveShell.q.filter((function(e){return"consent"!==e.functionName})).sort((function(e,n){var r=t.indexOf(e.functionName),i=t.indexOf(n.functionName);return-1===r?-1===i?0:1:-1===i?-1:r-i})).forEach((function(t){t.functionName in e?e[t.functionName].apply(permutiveMethods,t.arguments):network.error('Function "permutive.'+t.functionName+'" does not exist.',_internals.state.userId)})),window.permutive=__assign(__assign({},e),{q:[]})}));var aliasesMap=_internals.identities.currentAliases,aliasesList=_internals.identities.convertAliases(aliasesMap),retrieveThirdPartyIdentities=function(){return _internals.identities.retrieveAllIdentities()},resolveIdentity=function(){var e=PermutiveUtils_1.deferredPromise();_internals.log("<call> init identity "),permutiveShell.context.user_id=_internals.state.userId,permutiveShell.q.filter((function(e){return"identify"===e.functionName})).forEach((function(e){_internals.makeSafe((function(){var t=PermutiveIdentities_1.PermutiveIdentities.getAliasesFromIdentifyArg(e.arguments[0]);_internals.api.identify(t)}))()}));for(var t=function(){return PermutiveUtils_1.findIndex(permutiveShell.q,(function(e){return"identify"===e.functionName}))},n=t();n>0;)permutiveShell.q.splice(n,1),n=t();_internals.log("Starting identification... Current aliases are:",aliasesMap);var r=_internals.state.userId,i=new GraphQLIdentify_1.GraphQLIdentify(r,aliasesList);return _internals.graphql.register(i).then((function(t){return n={user_id:t.identity.identify.id},void((i=n.user_id)!==r?(_internals.log("Got different user id from API: "+i),_internals.state.reset().then((function(e){return pipeable_1.pipe(_internals.state.setUserId(i),(function(e){return _internals.identities.storeAliases(aliasesMap)}),(function(e){return _internals.state.eventsCache.reset()}))})).then((function(t){return e.resolve({identityChanged:!0,userId:i})}))):(_internals.identities.storeAliases(aliasesMap),e.resolve({identityChanged:!1,userId:i})));var n,i})).catch((function(){network.error("Couldn't set identity for user "+r,r),e.resolve({identityChanged:!1,userId:r})})),e.promise.then((function(e){_internals.messages.emit("permutive:user:ready"),_internals.setIdentityReady(),_internals.log("<done> init identity ",e)})),e.promise},onIdentityChanged=function(){return _internals.log("Identity has changed"),_internals.state.eventsCache.getUnseenEvents(new Date(0)).then((function(e){var t=_internals.state.eventsCache.processUnseenEvents(e);return _internals.queryManager.updateSegmentResults(t),_internals.queryManager.initWorker(t)}))},onIdentityRemained=function(e){return _internals.log("Identity hasn't changed"),_internals.state.eventsCache.loadFromDisk().then((function(e){return _internals.log("Loaded local event cache",e),_internals.queryManager.initWorker(e)})).then((function(){return e})).then((function(e){var t=_internals.state.eventsCache.processUnseenEvents(e);return _internals.log("Updating query states with unseen events from API (#e)",t.length),_internals.queryManager.updateWithHistoricSegments(t)}))},loadAddon=function(e){return e.load(permutiveShell.q,permutiveMethods,_internals,network)},addons=__spread([],[Promise.resolve().then((function(){return __webpack_require__(25)}))],[],[],[],[],[],[Promise.resolve().then((function(){return __webpack_require__(23)}))],[],[],[],[],[],[],[],[],[Promise.resolve().then((function(){return __webpack_require__(21)}))],[],[],[Promise.resolve().then((function(){return __webpack_require__(26)}))],[],[],[],[Promise.resolve().then((function(){return __webpack_require__(24)}))],[Promise.resolve().then((function(){return __webpack_require__(22)}))],[],[],[],[],[Promise.resolve().then((function(){return __webpack_require__(20)}))]);addons.forEach((function(e){return e.then(loadAddon)}));var registerEnricher=function(e){return e.register(_internals,permutiveShell.context,permutiveShell.config)},enrichers=__spread([Promise.resolve().then((function(){return __webpack_require__(69)}))],[]);enrichers.forEach((function(e){return e.then(registerEnricher)}));var registerIdentityPovider=function(e){return e.register(_internals,network)},identityProviders=__spread([],[],[]);return Promise.all(identityProviders).then((function(e){return e.forEach(registerIdentityPovider)})).then((function(e){return retrieveThirdPartyIdentities()})).then((function(){_internals.thirdParty.segments();var e=resolveIdentity(),t=_internals.graphql.register(new GraphQLEvents_1.GraphQLEvents(_internals.state.userId,_internals.state.eventsCache.lastRefreshed));return _internals.graphql.run(),e.then((function(e){return e.identityChanged?onIdentityChanged():(_internals.state.eventsCache.storeRefreshTime(new Date),onIdentityRemained(t.then((function(e){return e.events})).catch((function(e){return network.error("Identity retrieval failed with reason: "+e,_internals.state.userId),e}))))}))})).then((function(){return PermutiveIdentities_1.hasBrokenIdentity("f234822c-0aae-41ce-8843-23538710f825",aliasesList.map((function(e){return e.id})),window.location.hostname,_internals.state.userId)?permutiveMethods.reset():Promise.resolve()})).then((function(){return Promise.all([_internals.thirdParty.segments(),_internals.models.getModels()]).then((function(e){return _internals.log("Loaded TPD segments and lookalike models",e),_internals.queryManager.updateEnvironment({segments:PermutiveUtils_1.mergeObjects({"1p":_internals.queryManager.userSegmentsDict},e[0]),lookalikeModels:e[1]})}))})).then((function(){_internals.queryManager.setAsReady(),_internals.messages.emit("permutive:api:ready"),_internals.metrics.track({name:"sdk_local_storage_byte_total",value:_internals.state.getStateSizeInBytes(),labels:{}}),_internals.metrics.track({name:"sdk_query_states_byte_total",value:_internals.queryManager.getStateSizeInBytes(),labels:{}})}))}),(function(e){return"Exception during initialisation. Got "+e}))},initialisationSequence=pipeable_1.pipe(TaskEither_1.right(window),TaskEither_1.chain(exports.canRun),TaskEither_1.chain(exports.getTag),TaskEither_1.chain(exports.makeConfig),TaskEither_1.chain(makeNetwork),TaskEither_1.chain(exports.hasConsent),TaskEither_1.chain(init));initialisationSequence().then(Either_1.fold((function(e){return console.error("Error while initialising permutive. "+e)}),function_1.constVoid))}).call(this,__webpack_require__(3).Promise)},function(e,t,n){"use strict";t.cast=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(t){t(e)}))}},function(e,t,n){"use strict";var r=n(7).isArray,i=n(7).isFunction;t.all=function(e){if(!r(e))throw new TypeError("You must pass an array to all.");return new this((function(t,n){var r,a=[],o=e.length;function s(e){return function(t){u(e,t)}}function u(e,n){a[e]=n,0==--o&&t(a)}0===o&&t([]);for(var c=0;c<e.length;c++)(r=e[c])&&i(r.then)?r.then(s(c),n):u(c,r)}))}},function(e,t,n){"use strict";var r=n(7).isArray;t.race=function(e){if(!r(e))throw new TypeError("You must pass an array to race.");return new this((function(t,n){for(var r,i=0;i<e.length;i++)(r=e[i])&&"function"==typeof r.then?r.then(t,n):t(r)}))}},function(e,t,n){"use strict";t.resolve=function(e){return new this((function(t,n){t(e)}))}},function(e,t,n){"use strict";t.reject=function(e){return new this((function(t,n){n(e)}))}},function(e,t,n){"use strict";(function(e,n){var r="undefined"!=typeof window?window:{},i=r.MutationObserver||r.WebKitMutationObserver,a=void 0!==e?e:void 0===this?window:this;var o,s,u,c,f=[];function d(){for(var e=0;e<f.length;e++){var t=f[e];(0,t[0])(t[1])}f=[]}void 0!==n&&"[object process]"==={}.toString.call(n)?o=function(){n.nextTick(d)}:i?(s=0,u=new i(d),c=document.createTextNode(""),u.observe(c,{characterData:!0}),o=function(){c.data=s=++s%2}):o=function(){a.setTimeout(d,1)},t.asap=function(e,t){1===f.push([e,t])&&o()}}).call(this,n(17),n(37))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,c=[],f=!1,d=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):d=-1,c.length&&p())}function p(){if(!f){var e=s(l);f=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||f||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){var r=n(15).Promise,i=n(7).isFunction;t.polyfill=function(){var t,n;"Promise"in(t=void 0!==e?e:"undefined"!=typeof window&&window.document?window:self)&&"cast"in t.Promise&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&(new t.Promise((function(e){n=e})),i(n))||(t.Promise=r)}}).call(this,n(17))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveNetwork=void 0;var n=function(){function t(e){this.config=e,this.clientErrorsSent=0}return t.prototype.getEndpointUrl=function(e){return this.config.apiProtocol+"://"+this.config.apiHost+"/"+this.config.apiVersion+e},t.prototype.req=function(t,n){var r=-1===t.url.indexOf("?")?"?":"&",i=""+t.url+r+"k="+this.config.apiKey,a=t.method||"GET",o=t.data?JSON.stringify(t.data):"",s=t.contentType?t.contentType:"application/json";if(n&&navigator.sendBeacon){if(navigator.sendBeacon(i,o))return t.success&&t.success(o),e.resolve();var u="Failed to queue beacon";return t.error&&t.error(u),e.reject(u)}return this.ajax({type:a,url:i,contentType:s,dataType:t.dataType?t.dataType:"json",data:o,timeout:this.config.requestTimeout,xhrFields:t.xhrFields}).then((function(e){return t.success&&t.success(e),e}),(function(e){return t.error&&t.error(e),null}))},t.prototype.ajax=function(t){var n=this;return new e((function(e,r){var i,a,o={},s=t.dataType?t.dataType:"json",u=new XMLHttpRequest;if(t.contentType&&(i="Content-Type",a=t.contentType,o[i.toLowerCase()]=[i,a]),"binary"===t.dataType&&(u.responseType="arraybuffer"),u.onload=function(){404===this.status?r("Resource not found"):e("json"===s?this.responseText?JSON.parse(this.responseText):null:"text"===s?this.responseText:this.response)},u.onerror=function(){n.error("Failed AJAX request"),r(new TypeError("Network request failed"))},u.ontimeout=function(){n.error("AJAX request timed out"),r(new TypeError("Network request timed out"))},u.open(t.type?t.type:"GET",t.url,!0),t.timeout&&(u.timeout=t.timeout),t.xhrFields)for(var c in t.xhrFields)u[c]=t.xhrFields[c];Object.keys(o).forEach((function(e){var t=o[e];u.setRequestHeader(t[0],t[1])})),u.send(t.data?t.data:null)}))},t.prototype.error=function(e,t){if(this.config.sendClientErrors){if(this.clientErrorsSent>3)return;this.clientErrorsSent+=1;var n={user_id:t||"",domain:window.location.hostname?window.location.hostname:"",url:window.location.href?window.location.href:"",referrer:document.referrer?document.referrer:"",user_agent:navigator.userAgent?navigator.userAgent:"",error_message:"",stack_trace:"",additional_details:""};e instanceof Error?(void 0!==e.message&&(n.error_message=e.message.toString()),void 0!==e.stack&&(n.stack_trace=e.stack.toString())):n.additional_details=e.toString(),this.req({url:this.getEndpointUrl("/internal/errors"),method:"POST",data:n,contentType:"text/plain",dataType:"text"},!1)}else window.console&&(window.console.error?window.console.error("[Permutive]",e):window.console.log&&window.console.log("[Permutive]",e))},t}();t.PermutiveNetwork=n}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveState=void 0;var r=n(41),i=n(18),a=n(49),o=n(0),s=n(4),u=n(2),c=function(){function t(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.taskQueue=new a.PermutiveTaskQueue(this._internals);var u=this._internals.getNamespacedStorageKey(e.config.permutiveDataKey),c=localStorage.getItem(u);this.permutiveDataByteSize=null===c?0:2*c.length,this.permutiveData=null===c?{}:JSON.parse(c);var f=o.fromNullable(this._internals.getCookie(this._internals.config.cookieName)),d=o.fromNullable(this._internals.getExternalData(this._internals.config.cookieName)),l=o.getOrElse((function(){return o.getOrElse(s.uuidv4)(d)}))(f);this.setUserId(l),this.viewId=s.uuidv4(),this.context.view_id=this.viewId,this.eventsCache=new i.PermutiveEventsCache(this,this._internals),this.reactionManager=new r.PermutiveReactionManager(this._internals,this.permutive,this.context),this.reactionManager.load()}return t.prototype.setUserId=function(e){this._internals.setCookie(this._internals.config.cookieName,e,!0),this._internals.setExternalData(this._internals.config.cookieName,e),this.userId=e},t.prototype.getPermutiveData=function(e){return this.permutiveData[e]},t.prototype.setPermutiveData=function(e,t){this.permutiveData[e]=t;var n=this._internals.getNamespacedStorageKey(this._internals.config.permutiveDataKey),r=JSON.stringify(this.permutiveData);this.permutiveDataByteSize=2*r.length,this._internals.makeSafe((function(){localStorage.setItem(n,r)}))()},t.prototype.getPageviewId=function(){return this.viewId},t.prototype.getClient=function(){var e="";return e=document.title?document.title:"",{type:"web",user_agent:navigator.userAgent||"",url:window.location.href||"",domain:window.location.hostname||"",title:e,referrer:document.referrer||""}},t.prototype.getStateSizeInBytes=function(){return this.permutiveDataByteSize+this.eventsCache.getStateSizeInBytes()},t.prototype.reset=function(){var t=this;return this._internals.log("Resetting State"),e.resolve(u.pipe(this._internals.deleteCookie(this._internals.config.cookieName),(function(e){return t._internals.removeExternalData(t._internals.config.cookieName)}),(function(e){return t.permutiveData={}}),(function(e){return t.permutiveDataByteSize=0}),(function(e){return localStorage.removeItem(t._internals.config.permutiveDataKey)})))},t}();t.PermutiveState=c}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveReactionManager=void 0;var r=n(4),i=n(42),a=function(){function e(e,t,n){this._internals=e,this.permutive=t,this.context=n,this.reactionsConfig=[],this.specializedReactionsConfig={target_dfp:{dfp:[37266,40138,37219,37263,37243,40150,40181,37255,40145,39804,39778,37288,39398,40153,40142,37203,39682,39652,40163,37235,37273,37277,37245,39665,37227,39815,40165,39396,37237,37249,37208,40144,40157,39805,40146,37206,39807,39821,39809,40387,37282,39662,40175,37284,37210,39776,37261,39677,40168,37229,37283,37217,37275,40161,39818,37270,37233,39786,40141,39814,37289,39684,39819,37207,37256,37204,37285,39685,37278,37214,39656,39681,37212,37252,39679,40151,37287,39803,37247,40185,40148,37272,37264,37286,37230,39810,37209,40189,40147,39775,39674,39678,39671,37259,39787,37246,37254,37216,40167,39686,37250,39653,37268,37215,37257,39785,37260,40388,40143,39802,39798,39812,39395,40173,39811,37202,37265,40160,39783,37279,40178,37244,39780,40140,40155,39799,39550,37241,37267,37211,40172,37269,40182,40156,37253,40171,37234,40179,37218,37221,40170,40159,37232,40149,37276,37280,39816,40184,37223,37231,37181,39817,37224,40188,37239,37248,40174,39557,37225,37220,40164,40166,37271,40152,40177,37222,40186,40187,40162,40169,39683,40183,39654,37238,40158,37274,37228,37226,37242,40137,39672,40176,37281,37205,39680,39673,40180,39820,39655,39657,37240,37201,37258,37213,36649,37236,40139,37262,37251,40154],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[40158,40160,39819,40185,39653,39557,39821,39816,40187,39657,39776,39680,40142,40171,40188,40138,39686,40164,37264,40147,39550,39814,40182,39656,37206,40137,39654,39671,40186,40155,40170,39807,40163,39815,37233,37232,40177,39398,39817,40148,40184,40166,40165,40178,40154,40179,39662,40169,40149,40157,40181,37208,39682,40175,39780,39778,40168,39804,40144,39673,40161,39803,39798,40141,40146,40180,40153,39677,39787,40145,39685,39802,39812,39679,39655,39783,39652,39681,40162,40151,40139,40140,40172,40388,39805,40387,39809,39811,39810,40150,39818,40159,40183,40174,39785,39678,40173,39684,39665,40143,37289,40156,39674,40189,39786,40167,39396,40152,37262,39820,40176,39395,39683,39672,37266,39775,39799],nativo:[]},this.reactions={}}return e.prototype.load=function(){for(var e=0;e<this.reactionsConfig.length;e++){var t=this.reactionsConfig[e];this.reactions[t.reaction_type]?this.reactions[t.reaction_type].push(t):this.reactions[t.reaction_type]=[t]}},e.prototype.evaluateContextCriteria=function(e){for(var t=this,n=function(e){var n=t.context[e.key];return void 0!==n&&("EQUALS"===e.comparison?n===e.value:"NOT_EQUALS"===e.comparison?n!==e.value:"CONTAINS"===e.comparison&&"string"==typeof n||Array.isArray(n)?n.indexOf(e.value)>=0:!!("NOT_CONTAINS"===e.comparison&&"string"==typeof n||Array.isArray(n))&&n.indexOf(e.value)<0)},r=0;r<e.criteria.length;r++){var i=n(e.criteria[r]);if("AND"===e.operator&&!i)return!1;if("OR"===e.operator&&i)return!0}return"AND"===e.operator},e.prototype.selectVariant=function(e,t){if(1===t.length)return t[0];var n=this._internals.state.userId+e,i=Math.abs(r.hash(n))%12e4;t.sort((function(e,t){return e.start_bucket-t.start_bucket}));var a=r.findIndex(t,(function(e){return i<e.start_bucket}));return t[a>=0?a-1:t.length-1]},e.prototype.getSpecializedReactions=function(e){return this.specializedReactionsConfig[e]},e.prototype.getReactions=function(e){var t=[];if(this.reactions[e])for(var n=0;n<this.reactions[e].length;n++){var r=this.reactions[e][n],a=this.selectVariant(r.id,r.variants);if(a){var o=a.context_criteria;o&&!this.evaluateContextCriteria(o)||t.push(new i.PermutiveReaction(this.permutive,this._internals,r.id,a.segment_code,"",r.reaction_type,r.trigger_type,a.id,a.config))}}return t},e}();t.PermutiveReactionManager=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveReaction=void 0;var r=function(){function e(e,t,n,r,i,a,o,s,u){this.permutive=e,this._internals=t,this.id=n,this.segmentCode=r,this.segmentName=i,this.reactionType=a,this.triggerType=o,this.variantId=s,this.config=u}return e.prototype.reactEveryTime=function(){return"EveryTime"===this.triggerType},e.prototype.reactOnEntry=function(){return"OnEntry"===this.triggerType},e.prototype.reactOnExit=function(){return"OnExit"===this.triggerType},e.prototype.trackImpression=function(e){var t={reaction_id:this.id,variant_id:this.variantId,type:"impression"};this.permutive.track("Reaction",t,e),this._internals.log("impression: ",t)},e.prototype.trackConversion=function(e){var t={reaction_id:this.id,variant_id:this.variantId,type:"conversion"};this.permutive.track("Reaction",t,e),this._internals.log("conversion: ",t)},e}();t.PermutiveReaction=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventsCacheStore=void 0;var r=n(13),i=n(44),a=n(1),o=n(0),s=n(45),u=function(){function e(e,t,n,r,o,u,c){var f=this;this._internals=e,this.cryptoAlg=t,this.dbName=n,this.mainObjectStore=r,this.keyObjectStore=o,this.keyObjectKey=u,this.version=c,this.db=s.IndexedDB.initialise(this._internals,this.cryptoAlg,this.dbName,this.mainObjectStore,this.keyObjectStore,this.keyObjectKey,this.version)().then(a.getOrElse((function(e){return new i.LocalStorageDB(f._internals)})))}return e.prototype.put=function(e,t){var n=this;return r.tryCatch((function(){return n.db.then((function(n){return n.put(e,t)}))}),(function(e){return String(e)}))},e.prototype.get=function(e){var t=this;return r.tryCatch((function(){return t.db.then((function(t){return t.get(e)})).then(o.fromNullable)}),(function(e){return String(e)}))},e.prototype.delete=function(e){var t=this;return r.tryCatch((function(){return t.db.then((function(t){return t.delete(e)}))}),(function(e){return String(e)}))},e.prototype.deleteStore=function(){var e=this;return r.tryCatch((function(){return e.db.then((function(e){return e.deleteStore()}))}),(function(e){return String(e)}))},e.prototype.migrateIfRequired=function(){var e=this;return r.tryCatch((function(){return e.db.then((function(e){return e.migrateIfRequired()}))}),(function(e){return String(e)}))},e}();t.EventsCacheStore=u},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageDB=void 0;var r=n(2),i=function(){function t(e){this._internals=e}return t.prototype.put=function(t,n){return r.pipe(this._internals.getNamespacedStorageKey(String(n)),(function(e){return window.localStorage.setItem(e,JSON.stringify(t))}),(function(t){return e.resolve(n)}))},t.prototype.get=function(e){return r.pipe(this._internals.getNamespacedStorageKey(String(e)),(function(e){return JSON.parse(window.localStorage.getItem(e))}))},t.prototype.delete=function(t){return r.pipe(this._internals.getNamespacedStorageKey(String(t)),(function(t){return e.resolve(window.localStorage.removeItem(t))}))},t.prototype.deleteStore=function(){return e.resolve()},t.prototype.migrateIfRequired=function(){return e.resolve()},t}();t.LocalStorageDB=i}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedDB=void 0;var a=n(46),o=n(13),s=n(1),u=n(2),c=n(18),f=n(9),d=n(10),l=function(){function t(e,t,n,r,i,a){this._internals=e,this.cryptoAlg=t,this.idb=n,this.mainObjectStore=r,this.keyObjectStore=i,this.keyObjectKey=a,this.MAX_CONSECUTIVE_PUTS=50,this.puts=1,this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.cryptoKey=this.getOrGenerateKey()}return t.initialise=function(e,n,r,i,u,c,f){var d=("development"===e.config.environment?window.isSecureContext:"https:"===window.location.protocol)?s.tryCatch((function(){return a.openDB(r,f,{upgrade:function(e){e.createObjectStore(i),e.createObjectStore(u)}})}),(function(e){return String(e)})):s.left("Insecure context. Can't use crypto APIs");return s.fold((function(e){return o.left(e)}),(function(r){return o.tryCatch((function(){return r.then((function(r){return new t(e,n,r,i,u,c)}))}),(function(e){return String(e)}))}))(d)},t.prototype.put=function(t,n){var r=this;return this.cryptoKey.then((function(i){return u.pipe(JSON.stringify(t),(function(t){return new e((function(e,a){r.cryptoAlg.encrypt(i,t).then((function(t){return u.pipe(r._internals.getNamespacedStorageKey(String(n)),(function(i){return r.resetIfRequired(r.puts++).then((function(a){return r.idb.put(r.mainObjectStore,t,i).then((function(t){return e(n)}))}))}))}),(function(e){return a(e)}))}))}))}))},t.prototype.get=function(e){var t=this;return this.cryptoKey.then((function(n){return u.pipe(t._internals.getNamespacedStorageKey(String(e)),(function(e){return t.idb.get(t.mainObjectStore,e).then((function(e){return e?t.cryptoAlg.decrypt(n,e):null})).then(JSON.parse)}))}))},t.prototype.delete=function(e){var t=this;return u.pipe(this._internals.getNamespacedStorageKey(String(e)),(function(e){return t.idb.delete(t.mainObjectStore,e)}))},t.prototype.migrateIfRequired=function(){var t=this,n=u.pipe(this._internals.getExternalData(c.EVENTS_CACHE_KEY),(function(e){return e?o.right(JSON.parse(e)):o.left(null)})),r=o.tryCatch((function(){return t.idb.get("events","permutive-events-cache")}),(function(e){}));return e.all([n(),r()]).then((function(e){return e.filter(s.isRight).map((function(e){return e.right})).filter((function(e){return e}))})).then(f.flatten).then((function(e){return u.pipe(e,(function(e){return e.forEach((function(e){return t._internals.state.eventsCache.addEventIfUnseen(d.deserializeEvent(e),!1,!1)}))}),(function(e){return t._internals.removeExternalData(c.EVENTS_CACHE_KEY)}))})).then((function(n){return-1!==i(t.idb.objectStoreNames).indexOf("events")?t.idb.delete("events","permutive-events-cache"):e.resolve()}))},t.prototype.deleteStore=function(){var t=this;return e.resolve(this.idb.close()).then((function(e){return a.deleteDB(t.idb.name)}))},t.prototype.getOrGenerateKey=function(){var e=this;return u.pipe(this._internals.getNamespacedStorageKey(this.keyObjectKey),(function(t){return e.idb.get(e.keyObjectStore,t).then((function(t){return t||e.storeGivenOrGeneratedKey()}))}))},t.prototype.storeGivenOrGeneratedKey=function(t){var n=this;return(t||this.cryptoAlg.generateKey(!1)).then((function(e){return u.pipe(n._internals.getNamespacedStorageKey(n.keyObjectKey),(function(t){return n.idb.put(n.keyObjectStore,e,t)}),(function(t){return e}))}),(function(t){return e.reject(t)}))},t.prototype.resetIfRequired=function(t){var n=this,r=this.idb.name,i=this.idb.version;return this.isSafari&&t%this.MAX_CONSECUTIVE_PUTS==0?this.deleteStore().then((function(e){return a.openDB(r,i,{upgrade:function(e){e.createObjectStore(n.mainObjectStore),e.createObjectStore(n.keyObjectStore)}})})).then((function(e){n.idb=e,n.storeGivenOrGeneratedKey(n.cryptoKey)})):e.resolve()},t}();t.IndexedDB=l}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.deleteDB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.blocked,i=indexedDB.deleteDatabase(e);n&&i.addEventListener("blocked",(function(){return n()}));return(0,r.w)(i).then((function(){}))},t.openDB=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.blocked,a=n.upgrade,o=n.blocking,s=n.terminated,u=indexedDB.open(e,t),c=(0,r.w)(u);a&&u.addEventListener("upgradeneeded",(function(e){a((0,r.w)(u.result),e.oldVersion,e.newVersion,(0,r.w)(u.transaction))}));i&&u.addEventListener("blocked",(function(){return i()}));return c.then((function(e){s&&e.addEventListener("close",(function(){return s()})),o&&e.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),c},Object.defineProperty(t,"unwrap",{enumerable:!0,get:function(){return r.u}}),Object.defineProperty(t,"wrap",{enumerable:!0,get:function(){return r.w}});var r=n(47);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){}function u(t,n){if(!n)return t&&t.then?t.then(s):e.resolve()}function c(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function f(t,n,r){return r?n?n(t):t:(t&&t.then||(t=e.resolve(t)),n?t.then(n):t)}var d=["get","getKey","getAll","getAllKeys","count"],l=["put","add","delete","clear"],p=new Map;function h(t,n){if(r=t,(null!=(i=IDBDatabase)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i)&&!(n in t)&&"string"==typeof n){var r,i;if(p.get(n))return p.get(n);var a=n.replace(/FromIndex$/,""),o=n!==a,s=l.includes(a);if(a in(o?IDBIndex:IDBObjectStore).prototype&&(s||d.includes(a))){var h,g=(h=function(e){for(var t,n=this,r=n.transaction(e,s?"readwrite":"readonly"),i=r.store,d=arguments.length,l=new Array(d>1?d-1:0),p=1;p<d;p++)l[p-1]=arguments[p];return o&&(i=i.index(l.shift())),f((t=i)[a].apply(t,l),(function(e){return c((function(){if(s)return u(r.done)}),(function(){return e}))}))},function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return e.resolve(h.apply(this,t))}catch(t){return e.reject(t)}});return p.set(n,g),g}}}(0,r.r)((function(e){return a(a({},e),{},{get:function(t,n,r){return h(t,n)||e.get(t,n,r)},has:function(t,n){return!!h(t,n)||e.has(t,n)}})}))}).call(this,n(3).Promise)},function(e,t,n){"use strict";(function(e){function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}Object.defineProperty(t,"__esModule",{value:!0}),t.r=function(e){d=e(d)},t.w=h,t.u=t.i=t.a=void 0;var r,i,a=function(e,t){return t.some((function(t){return n(e,t)}))};t.i=a;var o=new WeakMap,s=new WeakMap,u=new WeakMap,c=new WeakMap,f=new WeakMap;t.a=f;var d={get:function(e,t,r){if(n(e,IDBTransaction)){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return!(!n(e,IDBTransaction)||"done"!==t&&"store"!==t)||t in e}};function l(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),h(o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[g(this),t].concat(r));return u.set(a,t.sort?t.sort():[t]),h(a)}}function p(t){return"function"==typeof t?l(t):(n(t,IDBTransaction)&&function(t){if(!s.has(t)){var n=new e((function(e,n){var r=function(){t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=function(){e(),r()},a=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)}));s.set(t,n)}}(t),a(t,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,d):t)}function h(t){if(n(t,IDBRequest))return r=t,(i=new e((function(e,t){var n=function(){r.removeEventListener("success",i),r.removeEventListener("error",a)},i=function(){e(h(r.result)),n()},a=function(){t(r.error),n()};r.addEventListener("success",i),r.addEventListener("error",a)}))).then((function(e){n(e,IDBCursor)&&o.set(e,r)})).catch((function(){})),f.set(i,r),i;var r,i;if(c.has(t))return c.get(t);var a=p(t);return a!==t&&(c.set(t,a),f.set(a,t)),a}var g=function(e){return f.get(e)};t.u=g}).call(this,n(3).Promise)},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.AESCrypto=void 0;var i=function(){function e(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}return e.prototype.generateKey=function(e){return void 0===e&&(e=!1),this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])},e.prototype.encrypt=function(e,t){var n=r(this._encrypt(e,this.str2bytes(t)),2),i=n[0],a=n[1];return i.then((function(e){var t=new Uint8Array(16+e.byteLength);return t.set(a,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))},e.prototype.decrypt=function(e,t){var n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],i=t.slice(16,16+r);return this._decrypt(e,n,i).then(this.bytes2str)},e.prototype._encrypt=function(e,t){var n=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t),n]},e.prototype._decrypt=function(e,t,n){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n)},e.prototype.str2bytes=function(e){return(new TextEncoder).encode(e).buffer},e.prototype.bytes2str=function(e){return(new TextDecoder).decode(e)},e}();t.AESCrypto=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveTaskQueue=void 0;var r=function(){function e(e){var t=this;this._internals=e,this.queue=[],this.nextNotify=null,e.messages.on("permutive:taskQueue:update",(function(){t.execute()}))}return e.prototype.add=function(e){this.queue.push(e),this.notify()},e.prototype.notify=function(){var e=this,t=function(){e._internals.messages.emit("permutive:taskQueue:update")},n=(new Date).getTime();null===this.nextNotify||this.nextNotify<n-50?(this.nextNotify=n,t()):this.nextNotify<=n&&(this.nextNotify=n+50,window.setTimeout(t,50))},e.prototype.execute=function(){var e=this;if(0!==this.queue.length){for(var t=!1,n=!1,r=0,i=0;i<this.queue.length;i++){var a=this.queue[i];if(a.complete)r+=1;else if(a.started)n=!0,t=t||a.blocks();else{if(a.waits()&&n)break;t||(n=!0,t=t||a.blocks(),a.execute((function(){e.notify()})))}}this.queue.splice(0,r)}},e.prototype.size=function(){return this.queue.length},e}();t.PermutiveTaskQueue=r},function(e,t,n){"use strict";(function(e){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveInternals=void 0;var a=n(51),o=n(52),s=n(53),u=n(19),c=n(54),f=n(55),d=n(56),l=n(57),p=function(){function t(t,n,r,i,p,h,g,m){void 0===r&&(r=[]),void 0===i&&(i={}),void 0===p&&(p=new f.EventHandler),void 0===h&&(h=new s.PermutivePromises),void 0===g&&(g=new d.Events),void 0===m&&(m=new u.GlobalEnricher),this.config=t,this.network=n,this.blockers=r,this.addons=i,this.eventHandler=p,this.promises=h,this.messages=g,this.enrichers=m,this.isReady=!1,this.isRealtime=!1,this.isIdentityReady=!1,this.listenForBlockers=!0,this.sessionManager=new a.SessionManager(this),this.eventsBatch=new l.PermutiveEventsBatch(this),this.api=new o.PermutiveApi(this),this.graphql=new c.GraphQLQuery(this),this.models={getModels:function(){return e.resolve({})}}}return t.prototype.makeSafe=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return e.apply(void 0,i(n))}catch(e){t.network.error(e,t.state.userId)}}},t.prototype.utcNow=function(){var e=new Date;return new Date(e.toUTCString())},t.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.config.loggingEnabled&&window.console&&window.console.log&&(e.splice(0,0,"[Permutive]"),console.log.apply(console,i(e)))},t.prototype.setAsReady=function(){this.isReady=!0,this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{sdk_version:"v9.16.0"}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}})),this.messages.emit("permutive:ready")},t.prototype.setAsRealtime=function(){this.isRealtime=!0,this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{})},t.prototype.setIdentityReady=function(){this.isIdentityReady=!0},t.prototype.addBlocker=function(e){var t=this;this.blockers.push(e),this.log("<blockers> added blocker "+e),this.messages.on(e,(function(){if(t.listenForBlockers){var n=t.blockers.indexOf(e);n>=0&&(t.blockers.splice(n,1),t.log("<blockers> removed blocker "+e)),0===t.blockers.length&&(t.listenForBlockers=!1,t.messages.emit("permutive:blockers:empty"),t.log("<blockers> complete"))}}))},t.prototype.getNamespacedStorageKey=function(e){return""+this.config.stateNamespace+e},t.prototype.setCookie=function(e,t,n){if(void 0===n&&(n=!1),!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain))return!1;var r=this.getNamespacedStorageKey(e);document.cookie=[encodeURIComponent(r),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("")},t.prototype.getCookie=function(e,t){void 0===t&&(t=!1);var n=t?e:this.getNamespacedStorageKey(e),r=new RegExp(encodeURIComponent(n)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null},t.prototype.deleteCookie=function(e){if(!e||!this.config.cookieDomain)return!1;var t=this.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0},t.prototype.getExternalData=function(e){var t=this.getNamespacedStorageKey(e);return localStorage.getItem(t)},t.prototype.setExternalData=function(e,t){var n=this.getNamespacedStorageKey(e);this.makeSafe((function(){localStorage.setItem(n,t)}))()},t.prototype.removeExternalData=function(e){var t=this.getNamespacedStorageKey(e);localStorage.removeItem(t)},t.prototype.arraysEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},t}();t.PermutiveInternals=p}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=void 0;var r=n(4),i=function(){function e(e,t){this._internals=e,(t=t||{}).timeout_seconds=t.timeout_seconds||1800,t.session_data_key=t.session_data_key||"permutive-session",this.options=t,this.session_id=null,this.initialize()}return e.prototype.getSessionId=function(){return this.session_id},e.prototype.newSession=function(e){return{session_id:r.uuidv4(),last_updated:e}},e.prototype.initialize=function(){var e=new Date,t=this._internals.getCookie(this.options.session_data_key),n=this.decodeSessionData(t);if(null===n)n=this.newSession(e);else{var r=this.options.timeout_seconds;e>new Date(n.last_updated.getTime()+1e3*r)?n=this.newSession(e):n.last_updated=e}this.persistSessionData(n),this.session_id=n.session_id},e.prototype.decodeSessionData=function(e){var t=null;try{t=JSON.parse(e)}catch(e){return null}return null!==t&&"object"==typeof t&&t.hasOwnProperty("session_id")&&t.hasOwnProperty("last_updated")&&(t.last_updated=new Date(t.last_updated),!isNaN(t.last_updated.getTime()))?t:null},e.prototype.persistSessionData=function(e){e.last_updated=e.last_updated.toISOString(),this._internals.setCookie(this.options.session_data_key,JSON.stringify(e))},e}();t.SessionManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveApi=void 0;var r={success:function(e){},error:function(e,t){}},i=function(){function e(e){this._internals=e}return e.prototype.identify=function(e,t){var n=this;if(void 0===t&&(t=r),e.forEach((function(e){return n._internals.identities.addAlias(e.id,e.tag)})),this._internals.isIdentityReady){var i=this._internals.identities.currentAliases;this.sendIdentify(this._internals.state.userId,i,t).then((function(e){return n._internals.identities.storeAliases(i)}))}},e.prototype.graphql=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.config.apiProtocol+"://"+this._internals.config.apiHost+"/graphql",method:"POST",success:t.success,error:t.error,data:{query:e},contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)},e.prototype.sendIdentify=function(e,t,n){return void 0===n&&(n=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/identify"),method:"POST",data:{user_id:e,aliases:this._internals.identities.convertAliases(t)},success:n.success,error:n.error,contentType:"text/plain",xhrFields:{withCredentials:!0}},!1)},e.prototype.setUserProperties=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/users/"+this._internals.state.userId+"/properties"),method:"POST",data:{properties:e},success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.metrics=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/internal/metrics"),method:"POST",data:e,contentType:"text/plain",dataType:"text",success:t.success,error:t.error},!1)},e.prototype.track=function(e,t,n){return this._internals.network.req({url:this._internals.network.getEndpointUrl((Array.isArray(e)?"/batch":"")+"/events")+"?enrich="+!!t.includeResponseBody,method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},n)},e.prototype.events=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/events")+"?user_id="+e+(t.from?"&from="+t.from.toISOString():""),method:"GET",success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.tpdUsage=function(e,t){return void 0===t&&(t=r),this._internals.network.req({url:this._internals.network.getEndpointUrl("/tpd/usage"),method:"POST",data:e,success:t.success,error:t.error,contentType:"text/plain"},!1)},e.prototype.reset=function(){return this._internals.network.req({url:this._internals.network.getEndpointUrl("/reset"),method:"POST",xhrFields:{withCredentials:!0},contentType:"text/plain"},!1)},e.prototype.segmentSync=function(e,t){return this._internals.network.ajax({url:"https://"+this._internals.config.segmentSyncApiHost+"/sync/"+e,type:"POST",data:"value="+encodeURIComponent(t),contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0}})},e.prototype.models=function(e){var t="binary"===e?"bin":"json";return this._internals.network.ajax({url:"https://"+this._internals.config.cdnBaseUrl+"/models/"+this._internals.config.projectId+"-models."+t,dataType:e})},e}();t.PermutiveApi=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermutivePromises=void 0;var r=n(4),i=function(){function e(){this.promises={}}return e.prototype.addPromise=function(e,t,n,r){var i=this;e in this.promises||(this.promises[e]={}),this.promises[e][t]=r,window.setTimeout((function(){i.resolvePromise(e,t)}),n)},e.prototype.createPromise=function(e,t,n){this.addPromise(e,t,n,r.deferredPromise())},e.prototype.getPromise=function(e,t){return r.lens(this.promises,e,t)},e.prototype.resolvePromise=function(e,t){var n=this.getPromise(e,t);return void 0!==n?(n.resolve(),n):void 0},e.prototype.getPromisesByCategory=function(e){var t=r.lens(this.promises,e)||{};return Object.keys(t).map((function(e){return t[e]}))},e}();t.PermutivePromises=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLQuery=void 0;var r=n(4),i=function(){function t(e){this._internals=e,this.queries={},this.promises={}}return t.prototype.register=function(e){var t=r.deferredPromise();return this.queries[e.resource]=e.query(),this.promises[e.resource]=t,t.promise},t.prototype.run=function(){var t=this;if(0===Object.keys(this.queries).length)return e.resolve();var n=r.deferredPromise();return this._internals.api.graphql(this.toQueryString(this.queries),{success:function(e){Object.keys(t.promises).forEach((function(n){var r=e.data[n];r?t.promises[n].resolve(r):t.promises[n].reject("Could not find a graphql response for resource "+n)})),n.resolve()},error:function(e){console.error(e),Object.keys(t.promises).forEach((function(e){return t.promises[e].reject()})),n.reject()}}),n.promise},t.prototype.toQueryString=function(e){return"{ "+Object.keys(e).map((function(t){return e[t]})).join(" ")+" }"},t}();t.GraphQLQuery=i}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0;var r=function(){function e(){this.events=[],this.listeners=[]}return e.prototype.newEvent=function(e,t){var n=this;this.events.push([e,t]),this.listeners.forEach((function(r){n.handle(e,t,r)}))},e.prototype.addListener=function(e){var t=this;this.listeners.push(e);var n={replay:function(){return t.replay(e),n},remove:function(){return t.remove(e),n}};return n},e.prototype.handle=function(e,t,n){var r="string"==typeof n.name&&e.name===n.name,i=n.name.test&&n.name.test(e.name),a=r||i;if(a)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}a&&n.once&&this.remove(n)},e.prototype.replay=function(e){for(var t=-1!==this.listeners.indexOf(e),n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)},e.prototype.remove=function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},e}();t.EventHandler=r},function(e,t,n){"use strict";function r(e){var t={},n=[];(e=e||this).on=function(n,r,i){return(t[n]=t[n]||[]).push([r,i]),e},e.off=function(r,i){r||(t={});for(var a=t[r]||n,o=a.length=i?a.length:0;o--;)i==a[o][0]&&a.splice(o,1);return e},e.once=function(t,r){var i=n.slice.call(arguments,2),a=function(){r(i),e.off(t,a)};return e.on(t,a),e},e.emit=function(r){for(var i,a=t[r]||n,o=a.length>0?a.slice(0,a.length):a,s=0;i=o[s++];)i[0].apply(i[1],n.slice.call(arguments,1));return e}}n.r(t),n.d(t,"Events",(function(){return r}))},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveEventsBatch=void 0;var a=n(10),o=n(4),s=function(){function e(e){var t=this;this._internals=e,this.timeoutDuration=500,this.maxWaitTime=5e3,this.requests=[],setInterval((function(){t.requests.length>0&&t.flush()}),this.maxWaitTime),o.onPageUnload((function(){t.requests.length>0&&t.flush(!0)}))}return e.prototype.add=function(e,t,n){this.resetTimeout(),this.requests.push([e,t,n])},e.prototype.flush=function(e){var t=this;void 0===e&&(e=!1);var n=i(this.requests);e||this.trackMetrics(n),this._internals.api.track(n.map((function(e){return e[0]})),{},e).then((function(e){return t.isBatchResponse(e)?t.handleBatchResponse(e,n):null}),(function(e){return t._internals.network.error(e)})).catch((function(e){return t._internals.network.error(e)})),this.requests=[]},e.prototype.handleBatchResponse=function(e,t){var n=this;e.map((function(e){return e.body})).forEach((function(e,r){var i=t.map((function(e){return e[0]}))[r],o=t[r][1],s=t[r][2];a.isEventTrackError(e)?n.handleTrackError(e,i,o.error):n.handleTrackResponse(e,i,o.success,s)}))},e.prototype.handleTrackResponse=function(e,t,n,r){var i=a.deserializeMinimalEvent(e,t);n(i),"never"!==r&&(this._internals.state.eventsCache.addEventIfUnseen(i),this._internals.eventHandler.newEvent(a.serializeEvent(i),null))},e.prototype.handleTrackError=function(e,t,n){var r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,id:null,time:(new Date).toISOString()};n(e.error.message),this._internals.eventHandler.newEvent(r,e),console.error(e)},e.prototype.setTimeout=function(e){var t=this;return window.setTimeout((function(){return t.flush()}),e)},e.prototype.resetTimeout=function(){clearTimeout(this.timeout),this.timeout=this.setTimeout(this.timeoutDuration)},e.prototype.trackMetrics=function(e){this._internals.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this._internals.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e.map((function(e){return e[0]}))).length,labels:{}})},e.prototype.isBatchResponse=function(e){return!!e},e}();t.PermutiveEventsBatch=s},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveMetrics=t.PermutiveMetricsNoOp=void 0;var a=n(4),o=function(){function e(){}return e.prototype.track=function(e){},e.prototype.trackTimeSinceInit=function(e,t){},e.prototype.startTimer=function(e,t){return""},e.prototype.stopTimer=function(e,t){},e}();t.PermutiveMetricsNoOp=o;var s=function(){function e(e,t,n){var r=this;this.sdkInitTimestamp=e,this._internals=t,this.permutive=n,this.sendFrequencyInSeconds=5,this.pendingMetrics=[],this.pendingTimers={},this.permutive.ready((function(){window.setInterval(r.processPending.bind(r),1e3*r.sendFrequencyInSeconds),a.onPageUnload((function(){r.processPending.bind(r)}))})),this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}return e.prototype.track=function(e){this.pendingMetrics.push(e)},e.prototype.trackTimeSinceInit=function(e,t){var n=performance.now();this.track({name:e,value:(n-this.sdkInitTimestamp)/1e3,labels:t})},e.prototype.startTimer=function(e,t){var n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r},e.prototype.stopTimer=function(e,t){var n=this.pendingTimers[t];if(n){var r=performance.now();this.track({name:e,value:(r-n.startTime)/1e3,labels:n.labels}),delete this.pendingTimers[t]}},e.prototype.processPending=function(){this.pendingMetrics.length>0&&(this._internals.api.metrics({context:{environment:"web",events_count:this._internals.state.eventsCache.all().length,segments_count:Object.keys(this._internals.queryManager.queryStateMap).length},items:this.pendingMetrics}),this.pendingMetrics=[])},e.prototype.generateRandomKey=function(e){return e+"-"+i(Array(24)).map((function(){return Math.random().toString(36)[2]})).join("")},e}();t.PermutiveMetrics=s},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveThirdParty=t.providerToIdMap=void 0;var a=n(4),o=n(60),s=n(8);t.providerToIdMap={permutive:"1",eyeota:"2",skimlinks:"4",comscore:"5",eyeota_bombora:"6",eyeota_aimmatic:"7",eyeota_alc:"8",eyeota_amberdata:"9",eyeota_caci:"10",eyeota_corelogic:"11",eyeota_dlg:"12",eyeota_dataxpand:"13",eyeota_dunbradstreet:"14",eyeota_experian:"15",eyeota_gbgtransactis:"16",eyeota_gfk:"17",eyeota_rdaresearch:"18",eyeota_kantarmedia:"19",eyeota_mastercard:"20",eyeota_meritdirect:"21",eyeota_netsprint:"22",eyeota_nri:"23",eyeota_onaudience:"24",eyeota_pacificdatapartners:"25",eyeota_plungedigital:"26",eyeota_roymorgan:"27",eyeota_schober:"28",eyeota_sharethis:"30",eyeota_skimlinks:"31",eyeota_specialists:"32",eyeota_statsocial:"33",eyeota_stirista:"34",eyeota_yougov:"36"};var u=function(){function n(e,t,n){this._internals=e,this.permutive=t,this.network=n;var r=this._internals.state.getPermutiveData("third-party-data");this.userSegments=this.isValidState(r)?r:{},this.lastCheckedSession=this._internals.state.getPermutiveData("third-party-data-session-id")||""}return n.prototype.segments=function(){var t=this;if(this.segmentsPromise)return this.segmentsPromise;var n=this._internals.sessionManager.getSessionId();if(this.lastCheckedSession===n)return e.resolve(this.userSegments);var u=a.deferredPromise();this.lastCheckedSession=n;var c=this._internals.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{}),f=r(r({},this._internals.identities.getIdentities(!0)),this._internals.identities.currentAliases);if(Object.keys(f).length>0){var d=new o.GraphQLTPD(this._internals.state.userId||a.uuidv4(),this._internals.identities.convertAliases(f));this._internals.graphql.register(d).then((function(e){var n=t.graphQLTPDResponseToSegmentMap(e);t.updateCache(n),u.resolve(n)})).catch((function(e){t.network.error("Third Party Data segments retrieval failed with reason: "+e,t._internals.state.userId),u.resolve({})}))}else u.resolve({});var l=this._internals.promises.getPromisesByCategory("tpd"),p=e.all(l.map((function(e){return e.promise}))).then((function(e){return u.promise})).then((function(e){return t.userSegments}));return p.then((function(e){t._internals.state.setPermutiveData("third-party-data-session-id",n),t._internals.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",c);var r=t._internals.state.getPermutiveData("third-party-data");r&&a.eqObject(a.eqObject(s.eqBoolean)).equals(r,e)||(t._internals.state.setPermutiveData("third-party-data",t.userSegments),a.objectEntries(e).forEach((function(e){var n=i(e,2),o=n[0],u=n[1];r&&a.eqObject(s.eqBoolean).equals(r[o],u)||t.fireSegments(o,Object.keys(u))})))})),this.segmentsPromise=p,this.segmentsPromise},n.prototype.addSegments=function(e,t){var n;this.updateCache(((n={})[e]=this.listToSegmentMap(t),n))},n.prototype.getActivationMetadata=function(){var e=this._internals.queryManager.getTpdUsage(),n={},i=function(i){if(e.hasOwnProperty(i)){var a=[],o=r({},e[i]);Object.keys(o).forEach((function(e){o[e].forEach((function(n){a.push([i,t.providerToIdMap[e],n].join("-"))}))})),n[i]=a}};for(var a in e)i(a);return n},n.prototype.updateCache=function(e){this.userSegments=a.mergeObjects(this.userSegments,e)},n.prototype.fireSegments=function(e,t){this.permutive.track("ThirdPartySegments",{data_provider:e,segments:t},{isAnalyticsOnly:!0})},n.prototype.reportUsage=function(){var e=this._internals.queryManager.getTpdUsage(),t=a.hash(JSON.stringify(e));if(this._internals.state.getPermutiveData("third-party-data-usage")!==t&&Object.keys(e).length>0){this._internals.state.setPermutiveData("third-party-data-usage",t);var n={user_id:this._internals.state.userId,time:new Date,tpd_segments:e};this._internals.api.tpdUsage(n)}},n.prototype.graphQLTPDResponseToSegmentMap=function(e){var t=this;return e.identity.tpd.reduce((function(e,n){var i;return r(r({},e),((i={})[n.name]=t.listToSegmentMap(n.segments),i))}),{})},n.prototype.listToSegmentMap=function(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})},n.prototype.isValidState=function(e){return void 0===(null==e?void 0:e.expiry_time)},n}();t.PermutiveThirdParty=u}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLTPD=void 0;var r=function(e,t){var n=this;this.userId=e,this.aliases=t,this.resource="userTPD",this.query=function(){var e=n.aliases.map((function(e){return'{id: "'+e.id+'", tag: "'+e.tag+'", priority: '+e.priority+"}"})).join(",");return'\n      userTPD: user(user_id: "'+n.userId+'") {\n        identity(aliases: ['+e+"]) {\n          tpd {\n            name\n            segments\n          }\n        }\n      }\n    "}};t.GraphQLTPD=r},function(e,t,n){"use strict";(function(e){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.PermutiveMethods=void 0;var a=n(4),o=n(14),s=n(62),u=n(10),c=n(2),f=function(){function t(e,t,n){this._internals=e,this.network=t,this.context=n,this.initialisedAddons=[]}return t.prototype.identify=function(e){var t=this;this._internals.log("<call> identify",e);var n=o.PermutiveIdentities.getAliasesFromIdentifyArg(e),r=a.deferredPromise(),i=n.map((function(e){return e.id})).concat(a.objectEntries(this._internals.identities.currentAliases).map((function(e){return e[1]})));if("string"==typeof e&&o.hasBrokenIdentity("f234822c-0aae-41ce-8843-23538710f825",i,window.location.hostname,this._internals.state.userId))return r.resolve(),r.promise;return this._internals.state.taskQueue.add(new s.Task((function(e){t._internals.log("<task> identify ",n);var i=t._internals.state.userId,a={success:function(a){var o=a.user_id;o!==i?t._internals.state.reset().then((function(){return c.pipe(t._internals.state.setUserId(o),(function(e){return t._internals.state.eventsCache.reset()})).then((function(e){return t._internals.state.eventsCache.getUnseenEvents(new Date(0))})).then((function(e){var n=t._internals.state.eventsCache.processUnseenEvents(e);return t._internals.queryManager.updateSegmentResults(n),t._internals.queryManager.initWorker(n)})).then((function(){e(),r.resolve()}))})).catch((function(n){t.network.error("Error while resetting the SDK, got: "+n,o),e(),r.resolve()})):(t._internals.log("<done> identify ",n),e(),r.resolve())},error:function(){t.network.error("Couldn't set identity for user "+i,i),e(),r.resolve()}};t._internals.api.identify(n,a)}),{wait_prev:!0,block_next:!0})),r.promise},t.prototype.on=function(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!1})},t.prototype.once=function(e,t){return this._internals.eventHandler.addListener({name:e,callback:t,once:!0})},t.prototype.track=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var c=i([n[0],n[1]||{},n[2]||{}],3),f=c[0],l=c[1],p=c[2];this._internals.log("<call> track",f);var h=a.deferredPromise();if(!this._internals.api)return this.network.error("The API hasn't been loaded."),h.reject(),h.promise;var g=!!p.isAnalyticsOnly,m=this._internals.sessionManager.getSessionId(),v=this._internals.state.viewId,_={success:p.success||function(e){},error:p.error||function(e,t){}},y=function(n){t._internals.log("<task> track",f);var o,s=g?null:t._internals.metrics.startTimer("sdk_events_api_roundtrip_seconds",{}),c=g?null:t._internals.metrics.startTimer("sdk_events_overall_processing_seconds",{}),y=i(t._internals.enrichers.enrich([l,!0]),2),b=y[0],w=y[1],k=r(r({},b),{client:t._internals.state.getClient()}),S=d(p,w),P={user_id:t._internals.state.userId,name:f,segments:t._internals.queryManager.userSegments,properties:k,session_id:m,view_id:v},E={name:f,properties:k,session_id:m,view_id:v,time:new Date},I=function(e){var n=t._internals.metrics.startTimer("sdk_events_querylanguage_seconds",{});return t._internals.queryManager.update([e]).then((function(){t._internals.metrics.stopTimer("sdk_events_querylanguage_seconds",n),t._internals.metrics.stopTimer("sdk_events_overall_processing_seconds",c)}))},O=function(n){t._internals.log("Tracking failed with reason",n);var r={name:P.name,session_id:P.session_id,view_id:P.view_id,properties:P.properties,id:null,time:new Date};return e.resolve({event:r,error:n})},q=function(t){var n=u.isFullPermutiveEventJson(t)?u.deserializeEvent(r(r({},t),{session_id:P.session_id,view_id:P.view_id})):u.deserializeMinimalEvent(t,P);return e.resolve({event:n,error:null})},C=function(t){return e.resolve(t.error?_.error(t.error.error.message):_.success(t.event))},M=function(n){return n.error||t._internals.state.eventsCache.addEventIfUnseen(n.event),e.resolve(n)},T=function(n){return t._internals.eventHandler.newEvent(u.serializeEvent(n.event),n.error),e.resolve(n.event)};switch(S){case"immediate":o=a.forP((function(n){var r=i(n,2),a=r[0],o=r[1];return e.all([I(a),t._internals.eventsBatch.add(o,_,S),e.resolve(a)])}),(function(t){var n=i(t,3),r=(n[0],n[1],n[2]);return e.resolve(r)}));break;case"memoryOnly":o=function(e){var t=i(e,2),n=t[0];t[1];return I(n).then((function(e){return n}))};break;case"onResponse":o=a.forP((function(e){var n=i(e,2),r=(n[0],n[1]);return t._internals.api.track(r,{includeResponseBody:!0},!1)}),(function(e){return function(e){return t._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",s),u.isEventTrackError(e)?O(e):q(e)}(e)}),(function(t){return e.all([C(t),M(t),I(t.event),T(t)])}),(function(t){var n=i(t,4),r=(n[0],n[1],n[2],n[3]);return e.resolve(r)}));break;case"deferred":o=a.forP((function(n){var r=i(n,2),a=r[0],o=r[1];return e.all([t._internals.api.track(o,{includeResponseBody:!1},!0),e.resolve(a)])}),(function(e){var t=i(e,2),n=(t[0],t[1]);return T({event:n,error:null})}));break;case"never":o=function(n){var r=i(n,2),a=r[0],o=r[1];return t._internals.eventsBatch.add(o,_,S),e.resolve(a)}}o([E,P]).then((function(r){return h.resolve(r),t._internals.log("<done> track",r.name),n(),e.resolve(r)})).catch((function(e){t._internals.metrics.stopTimer("sdk_events_api_roundtrip_seconds",s),_.error(e),t.network.error(e,t._internals.state.userId)}))};return this._internals.state.taskQueue.add(new s.Task(y)),h.promise},t.prototype.trigger=function(e,t,n){var r=this,i=a.deferredPromise();this._internals.log("<call> trigger",e),this._internals.triggerListeners=this._internals.triggerListeners||[];return this._internals.state.taskQueue.add(new s.Task((function(t){r._internals.log("<task> trigger",e);var a=r._internals.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),i.resolve(t.result))}));r._internals.triggerListeners.push(a),r._internals.log("<done> trigger",e),t()}))),i.promise},t.prototype.query=function(e,t){var n=this,r=a.deferredPromise();this._internals.log("<call> query",e);return this._internals.state.taskQueue.add(new s.Task((function(i){n._internals.log("<task> query",e),n._internals.queryManager.handleResult(e,(function(e){t(e),r.resolve(e)})),n._internals.log("<done> query",e),i()}))),r.promise},t.prototype.segment=function(e,t){var n=this,r=a.deferredPromise();this._internals.log("<call> segment",e);return this._internals.state.taskQueue.add(new s.Task((function(i){n._internals.log("<task> segment",e),n._internals.queryManager.handleResult(e,(function(n){if("boolean"!=typeof n.result)throw new Error("Segment "+e+" is missing boolean result property");t(n.result),r.resolve(n.result)})),n._internals.log("<done> segment",e),i()}))),r.promise},t.prototype.segments=function(e,t){var n=this;void 0===t&&(t="all");var r=a.deferredPromise();this._internals.log("<call> segments");return this._internals.state.taskQueue.add(new s.Task((function(i){n._internals.log("<task> segments ("+t+")");var a=function(a){e(a),r.resolve(a),n._internals.log("<done> segments ("+t+")"),i()};"dfp"===t?void 0!==n._internals.addons.dfp&&n._internals.addons.dfp.isReady?a(n._internals.addons.dfp.liveSegments):n._internals.messages.once("permutive:dfp:ready",(function(){a(n._internals.addons.dfp.liveSegments)})):a(n._internals.queryManager.userSegments)}))),r.promise},t.prototype.reset=function(){var t=this;return e.all([this._internals.state.reset(),this._internals.api.reset()]).then((function(e){var n=i(e,2),r=(n[0],n[1]);t._internals.state.setUserId(r.id),t._internals.state.eventsCache.reset(),t._internals.messages.emit("permutive:reset")}))},t.prototype.addon=function(t,i){var a=this;if(-1===this.initialisedAddons.indexOf(t)){this.initialisedAddons.push(t);var o=r(r({},i),{_internals:this._internals,permutive:this,network:this.network,context:this.context});switch(t){case"web":e.resolve().then((function(){return n(20)})).then((function(e){return a._internals.addons.web=new e.WebAddon(o)}));break;case"publishers":0;break;case"overlays":e.resolve().then((function(){return n(21)})).then((function(e){return a._internals.addons.overlays=new e.OverlaysAddon(o)}));break;case"scriptrunner":e.resolve().then((function(){return n(22)})).then((function(e){return a._internals.addons.scriptrunner=new e.ScriptRunnerAddon(o)}));break;case"dfp":e.resolve().then((function(){return n(23)})).then((function(e){return a._internals.addons.dfp=new e.DFPAddon(o)}));break;case"smart":case"nativo":case"freewheel":case"gigya":case"facebook_pixel":case"facebook_pixel_v2":case"eyeota_pixel":case"pubmatic":case"tradedesk":case"dbm":case"rubicon":0;break;case"rubicon_ssp":e.resolve().then((function(){return n(24)})).then((function(e){return a._internals.addons.rubicon_ssp=new e.RubiconSspAddon(o)}));break;case"aol":case"lotame":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus":0;break;case"appnexus_adserver":e.resolve().then((function(){return n(25)})).then((function(e){return a._internals.addons.appnexus_adserver=new e.AppNexusAdServerAddon(o)}));break;case"prebid":e.resolve().then((function(){return n(26)})).then((function(e){return a._internals.addons.prebid=new e.PrebidAddon(o)}))}}else"web"===t&&!0!==i.auto_init&&this._internals.addons[t].reset(i)},t.prototype.ready=function(e,t){void 0===t&&(t="initialised");var n=a.deferredPromise(),r=function(){e(),n.resolve()};switch(t){case"initialised":this._internals.isReady?r():this._internals.messages.on("permutive:ready",r);break;case"realtime":this._internals.isRealtime?r():this._internals.messages.once("permutive:ready",r)}return n.promise},t}();function d(e,t){return e.isMemoryOnly?"memoryOnly":e.useBeacon?"deferred":e.isAnalyticsOnly?"never":t?"immediate":"onResponse"}t.PermutiveMethods=f}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Task=void 0;var r=function(){function e(e,t){void 0===t&&(t={}),this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.description=t.description||"",this.started=!1,this.complete=!1,this.task=e}return e.prototype.waits=function(){return this.wait_prev},e.prototype.blocks=function(){return this.block_next},e.prototype.execute=function(e){var t=this;this.started=!0,this.task((function(){t.complete=!0,e()}))},e}();t.Task=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLIdentify=void 0;var r=n(14),i=function(e,t){var n=this;this.userId=e,this.aliases=t,this.resource="userIdentify",this.query=function(){var e=n.aliases.map((function(e){return'{id: "'+e.id+'", tag: "'+e.tag+'", priority: '+e.priority+"}"})).join(",");return r.hasBrokenIdentity("f234822c-0aae-41ce-8843-23538710f825",n.aliases.map((function(e){return e.id})),window.location.hostname,n.userId)?"":'\n      userIdentify: user(user_id: "'+n.userId+'") {\n        identity(aliases: ['+e+"]) {\n          identify {\n            id\n          }\n        }\n      }\n    "}};t.GraphQLIdentify=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLEvents=void 0;var r=function(e,t){var n=this;this.userId=e,this.from=t,this.resource="userEvents",this.query=function(){return'\n      userEvents: user(user_id: "'+n.userId+'") {\n        events(from: "'+n.from.toISOString()+'") {\n          id\n          name\n          time\n          session_id\n          view_id\n          properties\n        }\n      }\n    '}};t.GraphQLEvents=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.make=t.PERMUTIVE_CONFIG=void 0;var r,i=n(4);t.PERMUTIVE_CONFIG={default:{environment:"default",projectId:"",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",apiVersion:"v2.0",apiProtocol:"https",loggingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+function(e){var t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if((null==n?void 0:n.length)>0){var i=e.split(".").reverse();return i.length>=3&&i[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?i[2]+"."+i[1]+"."+i[0]:i[1]+"."+i[0]}return(null==t?void 0:t.length)>0?t[0]:(null==r?void 0:r.length)>0?"localhost":""}(window.location.hostname),cookieName:"permutive-id",cookieExpiry:(r=new Date,r.setFullYear(r.getFullYear()+3),r.toUTCString()),permutiveDataKey:"permutive-data",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:10,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"f234822c-0aae-41ce-8843-23538710f825.partner.permutive.app",consentRequired:!1},production:{},development:{apiProtocol:"http",loggingEnabled:!0,sendClientErrors:!1}},t.make=function(e){return i.mergeObjects(t.PERMUTIVE_CONFIG.default,t.PERMUTIVE_CONFIG[e.environment]||{},e)}},function(e,t,n){"use strict";(function(e){var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryManager=void 0;var i=n(4),a=n(67);function o(e){return"SegmentEntry"===e.name}var s=function(){function t(e,t,n){var r=this;this._internals=e,this.permutive=t,this.network=n,this.initialised=!1,this.stateChangeQueue=[],this.CACHED_SEGMENTS_STORAGE_KEY="_psegs",this.queryMetadata={36649:["0c8b70cdb7",["s"],"e97793c3-7cae-4fdc-9126-1f8575fa285b"],37181:["d2051fab3e",["s"],"81e00df3-a043-441c-93bb-5fb45d674e02"],37201:["8abe30028f",["s"],"4b79023e-686a-4050-a40b-38affae614b2"],37202:["5f5ec7eb1e",["s"],"1c37ed55-8cfb-4729-80d9-beeaf1701882"],37203:["307c5989b5",["s"],"dc5965aa-56bb-4079-a2f2-d7bcf109d779"],37204:["7b7c07a583",["s"],"01dc5093-8cf9-420e-a4f0-6ba52087b51a"],37205:["b99e5fb8a5",["s"],"c7e64d27-37c2-47ab-9824-aa9d1cb73f30"],37206:["6617571b61",["s"],"b6dce158-8d7e-45df-8354-6b7651aa773f"],37207:["2f54d4285e",["s"],"95d1f6d2-652c-427a-af9c-a2511b77d6bb"],37208:["32ce649b08",["s"],"a588f4bb-5764-4f54-bead-d98f57557d88"],37209:["faffd3c816",["s"],"26c0e83a-4c0e-43d2-b51e-bdb384a891bd"],37210:["b5b2f37729",["s"],"23c45a2e-caab-4c45-930c-3fbe7bd094c6"],37211:["171f090d0b",["s"],"df1e7dbc-037d-4679-bc96-e7f09049d88a"],37212:["da4db264d1",["s"],"bf984cd5-1e92-4a6f-a83b-7d007d3f4615"],37213:["d7db0eb2ac",["s"],"f2420e83-d397-44df-a070-531b2a8a60d7"],37214:["9a1ac53d53",["s"],"3a25ac77-ba17-4b94-9990-0c71cc6db692"],37215:["9ca80dbd24",["s"],"f65edaf3-0c01-423b-a4d9-917d65c9ae6f"],37216:["a5d39c4f0b",["s"],"016e6c3c-b464-4f32-9d3b-e07fa3b12c89"],37217:["d904bb078c",["s"],"1c96f5a2-1521-4cbc-8e07-11134d31eb52"],37218:["3135bfecd9",["s"],"475abc2a-ccf9-43e7-93b3-fa06441a6893"],37219:["32e458ec00",["s"],"c1849be5-7eee-4bd6-8f2e-450c8c10b838"],37220:["a073543d5b",["s"],"35aee802-2fde-486c-8bb6-3560b1d386e0"],37221:["cb6c793079",["s"],"234d3b0d-8b87-4ddc-95ea-0e39186b2117"],37222:["70331cd505",["s"],"7e7a0ad1-bde2-4ed9-acc6-2ce630dd01b0"],37223:["85fabda928",["s"],"159432cd-cd7e-4194-a410-fb9272913b36"],37224:["167b271b6c",["s"],"cd7faa0f-9811-45a3-9d81-405aad655e8d"],37225:["6a274ed324",["s"],"af045064-28a8-48f9-93bb-149e2ac2f68a"],37226:["86c27b9732",["s"],"6d57ec7d-885a-4890-a7bf-fa6766baaa84"],37227:["b1225b00b7",["s"],"869b5cff-9b2c-4ef0-885c-6a4da8539958"],37228:["c6fb1f73d4",["s"],"3d6e4451-5aa7-41c3-b249-02e767af1a95"],37229:["47cd15bc9d",["s"],"c7aa8d1b-893a-47c0-8cb1-a946a4e0dddf"],37230:["53d0776389",["s"],"623c5088-d2aa-43b9-b18b-4695886ee4b9"],37231:["1800f8965e",["s"],"1073ebf2-d890-4074-a46d-9bfbd66cfe05"],37232:["c3c90e5584",["s"],"7476ab5a-43db-46a9-9d70-25864481d3f0"],37233:["b0ca0b7b62",["s"],"90b1b2a6-29ee-4a84-84ab-f43ba66694f4"],37234:["3237b0669b",["s"],"3f54efb8-c682-49aa-91bc-7e5324da5be2"],37235:["2795c2dcae",["s"],"6e93475a-8d05-42c3-91f9-49fecb5ca361"],37236:["c3e0b5c8c8",["s"],"07a42e00-a956-4f2d-ab38-f1527a98e60d"],37237:["61f061dee8",["s"],"d17ae8e9-64ed-467a-8d7d-33199fc79632"],37238:["6082b881b1",["s"],"2f45dd8e-5b74-40ea-825d-8c53d8e3ade9"],37239:["f211019632",["s"],"e953119e-7682-436e-b2de-afcf7d596ec4"],37240:["3465931094",["s"],"080105c2-7a62-4232-9dc4-1fd49b25ab4e"],37241:["df7de897bf",["s"],"fe23dce5-3fff-4696-b9a6-e3d9fda8a254"],37242:["addb1dd616",["s"],"bed93c89-8599-4658-9f04-24960e44dcd5"],37243:["924c44584f",["s"],"94fb8680-f4fa-49dd-8b9e-f40a1bad6bce"],37244:["508bebad78",["s"],"899c4665-f2a0-47d0-b008-3a4e83a86d5e"],37245:["49ee85c367",["s"],"9bde96f1-937f-4c96-af7a-90d24138047c"],37246:["ad8082578d",["s"],"02519c16-04aa-4229-9379-d39232b03c8e"],37247:["9cb269cd37",["s"],"1452a0ea-7780-4146-83d6-ca8ca2f772b1"],37248:["a78418c3be",["s"],"c2730601-0d90-480c-b514-db556637ef6d"],37249:["d453edfbc4",["s"],"cc6dceeb-a70b-4568-aa13-429f6e3e0f25"],37250:["9a983a2bba",["s"],"f3aa9961-bf5f-4c3a-855e-047d68e2db5d"],37251:["b1101376ad",["s"],"b1daa175-18ba-414f-aa8e-c4291ace2a16"],37252:["ac27be79ac",["s"],"c6133273-dbf4-4e67-b331-6ed5c40834d5"],37253:["e46684d8dd",["s"],"d69a976d-8a94-4f59-8762-4f605eff7cf4"],37254:["8c81decb6f",["s"],"8803da10-0075-4c5c-86b9-b0f9354bf3ab"],37255:["69b56af347",["s"],"fddc2e23-f4f6-488d-918e-6c8a0e5fa497"],37256:["de692104e6",["s"],"ae872d13-d787-42d4-b3a6-0d27b2b410c0"],37257:["0ed3fee5d5",["s"],"ab2a5ccb-a6ff-4dec-ad45-235aa642634d"],37258:["5c686beaff",["s"],"0f1286ba-3567-46c4-8383-3ce191c9a09f"],37259:["ae64673ef9",["s"],"034f0011-ad02-42f7-a88b-fc5a434a087c"],37260:["5ac8434729",["s"],"9eebae90-9729-4722-8758-9d99e74e5c5e"],37261:["9048e2585e",["s"],"76466dd7-80b0-40cd-a589-5531e7122b2d"],37262:["1debb281a7",["s"],"e616e507-1d77-43dc-a4ff-f7ad1b2ef09f"],37263:["14db0bbd11",["s"],"c52fb8a3-b3ba-400a-a708-a3b9bf0f5698"],37264:["d1d74fe768",["s"],"1ce56e2b-8c13-4e7e-857b-c5f182440c48"],37265:["3d2de800d9",["s"],"9b0dfdcd-8b3c-478d-b961-4b6eee5123d3"],37266:["8179d2ca33",["s"],"ca574c08-2a9d-4365-b828-cd97116603b6"],37267:["2bdd2e6649",["s"],"a971d4ac-72e6-4843-8d28-a9a7da3ce0eb"],37268:["ad2309966c",["s"],"42a731d5-b4bc-401f-83ae-1a1d05ddfedb"],37269:["678edf1fbd",["s"],"f8d574a6-5704-45c2-b445-9ec8d91ac60b"],37270:["43cea0e4c8",["s"],"628dab62-3d36-43d6-8c0a-f6582c12e699"],37271:["1ffb7fb4d3",["s"],"04d91d01-1c9b-41ce-a87c-3018d1261c28"],37272:["32e8bba969",["s"],"ff3e32d3-edf1-44a5-86f7-887b223b3806"],37273:["eaec3656be",["s"],"d29cd6a1-010a-47a3-a0a9-cea7e3c85eba"],37274:["2327b57bd9",["s"],"6ce040d8-64e7-4baa-bf47-b447f3c6a7b7"],37275:["3b8b4556b0",["s"],"4a55b184-c90c-408e-8db6-c6f986de261b"],37276:["685801b122",["s"],"9f15bdeb-5d18-4567-b004-4d729d33616f"],37277:["5e62eb0336",["s"],"a97e5190-f5d8-4523-8bd1-792e366ac012"],37278:["4bb081bbc2",["s"],"5b02c0f0-e4b6-4f19-9f5f-cd6972dc64ac"],37279:["3074dfffeb",["s"],"4b783a58-d406-4fe6-ba42-c9e4e60a5d79"],37280:["143ba394dd",["s"],"0bf8d682-4169-4d21-adc1-d63bc6a75041"],37281:["21e3ae4a01",["s"],"321f1623-dc02-4c24-9726-a572a96716a1"],37282:["4dfbb428bd",["s"],"741b6174-1f1f-4b33-914c-b179f12e8d35"],37283:["537ddcb7ce",["s"],"5d5d8846-be57-42b4-89d9-d1cffe92d24b"],37284:["6749ec235e",["s"],"2bc476c5-d5b0-4fee-95eb-c68bd6b7251c"],37285:["c60aa3427d",["s"],"3fab7ee5-bacf-491a-91bb-95e03b9d4447"],37286:["e08b8b7441",["s"],"b3b5ba0e-127f-4bc2-bb97-01b256077264"],37287:["ec9048b5ae",["s"],"9e006837-1df3-4da5-8938-898b1d75bed0"],37288:["e498f38fc1",["s"],"04595054-a45c-47ba-a846-c7af424ae524"],37289:["603d7f1c75",["s"],"74590817-712f-4446-a6a2-1a16d373cf0b"],39163:["0c8b70cdb7",["s"],"a19a52e0-0656-42f6-9415-9a7f4dcf8fd6"],39395:["498fea58f2",["s"],"af614cea-b6d4-4239-9c76-b7397534411c"],39396:["d03e0894eb",["s"],"643c4284-1616-4ab8-a364-474433a8ba72"],39398:["c753315af2",["s"],"c0073347-74bb-4d9a-88e1-26a08fb51964"],39550:["f10651907d",["s"],"7b535c85-2731-41cc-9512-bd83ccc7da6a"],39556:["839b89856b",["s"],"15ff9430-3851-433b-93cc-89b96a850e0b"],39557:["70892e4337",["s"],"d83e4355-df31-4b12-920d-a5b2fb535a07"],39647:["554b06f25d",["s"],"75cd3628-0484-48b0-a533-5fbf6a521938"],39652:["4df458cd74",["s"],"1940780a-9ccd-4810-862b-7a4ef3ed9d3d"],39653:["123c13fb6c",["s"],"4b09498c-1e1b-4222-8691-fb381cf3b1a3"],39654:["1ead83d71d",["s"],"d6b57dbd-60ac-4cee-900e-9219cd412db7"],39655:["55a1e36a17",["s"],"f2a9ebbc-1010-4ba2-979d-d63bccdb9e4b"],39656:["42ff7f7ec5",["s"],"4902dab9-9e95-4572-8a3b-e29a05ee76e5"],39657:["cdb364c89e",["s"],"fc930d0b-4b42-4d1c-895a-1a8ee9083c1b"],39662:["1c45811ab3",["s"],"fbc9cb85-cd43-4d73-afb8-d970f4456f47"],39665:["4cb5c5774d",["s"],"9e11c57e-da9f-4af4-bc72-9755ab3014fb"],39671:["f05426ea9a",["s"],"58f027e0-530e-41b6-b4d1-9870768d6bda"],39672:["4ae0b41bee",["s"],"b4287d38-f18e-472a-8112-2daaad953d14"],39673:["8c5dc58d30",["s"],"b384cabe-fe16-4ee8-9cc6-17960ac8109b"],39674:["89c235975b",["s"],"61a49656-30be-42f6-92de-a3cf95c2b436"],39677:["8fbd5c8d94",["s"],"3a121e7a-4c6b-4ad0-b2cb-87946b9867fd"],39678:["d9ae3539f1",["s"],"5d1973bd-da11-4e17-813a-12cbc573fa91"],39679:["63b645c709",["s"],"f4ea24f7-c926-409d-a19d-4d00d5f73f7a"],39680:["3584d5ffa6",["s"],"a8d6992c-095a-4584-a00a-0ea1fd1468f1"],39681:["12dbc3b469",["s"],"95c3db80-538c-44b2-a804-5f13eb4a9777"],39682:["a11e52e138",["s"],"5281af97-eb65-4fbf-b42c-0b6e3bae1ec8"],39683:["43cc10594d",["s"],"27f5b4d3-de5f-46f9-958c-796c221b0a0c"],39684:["0743ed494d",["s"],"a406e055-a97f-4ca0-adc5-f1c76294ee82"],39685:["2ced1b688a",["s"],"2a6596e8-eeed-49ad-aee3-c4965d8c61fb"],39686:["eefcb1cf0f",["s"],"96113cf1-3e56-4f54-8475-1f63fdc22acd"],39775:["85aa6e3898",["s"],"7d244c21-3f79-4e88-8854-b7f867dda46b"],39776:["a0e29fb410",["s"],"4ae787f2-5056-4798-bb80-b8d207ca5330"],39778:["68a676b64c",["s"],"9d73c156-b40c-40f3-8481-a33a3ddb674a"],39780:["e3a83944aa",["s"],"866db8e9-3a6a-430e-bc19-99fde9e45967"],39783:["966da5901a",["s"],"cd4e2aee-2ce2-4851-b610-9258a0759aff"],39785:["e0221f84e5",["s"],"8cef8171-5631-4711-982a-89aab5c88cfc"],39786:["6104008c4c",["s"],"7e790ca9-48ae-4753-9102-8d72bc5d781f"],39787:["6151a5ae6a",["s"],"d14e6760-6280-45e2-ac5b-5d54806fc626"],39798:["0c55ca48bb",["s"],"62e5a664-7d48-4132-ba34-d936c0c2e355"],39799:["1813709f3e",["s"],"950c6b87-919f-445d-8ba0-91f41c9d5638"],39802:["89279a1649",["s"],"28e2b821-a583-4445-8889-f014c65bf4e0"],39803:["b62d0fcf48",["s"],"b4776707-0835-4260-b438-515cfc3e2ee9"],39804:["0adb848f97",["s"],"ce5b467b-18a4-4af4-a5f2-b3e4cfb92baa"],39805:["c46f336832",["s"],"ede7a7f3-5c31-442d-9c3d-a371c6611b25"],39807:["c755e368b0",["s"],"45d750ef-8b9a-427d-a349-c25b5370eb55"],39809:["575bdbe9e4",["s"],"90b7e8f3-f670-46d2-9aa4-0dff90882adc"],39810:["df30d0f663",["s"],"e08897bf-9327-4a39-958f-78e9678a543d"],39811:["0e778aa67f",["s"],"a85b285c-54af-4d9a-aa41-696821008131"],39812:["70f8ac34d0",["s"],"f56253e9-1f7e-4caa-b41c-5a7fb6db17cc"],39814:["36b9af1638",["s"],"ba4c610c-0a80-4467-9a3b-4afa9a7fa718"],39815:["901d4197e5",["s"],"c45413c0-25d8-49f5-b006-3425d996437d"],39816:["7c2dc14099",["s"],"114e7e3c-0f06-4875-a44e-e32d03e8701a"],39817:["1c8d91f95a",["s"],"424f2304-dc90-4c77-a8cf-58c6e42e507b"],39818:["0f3da338d7",["s"],"053efb72-bc9b-45f3-954a-31158cb47bd3"],39819:["a6669de517",["s"],"73857415-22b6-4666-ba2f-8a7615ca16aa"],39820:["7c15d57e4b",["s"],"d65806bf-7c70-4afc-b68f-6ab80d287a19"],39821:["5bb56ecef4",["s"],"c65a8770-2437-4389-8c14-d667378f86ee"],40127:["5aa18d2490",["s"],"340f0492-3341-4944-94c3-63fa15248443"],40137:["19cfe13201",["s"],"49761239-3595-4222-834c-d6bcad021fe7"],40138:["92d2b22759",["s"],"e8297292-65a6-49d4-8a7d-42cddede43b8"],40139:["8873cef5c4",["s"],"9e00dfac-da42-49c1-8f95-6f12428d1cb3"],40140:["ae1ff3856f",["s"],"07a7b154-6419-4e9b-882d-451de43e8ea9"],40141:["309defc99a",["s"],"df8af1ce-9da7-43ae-90eb-a8042fbf2c90"],40142:["a544e7527e",["s"],"a9a373c8-810a-48e5-98df-88e3aad8d364"],40143:["47b82dc658",["s"],"82f6a5af-acca-4a41-963a-f3957a130f81"],40144:["0a60622c93",["s"],"f87023b5-6e97-4720-a650-464fee9576fe"],40145:["ad71c62ff4",["s"],"f1bd8468-e705-4d49-8b9d-df1bde9c1c40"],40146:["7dfce82b72",["s"],"62b978ed-09a0-4101-8f56-e0cf10a4c801"],40147:["4cacd9ab9f",["s"],"66205132-88b3-45b4-b142-702734461bf7"],40148:["a1d4a19916",["s"],"0c1300d4-186b-4b7e-a2a4-1b33ffec67d9"],40149:["ce52c83d3c",["s"],"07c497a0-7271-421b-b507-7fc38f4eedfe"],40150:["2b8d58c004",["s"],"82680b94-fc75-4720-86f1-43068b5a455a"],40151:["1db8fc575e",["s"],"637213ed-1a6e-4c6b-9a01-701e65430fef"],40152:["c7da06add2",["s"],"9b5312e3-843d-4ceb-8edc-9e72cb1ed20c"],40153:["8ddb53cc6c",["s"],"dd77e5ff-8b4c-4ab2-8db8-88bcdb86f806"],40154:["156e656af1",["s"],"69cac0ad-3ad8-482a-aab5-86683eae35bb"],40155:["9dd9f530fa",["s"],"c787476b-32de-43a4-ab5f-217ebd290036"],40156:["17de3b710f",["s"],"95cbd90b-cf91-40cb-9f46-e2f1ad351c03"],40157:["09d758ca8f",["s"],"afcd9e92-ade2-42a3-ad18-97e63f66a525"],40158:["8b7e554dce",["s"],"f50af46b-b921-496d-82f5-557e217d9b4d"],40159:["d32ff1e210",["s"],"88cf38f6-8058-41d8-a30e-f09ed15f5f68"],40160:["64e96ea952",["s"],"9229d9e5-695a-4299-aa4d-11ed6da6f285"],40161:["9d1c72c761",["s"],"2b73cccd-5634-4dea-abd7-c3943d1f00f1"],40162:["311d673db7",["s"],"31c1a8ca-80d7-43e4-9803-bf20bf647416"],40163:["6971a1bfcd",["s"],"6573f990-3d5c-4d9c-883f-5f9b62f4ac9f"],40164:["057b4ed937",["s"],"393048ac-3b9c-4357-b115-ee985e998dba"],40165:["861be9f686",["s"],"5bd6a671-3a3a-4797-bcd2-a0673f45fb0a"],40166:["d5ac404abf",["s"],"e218a032-1b34-430b-93b3-d56ff0a506b9"],40167:["dd299964e7",["s"],"e5374199-b00e-48b4-9ef9-0046fb548d7f"],40168:["ed459666a7",["s"],"d4e0213e-02d2-4091-8e7f-61d8f1155149"],40169:["803d239867",["s"],"61295a6e-a2b3-4e25-8259-2d95fff4160f"],40170:["1434fa5976",["s"],"a8bc9ca7-0e49-4d8e-ba8c-f5ea925b3a62"],40171:["fae77340e0",["s"],"c8a21673-dfa0-49cf-83b3-7114c27f43c1"],40172:["6af8941285",["s"],"7696bf55-b257-4b6a-a870-b301c9d954e3"],40173:["c39dd33603",["s"],"d592163a-6895-42df-b4a3-789d12e0d79d"],40174:["c8824c924f",["s"],"926a85ea-1268-47e5-9eeb-dd076c7cdf54"],40175:["03f3c9d6d2",["s"],"bb5d8fff-5851-4bb3-b6ed-a49e99dbb03c"],40176:["6c3856f306",["s"],"f967e38a-be69-442f-a184-034e466be694"],40177:["9f3c6323f7",["s"],"ac906b1d-9f8f-448e-8fb4-9d8efc79ac40"],40178:["46eb3e7b21",["s"],"e31fe688-d905-4113-9ede-28ff96e7a281"],40179:["dd96ce348b",["s"],"afb2918b-9f83-4b22-83b3-f8e966a4c6a9"],40180:["56c72178d5",["s"],"5d152628-70fc-4e88-a51b-ca71ab78dc46"],40181:["361193cdbb",["s"],"5a71e9fe-e9cf-4d56-8c88-3f229e9025a4"],40182:["52d5dd9339",["s"],"f2dd00dd-a792-496f-80dd-4b09588e9469"],40183:["20294e05b4",["s"],"ce60d96d-a76a-4a3e-a2fa-cc04c2e22d51"],40184:["c5dc9e4baa",["s"],"9599ebac-88d3-426a-84f2-49ee0803e858"],40185:["e7e0b66cc6",["s"],"47110409-0213-4bc3-a769-8dc203d3eb59"],40186:["ab13bad978",["s"],"0fb5f2bc-e7be-4bff-b941-efd5c4f2af46"],40187:["8261e5e41d",["s"],"3eaecea2-9a48-4044-adde-ea74b4f2d8fa"],40188:["6363ce21fd",["s"],"ede783fe-4732-4fb7-a0ac-783807ae18e7"],40189:["63218053a6",["s"],"532f714a-1009-4a51-ab61-c130f32855c0"],40387:["a1c6c1b0c8",["s"],"53d097ee-476a-4190-8e15-572210824411"],40388:["9ac5697fd9",["s"],"7ea2a4f6-4a55-4539-8c64-b5ade0ac4e95"]},this.userSegments=[],this.userSegmentsDict={},this.queryStateMap={},this.globalMsgId=0,this.resolves={},this.readSegmentCache(),this.readQueryStateCache(),this.handlers={complete:function(e){var t=r.resolves[e];t&&t(),delete r.resolves[e]},errors:function(e){e.forEach((function(e){r.network.error("QL error. "+e.error+" in query "+e.identifier+" with event "+e.event_id,r._internals.state.userId)}))},stateChange:function(e){if(!r.initialised)return r.stateChangeQueue.push(e);for(var t in e)if(e.hasOwnProperty(t)){var n=parseInt(t),a=e[n];if(a.is_segment){var o=n in r.userSegmentsDict,s=a.result.result;if(o===s)continue;s?r.addSegment(n):r.removeSegment(n),r.trackSegmentTransition(s,a.id,n)}else{var u=r.queryStateMap[n]||{result:{}};if(JSON.stringify(u.result)===JSON.stringify(a.result))continue}r._internals.messages.emit("permutive:query:changed",{queryCode:n,result:a.result})}Object.keys(e).length>0&&(r.queryStateMap=i.mergeObjects(r.queryStateMap,e),r.writeSegmentCache(),r.writeQueryStateCache()),r._internals.messages.emit("permutive:segments:updated")}};var o=new Blob([("("+a.QueryWorker+")();").replace('"use strict";',"")],{type:"application/javascript"});this.worker=new Worker(URL.createObjectURL(o)),this.worker.onmessage=function(e){switch(e.data.type){case"stateChange":return r.handlers.stateChange(e.data.args);case"errors":return r.handlers.errors(e.data.args);case"complete":return r.handlers.complete(e.data.args)}},this.worker.onerror=function(e){e.preventDefault(),r.network.error("WebWorker error: "+e.message,r._internals.state.userId)}}return t.prototype.initWorker=function(e){return this.sendMessage({type:"init",args:[this.queryMetadata,this.queryStateMap,{segments:{"1p":this.userSegmentsDict},sessionId:this._internals.sessionManager.getSessionId(),viewId:this._internals.state.viewId,lookalikeModels:{}},e]})},t.prototype.updateEnvironment=function(e){return this.sendMessage({type:"updateEnvironment",args:[e]})},t.prototype.updateWithHistoricSegments=function(t){return 0===t.length?e.resolve():(this.updateSegmentResults(t),this.sendMessage({type:"processEvents",args:[t]}))},t.prototype.update=function(e){var t=this,n=this.sendMessage({type:"processEvents",args:[e]});return!this._internals.isRealtime&&e.filter((function(e){return"Pageview"===e.name})).length>0&&n.then((function(){t._internals.setAsRealtime()})),n},t.prototype.updateSegmentResults=function(e){var t=this;if(0!==e.length){var n=this.calculateHistoricSegments(e);this._internals.log("New segment states",n),Object.keys(n).forEach((function(e){var r=parseInt(e);n[r]?t.addSegment(r):t.removeSegment(r)})),Object.keys(n).length>0&&this.writeSegmentCache()}},t.prototype.handleResult=function(e,t){e in this.queryStateMap&&t(this.queryStateMap[e].result)},t.prototype.getTpdUsage=function(){for(var e={},t=Object.keys(this.queryStateMap),n=t.length,i=0;i<n;i++){var a=t[i],o=this.queryStateMap[a],s=o.activations;r(o,["activations"]);Object.keys(s).length>0&&(e[a]=s)}return e},t.prototype.reset=function(){this.clearSegmentCache(),this.clearQueryStateCache(),this.userSegments=[],this.userSegmentsDict={},this.queryStateMap={}},t.prototype.setAsReady=function(){this.initialised=!0,this.processStateChangeQueue(),this._internals.messages.emit("permutive:queries:initialised")},t.prototype.getStateSizeInBytes=function(){return 2*JSON.stringify(this.queryStateMap).length},t.prototype.processStateChangeQueue=function(){this._internals.log("state change queue",this.stateChangeQueue);var e=this.stateChangeQueue.reduce((function(e,t){return i.mergeObjects(e,t)}),{});this.stateChangeQueue=[],this._internals.log("final state",e),this.handlers.stateChange(e)},t.prototype.sendMessage=function(t){var n=this,r=this.globalMsgId++;return new e((function(e){n.resolves[r]=e,t.msgId=r,n.worker.postMessage(t)}))},t.prototype.addSegment=function(e){this.userSegmentsDict[e]||(this.userSegments.push(e),this.userSegmentsDict[e]=!0,this.updateQlEffectsSegments())},t.prototype.removeSegment=function(e){if(e in this.userSegmentsDict){delete this.userSegmentsDict[e];var t=this.userSegments.indexOf(e);t>-1&&this.userSegments.splice(t,1),this.updateQlEffectsSegments()}},t.prototype.updateQlEffectsSegments=function(){var e=this;this._internals.thirdParty.segments().then((function(t){e.updateEnvironment({segments:i.mergeObjects({"1p":e.userSegmentsDict},t)})}))},t.prototype.calculateHistoricSegments=function(e){for(var t,n={},r=0;r<e.length;r++){var i=e[r];("SegmentEntry"===(t=i).name||"SegmentExit"===t.name)&&(n[i.properties.segment_number]=o(i))}return n},t.prototype.trackSegmentTransition=function(e,t,n){var r=e?"SegmentEntry":"SegmentExit",i={segment_id:t,segment_number:n};this.permutive.track(r,i)},t.prototype.writeSegmentCache=function(){this._internals.log("Writing segment cache");var e=JSON.stringify(this.userSegments);this._internals.setExternalData(this.CACHED_SEGMENTS_STORAGE_KEY,e)},t.prototype.readSegmentCache=function(){var e=this,t=this._internals.getExternalData(this.CACHED_SEGMENTS_STORAGE_KEY);t&&(this.userSegments=this.filterActiveSegments(JSON.parse(t)),this.userSegments.forEach((function(t){e.userSegmentsDict[t]=!0}))),this._internals.log("Read segment cache",this.userSegments)},t.prototype.filterActiveSegments=function(e){var t=this;return e.filter((function(e){return e in t.queryMetadata}))},t.prototype.clearSegmentCache=function(){this._internals.removeExternalData(this.CACHED_SEGMENTS_STORAGE_KEY)},t.prototype.writeQueryStateCache=function(){this._internals.log("Writing query state cache",this.queryStateMap),this._internals.state.setPermutiveData("query_states",this.queryStateMap)},t.prototype.readQueryStateCache=function(){var e=this,t=this._internals.state.getPermutiveData("query_states")||{};this.queryStateMap=i.filterByKey(t,(function(t){return t in e.queryMetadata})),this._internals.log("Read query state cache",this.queryStateMap)},t.prototype.clearQueryStateCache=function(){this._internals.state.setPermutiveData("query_states",{})},t}();t.QueryManager=s}).call(this,n(3).Promise)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryWorker=void 0,t.QueryWorker=function(){var e=this,t=function(){var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},n={k:function(e,t){return t.reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)},kf:function(e,t,n){var r=t.reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e);return null===r?null:n(r)},ti:function(e){return new Date(e).getTime()},pre:function(e,t){var n=t.slice();return n.unshift(e),n},n0:function(e){return!e},nt:function(e){return function(t){return!e(t)}},t:function(e){return!0},a:function(e){return e.reduce((function(e,t){return function(n){return e(n)&&t(n)}}))},o:function(e){return e.reduce((function(e,t){return function(n){return e(n)||t(n)}}))},i:function(e){return e},as:function(e,t,r){return function(i){return r.reduce((function(r,a){return r&&e(a)(n.k(i,n.pre("properties",t)))}),!0)}},os:function(e,t,r){return function(i){return r.reduce((function(r,a){return r||e(a)(n.k(i,n.pre("properties",t)))}),!1)}},e:function(e){return function(t){return t===e}},n:function(e){return function(t){return t!==e}},g:function(e){return function(t){return t>e}},ge:function(e){return function(t){return t>=e}},l:function(e){return function(t){return t<e}},le:function(e){return function(t){return t<=e}},b:function(e,t){return function(n){return n>=e&&n<=t}},s:function(e){return function(t){return"string"==typeof e&&"string"==typeof t&&t.toLowerCase().indexOf(e.toLowerCase())>-1}},c:function(e){return function(t){return null!=t&&"object"==typeof t&&t.indexOf(e)>=0}},e_:function(e,t){return function(r){return n.k(r,e)===t}},n_:function(e,t){return function(r){return n.k(r,e)!==t}},g_:function(e,t){return function(r){return n.k(r,e)>t}},ge_:function(e,t){return function(r){return n.k(r,e)>=t}},l_:function(e,t){return function(r){return n.k(r,e)<t}},le_:function(e,t){return function(r){return n.k(r,e)<=t}},b_:function(e,t,r){return function(i){return n.k(i,e)>=t&&n.k(i,e)<=r}},s_:function(e,t){return function(r){var i=n.k(r,e);return"string"==typeof t&&"string"==typeof i&&i.toLowerCase().indexOf(t.toLowerCase())>-1}},c_:function(e,t){return function(r){var i=n.k(r,e);return null!=i&&"object"==typeof i&&i.indexOf(t)>=0}},pe:function(e,t){return function(r){return n.k(r,n.pre("properties",e))===t}},pn:function(e,t){return function(r){return n.k(r,n.pre("properties",e))!==t}},pg:function(e,t){return function(r){return n.k(r,n.pre("properties",e))>t}},pge:function(e,t){return function(r){return n.k(r,n.pre("properties",e))>=t}},pl:function(e,t){return function(r){return n.k(r,n.pre("properties",e))<t}},ple:function(e,t){return function(r){return n.k(r,n.pre("properties",e))<=t}},pb:function(e,t,r){return function(i){return n.k(i,n.pre("properties",e))>=t&&n.k(i,n.pre("properties",e))<=r}},ps:function(e,t){return function(r){var i=n.k(r,n.pre("properties",e));return"string"==typeof t&&"string"==typeof i&&i.toLowerCase().indexOf(t.toLowerCase())>-1}},pc:function(e,t){return function(r){var i=n.k(r,n.pre("properties",e));return null!=i&&"object"==typeof i&&i.indexOf(t)>=0}},te_:function(e,t){return function(r){return n.kf(r,e,n.ti)===t}},tn_:function(e,t){return function(r){return n.kf(r,e,n.ti)!==t}},tg_:function(e,t){return function(r){return n.kf(r,e,n.ti)>t}},tge_:function(e,t){return function(r){return n.kf(r,e,n.ti)>=t}},tl_:function(e,t){return function(r){return n.kf(r,e,n.ti)<t}},tle_:function(e,t){return function(r){return n.kf(r,e,n.ti)<=t}},tb_:function(e,t,r){return function(i){return n.kf(i,e,n.ti)>=t&&n.kf(i,e,n.ti)<=r}},te:function(e){return function(t){return n.kf(t,["time"],n.ti)===e}},tn:function(e){return function(t){return n.kf(t,["time"],n.ti)!==e}},tg:function(e){return function(t){return n.kf(t,["time"],n.ti)>e}},tge:function(e){return function(t){return n.kf(t,["time"],n.ti)>=e}},tl:function(e){return function(t){return n.kf(t,["time"],n.ti)<e}},tle:function(e){return function(t){return n.kf(t,["time"],n.ti)<=e}},tb:function(e,t){return function(r){return n.kf(r,["time"],n.ti)>=e&&n.kf(r,["time"],n.ti)<=t}},af:function(e,t,r,i,a,o){return function(s){var u=n.kf(s,e,(function(e){return e.filter(i).map((function(e){return n.k(e,t)})).reduce(a,o)}));return r(null===u?o:u)}},af_s:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,(function(e,t){return e+t}),0)},af_p:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,(function(e,t){return e*t}),1)},af_n:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,(function(e,t){return Math.min(e,t)}),Number.POSITIVE_INFINITY)},af_x:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),n.af(e,t,r,i,(function(e,t){return Math.max(e,t)}),Number.NEGATIVE_INFINITY)},af_m:function(e,t,r,i){return void 0===i&&(i=function(e){return!0}),function(a){var o=n.kf(a,e,(function(e){return e.filter(i)}));return null===o||0===o.length?r(0):r(o.map((function(e){return n.k(e,t)})).reduce((function(e,t){return e+t}),0)/o.length)}},af_u:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){return n.kf(i,e,(function(e){return e.filter(r).map(t).reduce((function(e,t){return e||t}),!1)}))||!1}},af_i:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){return n.kf(i,e,(function(e){return e.filter(r).map(t).reduce((function(e,t){return e&&t}),!0)}))&&!0}},af_l:function(e,t,r){return void 0===r&&(r=function(e){return!0}),function(i){var a=n.kf(i,e,(function(e){return e.filter(r).length}));return t(null===a?0:a)}},tp:function(e,t,r,i,a){var o=n.k(e.getSegments(),[t,r])||!1;return a&&(i||o)&&e.setSegmentActivation(t,r,a),o},tpn:function(e,t,r){return n.k(e.getSegments(),[t,r])||!1},oe:function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r},lms:function(e,t,r){var i,a=e||{},o=t[r]||{},s=(o["1p"]||{}).const||0,u=n.oe(o);for(var c in u){var f=n.oe(u[c][1]);for(var d in f)!0===(a[u[c][0]]||{})[f[d][0]]&&(s+=f[d][1])}return i=s,1/(1+Math.pow(Math.E,-i))},fm:function(e,t){return{p:t.p,r:function(n,r){return e(t.r(n,r))},a:t.a}},acq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])&&t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}}}},ocq:function(e,t){return{p:function(n,r){return[e.p(n,r),t.p(n,r)]},r:function(n,r){return e.r(n,r[0])||t.r(n,r[1])},a:{z:[e.a.z,t.a.z],m:function(n,r){return[e.a.m(n[0],r[0]),t.a.m(n[1],r[1])]}}}},cw:function(e,t,r){return void 0===r&&(r=n.i),{a:{m:function(e,t){return e+t},z:0},p:function(r,i){return n.k(i,["name"])===e&&t(i)?1:0},r:function(e,t){return r(t)}}},mxw:function(e,t,r,i){void 0===i&&(i=n.i);var a=Number.NEGATIVE_INFINITY;return{a:{m:function(e,t){return e>t?e:t},z:a},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):a},r:function(e,t){return i(t)}}},vgw:function(e,t,r,i){void 0===i&&(i=n.i);var a={v:0,k:0};return{a:{m:function(e,t){var n=e.k+t.k;return{v:n?e.v+t.k*(t.v-e.v)/n:0,k:n}},z:a},p:function(i,o){return n.k(o,["name"])===e&&t(o)?{v:n.k(o,r),k:1}:a},r:function(e,t){return i(t.v)}}},mnw:function(e,t,r,i){void 0===i&&(i=n.i);var a=Number.POSITIVE_INFINITY;return{a:{m:function(e,t){return e<t?e:t},z:a},p:function(i,o){return n.k(o,["name"])===e&&t(o)?n.k(o,r):a},r:function(e,t){return i(t)}}},sw:function(e,t,r,i){void 0===i&&(i=n.i);return{a:{m:function(e,t){return e+t},z:0},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):0},r:function(e,t){return i(t)}}},pw:function(e,t,r,i){void 0===i&&(i=n.i);return{a:{m:function(e,t){return e*t},z:1},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):1},r:function(e,t){return i(t)}}},ctw:function(e,t,r,i){return{a:i?{m:function(e,t){return e.concat(t).slice(-i)},z:[]}:{m:function(e,t){return e.concat(t)},z:[]},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):[]},r:function(e,t){return t}}},ctv:function(t,r,i,a){function o(e,t){var n=function(e){return{k:e.k,c:1+e.c}},r={arr:[],add:{k:t,c:1}};return t?function(e){return e.arr.concat(e.add)}(e.reduce((function(e,t){return e.add.k===t.k?{arr:e.arr,add:n(t)}:{arr:e.arr.concat(t),add:e.add}}),r)):e}return{a:a?{m:function(e,t){return o(e,t).slice(-a)},z:[]}:{m:function(e,t){return o(e,t)},z:[]},p:function(e,a){return n.k(a,["name"])===t&&r(a)?n.k(a,i):null},r:function(t,n){return n.reduce((function(t,n){var r;return e(e({},t),((r={})[n.k]=n.c,r))}),{})}}},ctu:function(e,t,r,i){return{a:i?{m:function(e,t){return e.filter((function(e){return!t.includes(e)})).concat(t).slice(-i)},z:[]}:{m:function(e,t){return e.filter((function(e){return!t.includes(e)})).concat(t)},z:[]},p:function(i,a){return n.k(a,["name"])===e&&t(a)?n.k(a,r):[]},r:function(e,t){return t}}},itp:function(e,t,r,i){return{a:{m:function(e,t){return t},z:!1},p:function(r,i){return n.tpn(r,e,t)},r:function(a,o){return n.tp(a,e,t,r,i)}}},isp:function(e,t,r,i){return{a:{m:function(e,t){return t},z:!1},p:function(r,i){return n.tpn(r,e,t)},r:function(a,o){return n.tp(a,e,t,r,i)}}},ifp:function(e){return{a:{m:function(e,t){return t},z:!1},p:function(t,r){return n.tp(t,"1p",e,!1)},r:function(e,t){return t}}},lm:function(e,t){return{a:{m:function(e,t){return t},z:[]},p:function(t,r){return[n.lms(t.getSegments(),t.getLookalikeModels(),e)]},r:function(e,n){return!!n[0]&&t(n[0])}}},sq:function(e){return{a:{m:function(t,n){return[n[0],e.a.m(null!=t[0]&&t[0][0]===n[0][0]?t[1]:e.a.z,n[1])]},z:[[],e.a.z]},p:function(t,r){return[[t.getCurrentSession()],n.k(r,["session_id"])===t.getCurrentSession()?e.p(t,r):e.a.z]},r:function(t,n){return e.r(t,n[0]!=[]&&n[0][0]===t.getCurrentSession()?n[1]:e.a.z)}}},vq:function(e){return{a:{m:function(t,n){return[n[0],e.a.m(null!=t[0]&&t[0][0]===n[0][0]?t[1]:e.a.z,n[1])]},z:[[],e.a.z]},p:function(t,r){return[[t.getCurrentView()],n.k(r,["view_id"])===t.getCurrentView()?e.p(t,r):e.a.z]},r:function(t,n){return e.r(t,n[0]!=[]&&n[0][0]===t.getCurrentView()?n[1]:e.a.z)}}},ltn:function(e,t,r){return{a:{m:function(e,t){return e.concat(t).slice(-r)},z:[]},p:function(r,i){return n.k(i,["name"])===t?[e.p(r,i)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))}}},ftn:function(e,t,r){return{a:{m:function(e,t){return e.concat(t.slice(0,r-e.length))},z:[]},p:function(r,i){return n.k(i,["name"])===t?[e.p(r,i)]:[]},r:function(t,n){return e.r(t,n.reduce((function(t,n){return e.a.m(t,n)}),e.a.z))}}},gb:function(e,t,r){return{a:{m:function(r,i){return Object.keys(r).concat(Object.keys(i)).filter((function(e,t,n){return n.indexOf(e)===t})).sort((function(e,t){return Math.max(n.k(r,[t,1]),n.k(i,[t,1]))-Math.max(n.k(r,[e,1]),n.k(i,[e,1]))})).slice(0,t).reduce((function(t,a){var o=e.a.m(n.k(r,[a,0])||e.a.z,n.k(i,[a,0])||e.a.z);return t[a]=[o,Math.max(n.k(r,[a,1]),n.k(i,[a,1]))],t}),{})},z:{}},p:function(t,i){var a,o,s=n.k(i,n.pre("properties",r)),u=e.p(t,i);return null==s||(null==(o=u)||"object"==typeof o&&0===Object.keys(o).length||o===e.a.z)?{}:((a={})[s]=[u,n.kf(i,["time"],n.ti)],a)},r:function(t,n){var r={};return Object.keys(n).forEach((function(i){return r[i]=e.r(t,n[i][0])})),r}}},tw:function(e,r,i){var a=i||100,o=Math.ceil(r/a),s=function(e,t,n){var i;return[Math.floor((e-r)/o),(i={},i[Math.floor(t/o)]=n,i)]},u=function(t,n){var r=Math.max(t[0],n[0]),i=Object.keys(t[1]).filter((function(e){return e>=r})).concat(Object.keys(n[1]).filter((function(e){return e>=r}))).filter((function(e,t,n){return n.indexOf(e)===t})).reduce((function(r,i){var a=e.a.m(t[1][i]||e.a.z,n[1][i]||e.a.z);return a!==e.a.z&&(r[i]=a),r}),{});return[r,i]},c=[Number.NEGATIVE_INFINITY,{}],f=function(e){var n=function(n){return n.map((function(n){var r=t(n,3),i=r[0],a=(r[1],r[2]);return s(e.t,a,i)})).reduce(u,c)};return u(n(e.in),n(e.out))};return{a:{m:function(e,t){var n=e.w?f(e):e;return u(n,t)},z:c},p:function(t,r){return s(t.getCurrentTime(),n.kf(r,["time"],n.ti),e.p(t,r))},r:function(t,n){var r=(n.w?f(n):n)[1];return e.r(t,Object.keys(r).reduce((function(t,n){return e.a.m(t,r[n])}),e.a.z))}}},q:function(e){return{initial:function(t){return{result:e.a.z}},update:function(t,n,r){return{result:e.a.m(n.result,e.p(t,r))}},result:function(t,n){return{result:e.r(t,n.result)}},m:e.a.m,z:e.a.z,p:e.p,r:e.r}}},r={36649:n.q(n.cw("Pageview",n.t,n.ge(1))),37181:n.q(n.tw(n.cw("Pageview",n.o([n.pc(["article","prtCat"],"movies"),n.pe(["article","channel"],"Movies")]),n.ge(1)),5184e6)),37201:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["tv shows","tv video","video","tv & video","tv shows & programs","tv video","tv shows programs"]),n.pe(["article","channel"],"TV")]),n.ge(1)),5184e6)),37202:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["performing arts","dance"])]),n.ge(1)),5184e6)),37203:n.q(n.tw(n.cw("Pageview",n.o([n.pc(["article","prtCat"],"celebrities entertainment news"),n.pe(["article","channel"],"Celebs")]),n.ge(1)),5184e6)),37204:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["humor","funny pictures videos","comics","animation"])]),n.ge(1)),5184e6)),37205:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","theme"],["awards","redcarpet"])]),n.ge(1)),5184e6)),37206:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["music","concerts music festivals","music & audio","music audio","audio"]),n.pe(["article","channel"],"Music")]),n.ge(1)),5184e6)),37207:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["tv video","funny pictures videos"])]),n.ge(1)),5184e6)),37208:n.q(n.tw(n.cw("Pageview",n.pe(["article","type"],"trivia"),n.ge(1)),5184e6)),37209:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["fashion","beauty pageants","fashion designers collections"])]),n.ge(1)),5184e6)),37210:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["hair","hair care"]),n.pe(["article","channel"],"Hair")]),n.ge(1)),5184e6)),37211:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["face body care","face & body care"])]),n.ge(1)),5184e6)),37212:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"fashion designers collections"),n.ge(1)),5184e6)),37213:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["hair","hair care"]),n.pe(["article","channel"],"Hair")]),n.ge(3)),5184e6)),37214:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"nail"),n.ge(3)),5184e6)),37215:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"skin"),n.ge(3)),5184e6)),37216:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"cosmetics"),n.ge(3)),5184e6)),37217:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["perfumes","fragrances","perfumes & fragrances","perfumes fragrances"])]),n.ge(2)),5184e6)),37218:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"apparel"),n.ge(3)),5184e6)),37219:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"clothing accessories"),n.ge(3)),5184e6)),37220:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"womens clothing"),n.ge(3)),5184e6)),37221:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"costumes"),n.ge(3)),5184e6)),37222:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"footwear"),n.ge(3)),5184e6)),37223:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"swimwear"),n.ge(3)),5184e6)),37224:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"fashion designers collections"),n.ge(3)),5184e6)),37225:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"beverages"),n.ge(3)),5184e6)),37226:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"pet food supplies"),n.ge(3)),5184e6)),37227:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["nutition","special restricted diets"])]),n.ge(3)),5184e6)),37228:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["food","drink","food drink","food & drink"])]),n.ge(1)),5184e6)),37229:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"cooking recipes"),n.ge(1)),5184e6)),37230:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"baking"),n.ge(1)),5184e6)),37231:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["snack foods","fast food","restaurants"])]),n.ge(1)),5184e6)),37232:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["home interior decor","home furnishings","home","home & interior decor"]),n.pe(["article","channel"],"HomeTours")]),n.ge(1)),5184e6)),37233:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["home improvement","home storage shelving","landscaping"])]),n.ge(1)),5184e6)),37234:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["home interior decor","home furnishings","home"])]),n.ge(3)),5184e6)),37235:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"kitchen dining"),n.ge(3)),5184e6)),37236:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"bed bath"),n.ge(3)),5184e6)),37237:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["home improvement","home storage shelving"])]),n.ge(3)),5184e6)),37238:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"landscaping"),n.ge(3)),5184e6)),37239:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"real estate"),n.ge(1)),5184e6)),37240:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"real estate"),n.ge(3)),5184e6)),37241:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["sports","sport"])]),n.ge(1)),5184e6)),37242:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"soccer"),n.ge(1)),5184e6)),37243:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"basketball"),n.ge(1)),5184e6)),37244:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"american football"),n.ge(1)),5184e6)),37245:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"golf"),n.ge(1)),5184e6)),37246:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["racquet","racquet sports"])]),n.ge(1)),5184e6)),37247:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["news","government","politics"])]),n.ge(1)),5184e6)),37248:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["health","fitness","medical procedures"])]),n.ge(1)),5184e6)),37249:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["womens health","reproductive health"])]),n.ge(1)),5184e6)),37250:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"sleep disorders"),n.ge(1)),5184e6)),37251:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"nutrition"),n.ge(1)),5184e6)),37252:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["family","kids","childerns","babies","baby"])]),n.ge(1)),5184e6)),37253:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"marriage"),n.ge(1)),5184e6)),37254:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"wedding"),n.ge(1)),5184e6)),37255:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"dating"),n.ge(1)),5184e6)),37256:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["pregnancy","babies"])]),n.ge(1)),5184e6)),37257:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"toys"),n.ge(3)),5184e6)),37258:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"gifts"),n.ge(3)),5184e6)),37259:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["pregnancy","babies"])]),n.ge(3)),5184e6)),37260:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["special occasions","holiday"])]),n.ge(3)),2592e6)),37261:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"pets"),n.ge(1)),5184e6)),37262:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["books","books literature","books & literature"])]),n.ge(1)),5184e6)),37263:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"childrens literature"),n.ge(1)),5184e6)),37264:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.s,["article","source"],["snap","fcbk","facebook","facebook.com","Facebook"])]),n.ge(1)),5184e6)),37265:n.q(n.tw(n.cw("Pageview",n.ps(["article","description"],"netflix"),n.ge(2)),5184e6)),37266:n.q(n.tw(n.cw("Pageview",n.ps(["article","campaignSrc"],"Demo-W"),n.ge(1)),31536e6)),37267:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.e,["article","campaignSrc"],["Snap-ZM-Games-US-Mobile-Demo-1835-American-Bestie","Snap-ZM-Games-US-Mobile-Demo-1835-American-Boy-Date","Snap-ZM-Games-US-Mobile-Demo-1835-Female-Superhero","Snap-ZM-Games-US-Mobile-Demo-1835-My-Block-Character","Snap-ZM-Games-US-Mobile-Demo-1835-Why-Still-Single","Snap-ZM-Games-US-Mobile-Droid-Demo-1835-American-Boy-Date","Snap-ZM-Games-US-Mobile-Droid-Demo-1835-Female-Superhero","Snap-ZM-Games-US-Mobile-Droid-Demo-1835-My-Block-Character","Snap-ZM-Stories-US-Mobile-Demo-1835-Actors-Bodybuilders-2","Snap-ZM-Stories-US-Mobile-Droid-Demo-1835-Popular-Movie-Year-Born-2","Snap-ZM-Stories-US-Mobile-Droid-Demo-1835-PDA-Hall-Of-Fame","Snap-ZM-Stories-US-Mobile-Demo-1835-Stars-Grew-Up-TV","Snap-ZM-Stories-US-Mobile-Demo-1835-Highest-Paid-Child-Actors-2","Snap-ZM-Stories-US-Mobile-Demo-1835-Netflix-No-One-Watch-2","Snap-ZM-Stories-US-Mobile-Demo-1835-Quarantine-Anthem"])]),n.ge(1)),31536e6)),37268:n.q(n.tw(n.cw("Pageview",n.ps(["article","campaignSrc"],"4665-"),n.ge(1)),31536e6)),37269:n.q(n.tw(n.cw("Pageview",n.ps(["article","campaignSrc"],"1545-"),n.ge(1)),31536e6)),37270:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"itsrosy"),n.ge(1)),10368e6)),37271:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"livingly"),n.ge(1)),10368e6)),37272:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"lonny"),n.ge(1)),10368e6)),37273:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"mabelandmoxie"),n.ge(1)),10368e6)),37274:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"stylebistro"),n.ge(1)),10368e6)),37275:n.q(n.tw(n.cw("Pageview",n.ps(["article","domain"],"zimbio"),n.ge(1)),10368e6)),37276:n.q(n.tw(n.cw("Pageview",n.pe(["article","isMktg"],!1),n.ge(1)),10368e6)),37277:n.q(n.tw(n.cw("Pageview",n.pe(["article","isMktg"],!0),n.ge(1)),10368e6)),37278:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"itsrosy"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37279:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"livingly"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37280:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"lonny"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37281:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"mabelandmoxie"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37282:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"stylebistro"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37283:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"zimbio"),n.pe(["article","isMktg"],!1)]),n.ge(1)),10368e6)),37284:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"itsrosy"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),37285:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"livingly"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),37286:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"lonny"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),37287:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"mabelandmoxie"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),37288:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"stylebistro"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),37289:n.q(n.tw(n.cw("Pageview",n.a([n.ps(["article","domain"],"zimbio"),n.pe(["article","isMktg"],!0)]),n.ge(1)),10368e6)),39163:n.q(n.cw("Pageview",n.t,n.ge(1))),39395:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["AT&T","att.com","HBO Max","hbo.com.au","TBS","TNT","Warner media","WarnerMedia","DirectTV","Turner","HBO"])]),n.ge(1)),10368e6)),39396:n.q(n.cw("PrebidBid",n.pe(["advertiser_name"],"LendingTree"),n.ge(1))),39398:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["Comcast Corporation","Xfinity","Comcast","comcast.com","NBCUniversal"])]),n.ge(1)),10368e6)),39550:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["Berkshire Hathaway","geico.com","Geico"])]),n.ge(1)),10368e6)),39556:n.q(n.cw("PrebidBid",n.o([n.os(n.s,["advertiser_id"],["19128","56104"]),n.pe(["advertiser_name"],"Berkshire Hathaway")]),n.ge(1))),39557:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["Fiat Chrysler Dealers","Fiat Chrysler Automobiles Dealers","Fiat Chrysler Dealers","Ferrari","Abarth","Alfa Romeo","Chrysler","Ram Trucks","Maserati","Dodge","Fiat","Lancia","Jeep","fiat"])]),n.ge(1)),10368e6)),39647:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"Mabelandmoxie"),n.ge(1)))),39652:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"Zimbio"),n.ge(1)))),39653:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"Lonny"),n.ge(1)))),39654:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"Itsrosy"),n.ge(1)))),39655:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"Livingly"),n.ge(1)))),39656:n.q(n.acq(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6),n.cw("Pageview",n.pe(["article","domain"],"StyleBistro"),n.ge(1)))),39657:n.q(n.tw(n.cw("PageviewEngagement",n.pge(["total_engaged_time"],180),n.ge(1)),2592e6)),39662:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"14660"),n.pe(["advertiser_name"],"CarMax")]),n.ge(1)),10368e6)),39665:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"4763"),n.pe(["advertiser_name"],"Walgreens Boots Alliance")]),n.ge(1)),10368e6)),39671:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["Verizon Communications","Yahoo!","yahoo","yahoo.com"])]),n.ge(1)),10368e6)),39672:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["GlaxoSmithKline","GlaxoSmithKline Brands","Theraflu","Otrivin","Flonase","Contac","Nicorette"]),n.os(n.e,["advertiser_id"],["6238","2082"])]),n.ge(1)),10368e6)),39673:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"242221"),n.pe(["advertiser_name"],"United States Government")]),n.ge(1)),10368e6)),39674:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_name"],["Amazon Corp","Amazon Prime","Amazon Music","AWS","Audible","Twitch","Zappos","Chime","Fire"])]),n.ge(1)),10368e6)),39677:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"1156"),n.pe(["advertiser_name"],"Petco")]),n.ge(1)),10368e6)),39678:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["290418","59982"]),n.os(n.e,["advertiser_name"],["Sanofi","sanofigenzyme.com"])]),n.ge(1)),10368e6)),39679:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["3941","39540","8193"]),n.os(n.e,["advertiser_name"],["Best Buy Brands","Best Buy","Insignia","Geek Squad","Magnolia","Dynex","bestbuy.com"])]),n.ge(1)),10368e6)),39680:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"501856"),n.pe(["advertiser_name"],"Fashion Mia")]),n.ge(1)),10368e6)),39681:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"20430"),n.pe(["advertiser_name"],"Pernod Ricard")]),n.ge(1)),10368e6)),39682:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"2020"),n.pe(["advertiser_name"],"tracfone.com")]),n.ge(1)),10368e6)),39683:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"32633"),n.os(n.e,["advertiser_name"],["GM Group","Buick","Cadillac","Chevrolet","GMC"])]),n.ge(1)),10368e6)),39684:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"27399"),n.os(n.e,["advertiser_name"],["The Clorox Company","Brita water","Burt's Bees","Fresh Step","Scoop Away","Ever Clean","Formula 409","Glad","Hidden Valley","Green Works","Handy Andy","Kitchen Bouquet","KC Masterpiece","Soy Vay","Kingsford","Lestoil","Liquid-Plumr","Natural Vitality","Neocell","Pine-Sol","Tilex","S.O.S","Rainbow Light","Renew Life"])]),n.ge(1)),432e6)),39685:n.q(n.tw(n.cw("PrebidBid",n.pe(["advertiser_name"],"Ad Stopper"),n.ge(1)),10368e6)),39686:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["3753","28980"]),n.pe(["advertiser_name"],"Dyson")]),n.ge(1)),10368e6)),39775:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"856"),n.pe(["advertiser_name"],"Groupe Danone")]),n.ge(1)),10368e6)),39776:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"2476108"),n.pe(["advertiser_name"],"Mobility")]),n.ge(1)),10368e6)),39778:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["351","27455","2090"]),n.os(n.e,["advertiser_name"],["Johnson & Johnson","Johnson & Johnson Brands","Johnson's Baby","Aveeno","Neutrogena","Johnson's","Clean & Clear","Dabao","Band-Aid","Bengay","Savlon","Neosporin","Listerine","Rembrandt","Splenda","Benecol","Visine","Acuvue","Tylenol","Sudafed","Pepcid","Benadryl"])]),n.ge(1)),432e6)),39780:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["1869","43957","2798972"]),n.os(n.e,["advertiser_name"],["Procter & Gamble","PROCTER & GAMBLE COMPANY","Always","Ariel","Bounty","Charmin","Crest","Dawn","Downy","Fairy","Febreze","Gain","Gillette","Head & Shoulders","Olay","Oral-B","Pampers & Pampers","Kandoo","Luvs","Pantene","SK-II","TIde","Vicks"])]),n.ge(1)),10368e6)),39783:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"24564"),n.os(n.e,["advertiser_name"],["henkel-northamerica.com","Agorex","Alexander","Alterna","Antica Erboristeria","Aquence","Ariasana","Authentic Beauty Concept","Bain de Terre","Ballerina","Barnangen","BC Bonacure","Beology","Big D","Bio-Tech","Bio Presto","Blendax","Blonde","BlondMe","Bloom","Blue Star","Bonderite","Boston","Bref","Bruynzeel","Bully","All","Boraxo","Breck","Combat","Dial","Dry Idea","Gliss","got2b","Persil","Purex","Renuzit","Right Guard","Soft Scrub","Snuggle","Surf"])]),n.ge(1)),10368e6)),39785:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"154956"),n.pe(["advertiser_name"],"hersheys.com")]),n.ge(1)),10368e6)),39786:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"3417"),n.os(n.e,["advertiser_name"],["microsoft.com","Microsoft Corp.","Skype","msn","Bing","Edge","LinkedIn","bing","MSN"])]),n.ge(1)),10368e6)),39787:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"13641"),n.os(n.e,["advertiser_name"],["SC Johnson & Son","Grand Prix","Tempo","Armstrong","Glo-Coat","Johnsons Brite","Drano","Glade","Fantastik","Pledge","Shout","Windex","Nature's Source","Method","Ziploc","Saran Wrap","OFF!","Raid","Sun Bum"])]),n.ge(1)),10368e6)),39798:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["1551","2572","85337","1551449481"]),n.pe(["advertiser_name"],"Wayfair")]),n.ge(1)),10368e6)),39799:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"4240"),n.os(n.e,["advertiser_name"],["armorall.com","Armor All","Energizer"])]),n.ge(1)),10368e6)),39802:n.q(n.tw(n.cw("PrebidBid",n.pe(["advertiser_name"],"United Services Automobile Association (USAA)"),n.ge(1)),10368e6)),39803:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"27542"),n.os(n.e,["advertiser_name"],["The Walt Disney Company","Disney Land","Marvel Studio","ABC","ESPN","Lucasfilm","A&E","Pixar","Star Wars"])]),n.ge(1)),10368e6)),39804:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"13085"),n.pe(["advertiser_name"],"xbox.com")]),n.ge(1)),10368e6)),39805:n.q(n.tw(n.cw("PrebidBid",n.pe(["advertiser_name"],"The Kroger Company"),n.ge(1)),10368e6)),39807:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_name"],"GreatCall"),n.os(n.e,["advertiser_id"],["601","2361","56715"])]),n.ge(1)),10368e6)),39809:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["262120","36200","70468"]),n.pe(["advertiser_name"],"Banggood")]),n.ge(1)),10368e6)),39810:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["1778","34807","36947","58288"]),n.os(n.e,["advertiser_name"],["Eli Lilly","Eli Lilly and Company","Eli Lilly & Company","lilly.com"])]),n.ge(1)),10368e6)),39811:n.q(n.tw(n.cw("PrebidBid",n.pe(["advertiser_name"],"Flipp"),n.ge(1)),10368e6)),39812:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_name"],"The ServiceMaster Company"),n.pe(["advertiser_id"],"121413")]),n.ge(1)),10368e6)),39814:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"3403"),n.pe(["advertiser_name"],"advil.com")]),n.ge(1)),10368e6)),39815:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["2073","7943"]),n.pe(["advertiser_name"],"Boehringer Ingelheim")]),n.ge(1)),10368e6)),39816:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["151053","3341","29234"]),n.pe(["advertiser_name"],"PayPal")]),n.ge(1)),10368e6)),39817:n.q(n.tw(n.cw("PrebidBid",n.pe(["advertiser_name"],"Health Plus 50"),n.ge(1)),10368e6)),39818:n.q(n.tw(n.cw("PrebidBid",n.o([n.pe(["advertiser_id"],"12413"),n.pe(["advertiser_name"],"Quicken Loans")]),n.ge(1)),10368e6)),39819:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["30258","8273"]),n.pe(["advertiser_name"],"Brilliant Earth")]),n.ge(1)),10368e6)),39820:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["29658","49953"]),n.os(n.e,["advertiser_name"],["Humira","humira.com"])]),n.ge(1)),10368e6)),39821:n.q(n.tw(n.cw("PrebidBid",n.o([n.os(n.e,["advertiser_id"],["158503","1362298","2751"]),n.os(n.e,["advertiser_name"],["State Farm","State Farm Mutual Automobile Insurance Company"])]),n.ge(1)),10368e6)),40127:n.q(n.cw("Pageview",n.o([n.os(n.e,["client","title"],["The Best Royal Dresses Ever Worn - Livingly","Daring Met Gala Dresses - Livingly","The Most Daring Gowns Ever Worn To The ACM Awards - Livingly","The Worst Hair Mistakes That Will Make You Look Older - It's Rosy","Famous Musicians Who Left Bands To Go Solo - Livingly","The Best and Worst TV And Film Wedding Dresses - Livingly","The Best Dog Breeds For Retirees - It's Rosy","Here Are 30 Dog Breeds Perfect For Retirees - It's Rosy","Style Flashback: Elizabeth Taylor - It's Rosy","Actors You Never Knew Were Related to Famous People - Zimbio"])]),n.ge(1))),40137:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["arts & entertainment","arts entertainment"])]),n.ge(1)),5184e6)),40138:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["beauty & fitness","beauty fitness"])]),n.ge(1)),5184e6)),40139:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["perfumes","fragrances","perfumes & fragrances","perfumes fragrances"])]),n.ge(1)),5184e6)),40140:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["antiques & collectibles","antiques collectibles","antiques"])]),n.ge(1)),5184e6)),40141:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["vehicle repair & maintenance","vehicle repair maintenance"])]),n.ge(1)),5184e6)),40142:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["autos & vehicles","autos vehicles"])]),n.ge(1)),5184e6)),40143:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"weather"),n.ge(1)),5184e6)),40144:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"Beverages"),n.ge(1)),5184e6)),40145:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["home & garden","home garden"])]),n.ge(1)),5184e6)),40146:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["education","job"])]),n.ge(1)),5184e6)),40147:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"home appliances"),n.ge(1)),5184e6)),40148:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"home safety & security"),n.ge(1)),5184e6)),40149:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["video games","computer & video games","computer and video games"])]),n.ge(1)),5184e6)),40150:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"gambling"),n.ge(1)),5184e6)),40151:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["water sports","swimming"])]),n.ge(1)),5184e6)),40152:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"outdoors"),n.ge(1)),5184e6)),40153:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["craft","crafts","Crafts"])]),n.ge(1)),5184e6)),40154:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"team sports"),n.ge(1)),5184e6)),40155:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"individual sports"),n.ge(1)),5184e6)),40156:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["winter sports","skiing & snowboarding","skiing and snowboarding"])]),n.ge(1)),5184e6)),40157:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"poetry"),n.ge(1)),5184e6)),40158:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["combat sports","boxing","wrestling"])]),n.ge(1)),5184e6)),40159:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"international sports competitions"),n.ge(1)),5184e6)),40160:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"college sports"),n.ge(1)),5184e6)),40161:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"fiction"),n.ge(1)),5184e6)),40162:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"dogs"),n.ge(1)),5184e6)),40163:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"cats"),n.ge(1)),5184e6)),40164:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"birds"),n.ge(1)),5184e6)),40165:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"oral & dental care"),n.ge(1)),5184e6)),40166:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["bus & rail","bus rail"])]),n.ge(1)),5184e6)),40167:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"occupational health & safety"),n.ge(1)),5184e6)),40168:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"health education & medical training"),n.ge(1)),5184e6)),40169:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["hotels & accommodations","hotels accommodations"])]),n.ge(1)),5184e6)),40170:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"tourist destinations"),n.ge(1)),5184e6)),40171:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["cruises & charters","cruises charters"])]),n.ge(1)),5184e6)),40172:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["business finance","business operations","industrial materials & equipment","industrial materials and equipment","finance"])]),n.ge(1)),5184e6)),40173:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"travel"),n.ge(1)),5184e6)),40174:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["pharmaceuticals & biotech","pharmaceuticals biotech"])]),n.ge(1)),5184e6)),40175:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"retail trade"),n.ge(1)),5184e6)),40176:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["seniors & retirement","seniors retirement"])]),n.ge(1)),5184e6)),40177:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["tax preparation & planning","tax preparation planning"])]),n.ge(1)),5184e6)),40178:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"homeschooling"),n.ge(1)),5184e6)),40179:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["banking","credit lending","credit & lending"])]),n.ge(1)),5184e6)),40180:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"software"),n.ge(1)),5184e6)),40181:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["financial planning & management","financial planning management"])]),n.ge(1)),5184e6)),40182:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"networking"),n.ge(1)),5184e6)),40183:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"insurance"),n.ge(1)),5184e6)),40184:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"investing"),n.ge(1)),5184e6)),40185:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"enterprise technology"),n.ge(1)),5184e6)),40186:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["internet & telecom","internet telecom"])]),n.ge(1)),5184e6)),40187:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["electronics electrical","electronics & electrical","consumer electronics"])]),n.ge(1)),5184e6)),40188:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.c,["article","prtCat"],["computers & electronics","computers electronics"])]),n.ge(1)),216e6)),40189:n.q(n.tw(n.cw("Pageview",n.pc(["article","prtCat"],"computer security"),n.ge(1)),5184e6)),40387:n.q(n.tw(n.cw("Pageview",n.pe(["article","source"],"snap"),n.ge(1)),5184e6)),40388:n.q(n.tw(n.cw("Pageview",n.o([n.os(n.e,["article","source"],["fcbk","Facebook.com","facebook","facebook.com"])]),n.ge(1)),5184e6))};return void 0!==r?r:{}}(),n=null,r=!1,i=[],a={},o={},s=function(t){switch(t.type){case"init":return e.init(t.msgId,t.args[0],t.args[1],t.args[2],t.args[3]);case"processEvents":return e.processEvents(t.msgId,t.args[0]);case"updateEnvironment":return e.updateEnvironment(t.msgId,t.args[0]);default:throw Error("Unexpected message "+t)}},u=function(t){e.postMessage({type:"complete",args:t})},c=function(t){0!==Object.keys(t).length&&e.postMessage({type:"stateChange",args:t})},f=function(t){0!==t.length&&e.postMessage({type:"errors",args:t})},d=function(e,o){var u={},d=[];e.forEach((function(e){var r=t[e],i=a[e];o.forEach((function(t){try{i.state=r.update(n,i.state,t)}catch(n){d.push({error:n.toString(),identifier:e,event_id:t.id})}})),i.result=r.result(n,i.state),u[e]=a[e]})),c(u),f(d),r=!0,i.forEach(s),i=[]};this.init=function(e,r,i,s,c){var f=s.lookalikeModels||{},l=function(e,t,n){var r=a[n].activations;e in r?-1!==r[e].indexOf(t)||r[e].push(t):r[e]=[t]};a=i,o=r,n={getCurrentTime:function(){return new Date},getCurrentSession:function(){return s.sessionId},getCurrentView:function(){return s.viewId},getSegments:function(){return{"1p":s.segments["1p"]}},getLookalikeModels:function(){return f},setThirdPartyActivation:function(e,t){},setSegmentActivation:function(e,t){}};var p=[];Object.keys(o).forEach((function(e){var r=o[e];if(!(e in i)||i[e].checksum!==r[0]){p.push(parseInt(e));var s=t[e],u=s.initial(n);a[e]={id:r[2],is_segment:r[1].indexOf("s")>-1,checksum:r[0],state:u,result:s.result(n,u),activations:{}}}})),d(p,c),n.getSegments=function(){return s.segments},n.setSegmentActivation=l,n.setThirdPartyActivation=l,d(p,[{}]),u(e)},this.updateEnvironment=function(t,a){if(!r)return i.push({msgId:t,type:"updateEnvironment",args:[a]});a.sessionId&&(n.getCurrentSession=function(){return a.sessionId}),a.segments&&(n.getSegments=function(){return a.segments}),a.lookalikeModels&&(n.getLookalikeModels=function(){return a.lookalikeModels}),e.processEvents(t,[{}])},this.processEvents=function(e,s){if(!r)return i.push({msgId:e,type:"processEvents",args:[s]});var d={},l=[];s.forEach((function(e){Object.keys(o).forEach((function(r){var i=t[r],o=a[r].state;try{var s=i.update(n,o,e);JSON.stringify(o)!==JSON.stringify(s)&&(a[r].state=s,a[r].result=i.result(n,s),d[r]=a[r])}catch(t){l.push({error:t.toString(),identifier:r,event_id:e.id})}}))})),c(d),f(l),u(e)},onmessage=function(e){s(e.data)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"sequenceT",(function(){return s})),n.d(t,"sequenceS",(function(){return u}));var r=n(6);function i(e,t,n){return function(r){var a=n.concat([r]);return 0===t?e.apply(null,a):i(e,t-1,a)}}var a={};function o(e){return a.hasOwnProperty(e)||(a[e]=i(r.tuple,e-1,[])),a[e]}function s(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,i=o(r),a=e.map(t[0],i),s=1;s<r;s++)a=e.ap(a,t[s]);return a}}function u(e){return function(t){for(var n=Object.keys(t),r=n.length,a=function(e){var t=e.length;return i((function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i={},a=0;a<t;a++)i[e[a]]=n[a];return i}),t-1,[])}(n),o=e.map(t[n[0]],a),s=1;s<r;s++)o=e.ap(o,t[n[s]]);return o}}},function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.register=t.GraphQLGeoIP=void 0;var a=n(4),o=function(e){function t(t){var n=e.call(this)||this;return n.replacementMap={$ip_geo_info:t.geo,$ip_isp_info:t.isp,$ip_address:t.ip,$ip_address_hash:t.ip_hash},n}return i(t,e),t}(n(19).SingleEnricher),s=function(e){var t=this;this.resource="geoip",this.query=function(){return"geoip { "+[t.config.includeGeo?"geo { continent country city province postal_code }":"",t.config.includeISP?"isp { isp organization autonomous_system_number autonomous_system_organization }":"",t.config.includeIP?"ip":"",t.config.includeIPHash?"ip_hash":""].join(" ")+" }"},this.config=e};t.GraphQLGeoIP=s,t.register=function(e,t){var n=function(e){e.isp&&(t.isp=e.isp.isp,t.organization=e.isp.organization,t.autonomous_system_number=e.isp.autonomous_system_number,t.autonomous_system_organization=e.isp.autonomous_system_organization),e.geo&&(t.continent=e.geo.continent,t.country=e.geo.country,t.city=e.geo.city,t.province=e.geo.province,t.postal_code=e.geo.postal_code)},r=e.state.getPermutiveData("enricher:geoip");if(r&&r.session_id===e.sessionManager.getSessionId())n(r.data),e.enrichers.register(new o(r.data));else{var i={includeGeo:a.lens({geoip:{}},"geoip","include_geo")||!0,includeISP:a.lens({geoip:{}},"geoip","include_isp")||!0,includeIPHash:a.lens({geoip:{}},"geoip","include_ip_hash")||!0,includeIP:a.lens({geoip:{}},"geoip","include_ip")||!1};e.graphql.register(new s(i)).then((function(t){n(t),e.state.setPermutiveData("enricher:geoip",{session_id:e.sessionManager.getSessionId(),data:t}),e.enrichers.register(new o(t))})).catch((function(t){return e.network.error("Error while registering the geoip enricher: got "+t)}))}}}]);